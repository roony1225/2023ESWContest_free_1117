var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;var caf=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;if(raf&&!caf){var keyInfo={};var oldraf=raf;raf=function(c){function b(){if(keyInfo[a]){c()}}var a=oldraf(b);keyInfo[a]=true;return a};caf=function(a){delete keyInfo[a]}}else{if(!(raf&&caf)){raf=function(a){return window.setTimeout(a,16)};caf=window.clearTimeout}}window.requestAnimationFrame=raf;window.cancelAnimationFrame=caf;jindo.m=(function(){var _isVertical=null,_nPreWidth=-1,_nRotateTimer=null,_htHandler={},_htDeviceInfo={},_htAddPatch={},_htOsInfo={},_htBrowserInfo={},_htTouchEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},_htDeviceList={galaxyTab:["SHW-M180"],galaxyTab2:["SHW-M380"],galaxyS:["SHW-M110"],galaxyS2:["SHW-M250","GT-I9100"],galaxyS2LTE:["SHV-E110"],galaxyS3:["SHV-E210","SHW-M440","GT-I9300"],galaxyNote:["SHV-E160"],galaxyNote2:["SHV-E250"],galaxyNexus:["Galaxy Nexus"],optimusLte2:["LG-F160"],optimusVu:["LG-F100"],optimusLte:["LG-LU6200","LG-SU640","LG-F120K"]};function _initTouchEventName(){if("ontouchstart" in window){_htTouchEventName.start="touchstart";_htTouchEventName.move="touchmove";_htTouchEventName.end="touchend";_htTouchEventName.cancel="touchcancel"}else{if(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0){_htTouchEventName.start="MSPointerDown";_htTouchEventName.move="MSPointerMove";_htTouchEventName.end="MSPointerUp";_htTouchEventName.cancel="MSPointerCancel"}}}function _getOrientationChangeEvt(){var bEvtName="onorientationchange" in window?"orientationchange":"resize";if((_htOsInfo.android&&_htOsInfo.version==="2.1")){bEvtName="resize"}return bEvtName}function _getVertical(){var bVertical=null,sEventType=_getOrientationChangeEvt();if(sEventType==="resize"){var screenWidth=document.documentElement.clientWidth;if(_nPreWidth==-1){bVertical=screenWidth<document.documentElement.clientHeight}else{if(screenWidth<_nPreWidth){bVertical=true}else{if(screenWidth==_nPreWidth){bVertical=_isVertical}else{bVertical=false}}}_nPreWidth=screenWidth}else{var windowOrientation=window.orientation;if(windowOrientation===0||windowOrientation==180){bVertical=true}else{if(windowOrientation==90||windowOrientation==-90){bVertical=false}}}return bVertical}function _attachEvent(){var fnOrientation=jindo.$Fn(_onOrientationChange,this).attach(window,_getOrientationChangeEvt()).attach(window,"load");var fnPageShow=jindo.$Fn(_onPageshow,this).attach(window,"pageshow")}function _initDeviceInfo(){_setOsInfo();_setBrowserInfo();var sName=navigator.userAgent;var ar=null;function f(s,h){return((h||"").indexOf(s)>-1)}_htDeviceInfo={iphone:_htOsInfo.iphone,ipad:_htOsInfo.ipad,android:_htOsInfo.android,win:f("Windows Phone",sName),galaxyTab:/SHW-M180/.test(sName),galaxyTab2:/SHW-M380/.test(sName),galaxyS:/SHW-M110/.test(sName),galaxyS2:/SHW-M250|GT-I9100/.test(sName),galaxyS2LTE:/SHV-E110/.test(sName),galaxyS3:/SHV-E210|SHW-M440|GT-I9300/.test(sName),galaxyNote:/SHV-E160/.test(sName),galaxyNote2:/SHV-E250/.test(sName),galaxyNexus:/Galaxy Nexus/.test(sName),optimusLte2:/LG-F160/.test(sName),optimusVu:/LG-F100/.test(sName),optimusLte:/LG-LU6200|LG-SU640|LG-F120K'/.test(sName),galaxyS4:/SHV-E300|GT-I9500|GT-I9505|SGH-M919|SPH-L720|SGH-I337|SCH-I545/.test(sName),bChrome:_htBrowserInfo.chrome,bSBrowser:_htBrowserInfo.bSBrowser,bInapp:false,version:_htOsInfo.version,browserVersion:_htBrowserInfo.version};for(var x in _htDeviceInfo){if(typeof _htDeviceInfo[x]=="boolean"&&_htDeviceInfo[x]&&_htDeviceInfo.hasOwnProperty(x)){if(x[0]!=="b"){_htDeviceInfo.name=x}}}_htDeviceInfo.samsung=/GT-|SCH-|SHV-|SHW-|SPH|SWT-|SGH-|EK-|Galaxy Nexus|SAMSUNG/.test(sName);_htDeviceInfo.lg=/LG-/.test(sName);_htDeviceInfo.pantech=/IM-/.test(sName);if(_htDeviceInfo.iphone||_htDeviceInfo.ipad){if(!f("Safari",sName)){_htDeviceInfo.bInapp=true}}else{if(_htDeviceInfo.android){sName=sName.toLowerCase();if(f("inapp",sName)||f("app",sName.replace("applewebkit",""))){_htDeviceInfo.bInapp=true}}}}function _setOsInfo(){_htOsInfo=jindo.$Agent().os();_isInapp();_htOsInfo.version=_htOsInfo.version||_getOsVersion();_htOsInfo.ios=typeof _htOsInfo.ios=="undefined"?(_htOsInfo.ipad||_htOsInfo.iphone):_htOsInfo.ios}function _setBrowserInfo(){_htBrowserInfo=jindo.$Agent().navigator();if(_htOsInfo.ios&&/CriOS/.test(navigator.userAgent)){_htBrowserInfo.chrome=true}if(typeof _htBrowserInfo.firefox=="undefined"){_htBrowserInfo.firefox=/Firefox/.test(navigator.userAgent)}_isSBrowser();_updateUnderVersion()}function _updateUnderVersion(){if(_htBrowserInfo.msafari&&_htBrowserInfo.chrome){if(_htOsInfo.ios){_htBrowserInfo.version=parseFloat(navigator.userAgent.match(/CriOS[ \/]([0-9.]+)/)[1])}else{_htBrowserInfo.version=parseFloat(navigator.userAgent.match(/Chrome[ \/]([0-9.]+)/)[1])}}else{if(_htBrowserInfo.firefox){_htBrowserInfo.version=parseFloat(navigator.userAgent.match(/Firefox[ \/]([0-9.]+)/)[1])}}}function _isInapp(){var sName=navigator.userAgent;_htOsInfo.bInapp=false;if(_htOsInfo.ios){if(sName.indexOf("Safari")==-1){_htOsInfo.bInapp=true}}else{if(_htOsInfo.android){sName=sName.toLowerCase();if(sName.indexOf("inapp")!=-1||sName.replace("applewebkit","").indexOf("app")!=-1){_htOsInfo.bInapp=true}}}}function _isSBrowser(){_htBrowserInfo.bSBrowser=false;var sUserAgent=navigator.userAgent;var aMatchReturn=sUserAgent.match(/(SAMSUNG|Chrome)/gi)||"";if(aMatchReturn.length>1){_htBrowserInfo.bSBrowser=true}}function _getOsVersion(){if(!_htOsInfo.version){var sName=navigator.userAgent,sVersion="",ar;if(_htOsInfo.iphone||_htOsInfo.ipad){ar=sName.match(/OS\s([\d|\_]+\s)/i);if(ar!==null&&ar.length>1){sVersion=ar[1]}}else{if(_htOsInfo.android){ar=sName.match(/Android\s([^\;]*)/i);if(ar!==null&&ar.length>1){sVersion=ar[1]}}else{if(_htOsInfo.mwin){ar=sName.match(/Windows Phone\s([^\;]*)/i);if(ar!==null&&ar.length>1){sVersion=ar[1]}}}}return sVersion.replace(/\_/g,".").replace(/\s/g,"")}}function _onOrientationChange(we){var self=this;if(we.type==="load"){_nPreWidth=document.documentElement.clientWidth;if(!_htOsInfo.bInapp&&(_htOsInfo.iphone||_htOsInfo.ipad||_getOrientationChangeEvt()!=="resize")){_isVertical=_getVertical()}else{if(_nPreWidth>document.documentElement.clientHeight){_isVertical=false}else{_isVertical=true}}return}if(_getOrientationChangeEvt()==="resize"){setTimeout(function(){_orientationChange(we)},0)}else{var screenWidth=jindo.$Document().clientSize().width;var nTime=300;if(_htDeviceInfo.android){if(we.type=="orientationchange"&&screenWidth==_nPreWidth){setTimeout(function(){_onOrientationChange(we)},500);return false}_nPreWidth=screenWidth}clearTimeout(_nRotateTimer);_nRotateTimer=setTimeout(function(){_orientationChange(we)},nTime)}}function _orientationChange(we){var nPreVertical=_isVertical;_isVertical=_getVertical();if(jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad){if(nPreVertical!==_isVertical){we.sType="rotate";we.isVertical=_isVertical;_fireEvent("mobilerotate",we)}}}function _onPageshow(we){_isVertical=_getVertical();we.sType="pageShow";setTimeout(function(){_fireEvent("mobilePageshow",we)},300)}function _getTranslateOffsetFromCSSMatrix(element){var curTransform=new WebKitCSSMatrix(window.getComputedStyle(element).webkitTransform);return{top:curTransform.m42,left:curTransform.m41}}function _fireEvent(sType,ht){if(_htHandler[sType]){var aData=_htHandler[sType].concat();for(var i=0,len=aData.length;i<len;i++){aData[i].call(this,ht)}}}function _getTranslateOffsetFromStyle(element){var nTop=0,nLeft=0,aTemp=[],aTransValue=[],s=element.style[jindo.m.getCssPrefix()==""?"transform":jindo.m.getCssPrefix()+"Transform"];if(!!s&&s.length>0){if(/translate[XY]/.test(s)){var aTx=s.match(/translateX\(([-0-9px]*)\)/);var aTy=s.match(/translateY\(([-0-9px]*)\)/);aTransValue.push(!!aTx&&aTx.length>1?aTx[1]:"0px");aTransValue.push(!!aTy&&aTy.length>1?aTy[1]:"0px");aTemp[1]=aTransValue.join(",")}else{aTemp=s.match(/translate.{0,2}\((.*)\)/)}if(!!aTemp&&aTemp.length>1){var a=aTemp[1].split(",");if(!!a&&a.length>1){nTop=parseInt(a[1],10);nLeft=parseInt(a[0],10)}}}return{top:nTop,left:nLeft}}var __M__={MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"},KITKAT_HIGHLIGHT_CLASS:"_jmc_no_tap_highlight_",KITKAT_HIGHLIGHT_ID:"_jmc_no_tap_highlight_tag_",sVersion:"unknown",$init:function(){_initDeviceInfo();_initTouchEventName();_attachEvent();var elStyleTag=jindo.$(this.KITKAT_HIGHLIGHT_ID);if(!elStyleTag){elStyleTag=document.createElement("style");var elHTML=document.getElementsByTagName("html")[0];elStyleTag.type="text/css";elStyleTag.id=this.KITKAT_HIGHLIGHT_ID;elHTML.insertBefore(elStyleTag,elHTML.firstChild);var oSheet=elStyleTag.sheet||elStyleTag.styleSheet;oSheet.insertRule("."+this.KITKAT_HIGHLIGHT_CLASS+" { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0);oSheet.insertRule("."+this.KITKAT_HIGHLIGHT_CLASS+" * { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0)}},bindRotate:function(fHandlerToBind){var aHandler=_htHandler.mobilerotate;if(typeof aHandler=="undefined"){aHandler=_htHandler.mobilerotate=[]}aHandler.push(fHandlerToBind)},unbindRotate:function(fHandlerToUnbind){var aHandler=_htHandler.mobilerotate;if(aHandler){for(var i=0,fHandler;(fHandler=aHandler[i]);i++){if(fHandler===fHandlerToUnbind){aHandler.splice(i,1);break}}}},bindPageshow:function(fHandlerToBind){var aHandler=_htHandler.mobilePageshow;if(typeof aHandler=="undefined"){aHandler=_htHandler.mobilePageshow=[]}aHandler.push(fHandlerToBind)},unbindPageshow:function(fHandlerToUnbind){var aHandler=_htHandler.mobilePageshow;if(aHandler){for(var i=0,fHandler;(fHandler=aHandler[i]);i++){if(fHandler===fHandlerToUnbind){aHandler.splice(i,1);break}}}},getDeviceInfo:function(){return _htDeviceInfo},getOsInfo:function(){return _htOsInfo},getBrowserInfo:function(){return _htBrowserInfo},isVertical:function(){if(_isVertical===null){_isVertical=_getVertical();return _isVertical}else{return _isVertical}},getNodeElement:function(el){while(el.nodeType!=1){el=el.parentNode}return el},getTranslateOffset:function(wel){wel=jindo.$Element(wel);var element=wel.$value(),htOffset;if(_htOsInfo.android&&parseInt(_htOsInfo.version,10)===3){htOffset=_getTranslateOffsetFromStyle(element)}else{if("WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix()){htOffset=_getTranslateOffsetFromCSSMatrix(element)}else{htOffset=_getTranslateOffsetFromStyle(element)}}return htOffset},getStyleOffset:function(wel){var nLeft=parseInt(wel.css("left"),10),nTop=parseInt(wel.css("top"),10);nLeft=isNaN(nLeft)?0:nLeft;nTop=isNaN(nTop)?0:nTop;return{left:nLeft,top:nTop}},attachTransitionEnd:function(element,fHandlerToBind){var nVersion=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,"");if(nVersion>230){element._jindo_fn_=jindo.$Fn(fHandlerToBind,this).attach(element,"transitionend")}else{var sEvent=((this.getCssPrefix()==="ms")?"MS":this.getCssPrefix())+"TransitionEnd";element.addEventListener(sEvent,fHandlerToBind,false)}},detachTransitionEnd:function(element,fHandlerToUnbind){var nVersion=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,"");if(nVersion>230){if(element._jindo_fn_){element._jindo_fn_.detach(element,"transitionend");delete element._jindo_fn_}}else{var sEvent=((this.getCssPrefix()==="ms")?"MS":this.getCssPrefix())+"TransitionEnd";element.removeEventListener(sEvent,fHandlerToUnbind,false)}},_attachFakeJindo:function(element,fn,sEvent){var nVersion=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,"");var wfn=null;if(nVersion<230&&(typeof _notSupport!=="undefined")){wfn=_notSupport.$Fn(fn).attach(element,sEvent)}else{wfn=jindo.$Fn(fn).attach(element,sEvent)}return wfn},_getTouchEventName:function(){return _htTouchEventName},getCssPrefix:function(){var sCssPrefix="";if(typeof document.body.style.webkitTransition!=="undefined"){sCssPrefix="webkit"}else{if(typeof document.body.style.transition!=="undefined"){}else{if(typeof document.body.style.MozTransition!=="undefined"){sCssPrefix="Moz"}else{if(typeof document.body.style.OTransition!=="undefined"){sCssPrefix="O"}else{if(typeof document.body.style.msTransition!=="undefined"){sCssPrefix="ms"}}}}}jindo.m.getCssPrefix=function(){return sCssPrefix};return sCssPrefix},getClosest:function(sSelector,elBaseElement){var elClosest;var welBaseElement=jindo.$Element(elBaseElement);var reg=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig;if(reg.test(sSelector)){if("<"+elBaseElement.tagName.toUpperCase()+">"==sSelector.toUpperCase()){elClosest=elBaseElement}else{elClosest=welBaseElement.parent(function(v){if("<"+v.$value().tagName.toUpperCase()+">"==sSelector.toUpperCase()){return v}});elClosest=elClosest.length?elClosest[0].$value():false}}else{if(sSelector.indexOf(".")==0){sSelector=sSelector.substring(1,sSelector.length)}if(welBaseElement.hasClass(sSelector)){elClosest=elBaseElement}else{elClosest=welBaseElement.parent(function(v){if(v.hasClass(sSelector)){return v}});elClosest=elClosest.length?elClosest[0].$value():false}}return elClosest},useCss3d:function(){if(_htAddPatch.useCss3d&&typeof _htAddPatch.useCss3d=="function"){switch(_htAddPatch.useCss3d()){case -1:return false;case 1:return true}}var bRet=false;if(_htBrowserInfo.chrome&&_htBrowserInfo.version<"25"&&!_htBrowserInfo.bSBrowser){return bRet}if(_htOsInfo.ios){bRet=true}else{if(_htBrowserInfo.firefox){bRet=true}else{if(_htOsInfo.android){var s=navigator.userAgent.match(/\(.*\)/);if(s instanceof Array&&s.length>0){s=s[0]}if(_htOsInfo.version>="4.1.0"){if(/EK-GN120|SM-G386F/.test(s)){bRet=false}else{bRet=true}}else{if(_htOsInfo.version>="4.0"){bRet=true}if(_htOsInfo.version>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(s)&&!/SHW-M420|SHW-M200|GT-S7562/.test(s)){bRet=true}}}}}return bRet},patch:function(ver){_htAddPatch.ver=ver;return this},_checkPatchVersion:function(){var aVer=jindo.m.Component.VERSION.split("."),sVer=aVer.slice(0,3).join(".");if(_htAddPatch.ver>=sVer){return true}return false},add:function(htOption){if(this._checkPatchVersion()){for(var i in htOption){_htAddPatch[i]=htOption[i]}}return this},getDeviceName:function(){if(_htAddPatch.getDeviceName&&typeof _htAddPatch.getDeviceName=="function"){if(_htAddPatch.getDeviceName()){return _htAddPatch.getDeviceName()}}var sUserAgent=navigator.userAgent;for(var i in _htDeviceList){if(eval("/"+_htDeviceList[i].join("|")+"/").test(sUserAgent)){return i;break}}var htInfo=jindo.$Agent().os();for(var x in htInfo){if(htInfo[x]===true&&htInfo.hasOwnProperty(x)){return x;break}}},useFixed:function(){if(_htAddPatch.useFixed&&typeof _htAddPatch.useFixed=="function"){switch(_htAddPatch.useFixed()){case -1:return false;case 1:return true}}var isFixed=false;if(_htBrowserInfo.chrome||_htBrowserInfo.firefox||(_htOsInfo.android&&parseInt(_htOsInfo.version,10)>=3)||(_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=5)||(_htOsInfo.mwin&&parseInt(_htOsInfo.version,10)>=8)){isFixed=true}return isFixed},useTimingFunction:function(){if(_htAddPatch.useTimingFunction&&typeof _htAddPatch.useTimingFunction=="function"&&_htAddPatch.useTimingFunction()){switch(_htAddPatch.useTimingFunction()){case -1:return false;case 1:return true}}var bUse=this.useCss3d();if(_htOsInfo.android){bUse=false}else{if(_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=6){bUse=false}}return bUse},_cacheMaxClientSize:{},_fullSizeCheckElement:null,_allEventStop:function(fp,type){if(!this._htEvent){this._htEvent={}}if(type=="detach"){this._htEvent.touchstart.detach(document.body,"touchstart").detach(document.body,"touchmove");this._htEvent={}}else{if(!this._htEvent.touchstart&&type=="attach"){this._htEvent.touchstart=jindo.$Fn(fp,this).attach(document.body,"touchstart").attach(document.body,"touchmove")}}},_stopDefault:function(e){e.stop()},_hasOrientation:window.orientation!==undefined,_maxClientSize:function(fpCallBack,bInit){var _htOsInfo=this.getOsInfo();this._allEventStop(this._stopDefault,"attach");if(!this._fullSizeCheckElement){this._fullSizeCheckElement=document.createElement("div")}var delay=_htOsInfo.android?500:100;delay=bInit?1:delay;var type;if(this._hasOrientation){type=Math.abs(window.orientation/90)%2;delay=this._cacheMaxClientSize[type]!==undefined?0:delay}var that=this;if(document.body.scrollTop<=1){document.body.appendChild(that._fullSizeCheckElement);that._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+parseInt(window.innerHeight+200,10)+"px;";window.scrollTo(0,1);setTimeout(function(){that._checkSize(that._hasOrientation,that._cacheMaxClientSize,type,fpCallBack,that,delay)},delay)}else{this._fullSizeCheckElement.style.height=window.innerHeight+"px";this._checkSize(this._hasOrientation,this._cacheMaxClientSize,type,fpCallBack,that,delay)}},_checkSize:function(hasOrientation,cacheMaxClientSize,type,fpCallBack,that,delay){var _htOsInfo=this.getOsInfo();var _htBrowserInfo=this.getBrowserInfo();this._allEventStop(this._stopDefault,"attach");var size;if(hasOrientation&&cacheMaxClientSize[type]){size=cacheMaxClientSize[type]}else{that._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+window.innerHeight+"px;overflow:hidden";size=_htBrowserInfo.mobile||_htOsInfo.ipad?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};if(hasOrientation){cacheMaxClientSize[type]=size}}fpCallBack.call(that,size);var self=this;this._allEventStop(this._stopDefault,"detach");if(delay===0){this._fullSizeCheckElement.style.height="0px"}else{setTimeout(function(){self._fullSizeCheckElement.style.height="0px"},delay)}},hasOffsetBug:function(){if(_htAddPatch.hasOffsetBug&&typeof _htAddPatch.hasOffsetBug=="function"){switch(_htAddPatch.hasOffsetBug()){case -1:return false;case 1:return true}}var bResult=false;if(_htOsInfo.android){if(_htBrowserInfo.chrome||_htBrowserInfo.firefox){bResult=false}else{if(_htOsInfo.version<"4"){bResult=true}else{bResult=false}}}else{bResult=false}return bResult},hasClickBug:function(){if(_htAddPatch.hasClickBug&&typeof _htAddPatch.hasClickBug=="function"){switch(_htAddPatch.hasClickBug()){case -1:return false;case 1:return true}}return(_htOsInfo.ios||(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0)||false)},_getTranslate:function(sX,sY,bUseCss3d){bUseCss3d=(typeof bUseCss3d=="undefined"?true:bUseCss3d);return"translate"+(bUseCss3d?"3d(":"(")+sX+","+sY+(bUseCss3d?",0)":")")},_toPrefixStr:function(str){if(str.length<=0){return str}str=this.getCssPrefix()==""?str.charAt(0).toLowerCase()+str.substr(1):str.charAt(0).toUpperCase()+str.substr(1);return this.getCssPrefix()+str},_hasJindoOffsetBug:function(){var version=jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION;if(version.replace(/\D/gi,"")>="2100"){return false}else{return true}},_hasKitkatHighlightBug:function(){if(_htAddPatch._hasKitkatHighlightBug&&typeof _htAddPatch._hasKitkatHighlightBug=="function"){switch(_htAddPatch._hasKitkatHighlightBug()){case -1:return false;case 1:return true}}return(_htBrowserInfo.chrome&&!_htBrowserInfo.bSBrowser&&_htBrowserInfo.version<35)}};__M__._isUseFixed=__M__.useFixed;__M__._isUseTimingFunction=__M__.useTimingFunction;__M__._isUseCss3d=__M__.useCss3d;__M__.getCssOffset=__M__.getTranslateOffset;__M__.$init();return __M__})();if(!("mixin" in jindo.$Jindo)){jindo.$Jindo.mixin=function(d,a){var c={};for(var b in d){c[b]=d[b]}for(b in a){if(a.hasOwnProperty(b)&&typeof a[b]!="undefined"){c[b]=a[b]}}return c}}jindo.m.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){this._htEventHandler={};this._htOption={};this._htOption._htSetter={};this.constructor.$count=(this.constructor.$count||0)+1},option:function(e,c){switch(typeof e){case"undefined":var d={};for(var a in this._htOption){if(!(a=="htCustomEventHandler"||a=="_htSetter")){d[a]=this._htOption[a]}}return d;case"string":if(typeof c!="undefined"){if(e=="htCustomEventHandler"){if(typeof this._htOption[e]=="undefined"){this.attach(c)}else{return this}}this._htOption[e]=c;if(typeof this._htOption._htSetter[e]=="function"){this._htOption._htSetter[e](c)}}else{return this._htOption[e]}break;case"object":for(var b in e){if(b=="htCustomEventHandler"){if(typeof this._htOption[b]=="undefined"){this.attach(e[b])}else{continue}}if(b!=="_htSetter"){this._htOption[b]=e[b]}if(typeof this._htOption._htSetter[b]=="function"){this._htOption._htSetter[b](e[b])}}break}return this},optionSetter:function(c,a){switch(typeof c){case"undefined":return this._htOption._htSetter;case"string":if(typeof a!="undefined"){this._htOption._htSetter[c]=jindo.$Fn(a,this).bind()}else{return this._htOption._htSetter[c]}break;case"object":for(var b in c){this._htOption._htSetter[b]=jindo.$Fn(c[b],this).bind()}break}return this},fireEvent:function(b,k){k=k||{};var d=this["on"+b],c=this._htEventHandler[b]||[],h=typeof d=="function",g=c.length>0;if(!h&&!g){return true}c=c.concat();k.sType=b;if(typeof k._aExtend=="undefined"){k._aExtend=[];k.stop=function(){if(k._aExtend.length>0){k._aExtend[k._aExtend.length-1].bCanceled=true}}}k._aExtend.push({sType:b,bCanceled:false});var f=[k],e,j;for(e=2,j=arguments.length;e<j;e++){f.push(arguments[e])}if(h){d.apply(this,f)}if(g){var a;for(e=0,a;(a=c[e]);e++){a.apply(this,f)}}return !k._aExtend.pop().bCanceled},attach:function(c,a){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(d,e){this.attach(e,d)},this).bind());return this}var b=this._htEventHandler[c];if(typeof b=="undefined"){b=this._htEventHandler[c]=[]}b.push(a);return this},detach:function(e,b){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(f,g){this.detach(g,f)},this).bind());return this}var d=this._htEventHandler[e];if(d){for(var a=0,c;(c=d[a]);a++){if(c===b){d=d.splice(a,1);break}}}return this},detachAll:function(c){var b=this._htEventHandler;if(arguments.length){if(typeof b[c]=="undefined"){return this}delete b[c];return this}for(var a in b){delete b[a]}return this}});jindo.m.Component.factory=function(b,f){var c=[],a;if(typeof f=="undefined"){f={}}for(var d=0,e;(e=b[d]);d++){a=new this(e,f);c[c.length]=a}return c};jindo.m.Component.getInstance=function(){throw new Error("JC 1.11.0 or JMC 1.13.0 later, getInstance method of Component is not longer supported.")};jindo.m.Component.VERSION="1.17.1";jindo.m.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false},isActivating:function(){return this._bIsActivating},activate:function(){if(this.isActivating()){return this}this._bIsActivating=true;if(arguments.length>0){this._onActivate.apply(this,arguments)}else{this._onActivate()}return this},deactivate:function(){if(!this.isActivating()){return this}this._bIsActivating=false;if(arguments.length>0){this._onDeactivate.apply(this,arguments)}else{this._onDeactivate()}return this}}).extend(jindo.m.Component);jindo.m.Effect=function(i){if(this instanceof arguments.callee){throw new Error("You can't create a instance of this")}var e=/^(\-?[0-9\.]+)(%|\w+)?$/,a=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,j=/^rgba\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+),\s?([0-9\.]+)\)$/i,f=/^hsl\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%\)$/i,h=/^hsla\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%,\s?([0-9\.]+)\)$/i,c=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,g=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i;var d=function(o){var p=o,n;if(e.test(o)){p=parseFloat(o);n=RegExp.$2||""}else{if(a.test(o)){p={rgb:[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),1]};n="color"}else{if(j.test(o)){p={rgb:[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),parseFloat(RegExp.$4)]};n="color"}else{if(f.test(o)){p={hsl:[parseFloat(RegExp.$1),parseFloat(RegExp.$2)/100,parseFloat(RegExp.$3)/100,1]};p.rgb=m.apply(this,p.hsl);n="color"}else{if(h.test(o)){p={hsl:[parseFloat(RegExp.$1),parseFloat(RegExp.$2)/100,parseFloat(RegExp.$3)/100,parseFloat(RegExp.$4)]};p.rgb=m.apply(this,p.hsl);n="color"}else{if(c.test(o=o.replace(g,"#$1$1$2$2$3$3"))){p={rgb:[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),1]};n="color"}else{throw new Error("unit error ("+o+")")}}}}}}return{nValue:p,sUnit:n}};var l=function(n){var o=[];n.replace(/([^\s]+\([^\)]*\)|[^\s]+)\s?/g,function(q,p){o.push(p)});return o};var k=function(n){var o=l(n?n+"":"0");var q=[];for(var p=0,r=o.length;p<r;p++){q.push(d(o[p]))}return q};var b=function(n){if(typeof n==="object"){return{nValue:n.nValue,sUnit:n.sUnit}}return n};var m=function(v,t,u,r){v=(v%360)/60;var n=(1-Math.abs((2*u)-1))*t;var o=n*(1-Math.abs((v%2)-1));var s=0,p=0,w=0;if(v>=5||v<1){s=n;w=o}else{if(v>=4){s=o;w=n}else{if(v>=3){p=o;w=n}else{if(v>=2){p=n;w=o}else{if(v>=1){s=o;p=n}}}}}var q=u-(n/2);return[Math.round((s+q)*255),Math.round((p+q)*255),Math.round((w+q)*255),r]};return function(n,q){var s,p;var o=function(){var t=false;if(r.start!==n){s=k(r.start);n=r.start;t=true}if(r.end!==q){p=k(r.end);q=r.end;t=true}if(t){var x=Math.max(s.length,p.length);var w,v;if(s.length!==p.length&&x>1){switch(s.length){case 1:s[1]=b(s[0]);case 2:s[2]=b(s[0]);case 3:s[3]=b(s[1]);break}switch(p.length){case 1:p[1]=b(p[0]);case 2:p[2]=b(p[0]);case 3:p[3]=b(p[1]);break}}for(var u=0;u<x;u++){w=s[u];v=p[u];if(w.nValue===0){w.sUnit=v.sUnit}else{if(v.nValue===0){v.sUnit=w.sUnit}}if(w.sUnit!=v.sUnit){throw new Error("unit error ("+n+" ~ "+q+")")}}}};var r=function(B){var D=[];o();var u,t;var L,I,E;var v;for(var F=0,y=Math.max(s.length,p.length);F<y;F++){u=s[F];t=p[F];L=u.nValue;I=t.nValue;E=u.sUnit;var x=i(B),w=function(N,O,M){return Math.round(((O-N)*x+N)*1000000)/1000000+(M||0)};if(E!=="color"){D.push(w(L,I,E));continue}if(L.hsl&&I.hsl){L=L.hsl;I=I.hsl;var G=Math.round(w(L[0],I[0]));var z=Math.max(0,Math.min(1,w(L[1],I[1])))*100;var C=Math.max(0,Math.min(1,w(L[2],I[2])))*100;v=w(L[3],I[3]);if(v===1){D.push("hsl("+[G,z+"%",C+"%"].join(",")+")")}else{D.push("hsla("+[G,z+"%",C+"%",v].join(",")+")")}}else{L=L.rgb;I=I.rgb;var A=Math.max(0,Math.min(255,Math.round(w(L[0],I[0]))));var H=Math.max(0,Math.min(255,Math.round(w(L[1],I[1]))));var J=Math.max(0,Math.min(255,Math.round(w(L[2],I[2]))));v=w(L[3],I[3]);if(v===1){var K=((A<<16)|(H<<8)|J).toString(16).toUpperCase();D.push("#"+Array(7-K.length).join("0")+K)}else{D.push("rgba("+[A,H,J,v].join(",")+")")}}}return D.join(" ")};switch(arguments.length){case 0:break;case 1:q=n||"0";n="0";r.setStart=function(t){this.start=t};break}r.start=n;r.end=q;r.effectConstructor=arguments.callee;n=q=null;if(arguments.length>1){o()}return r}};jindo.m.Effect.linear=jindo.m.Effect(function(a){return a});jindo.m.Effect.linear.toString=function(){return"linear"};jindo.m.Effect.easeInSine=jindo.m.Effect(function(a){return(a==1)?1:-Math.cos(a*(Math.PI/2))+1});jindo.m.Effect.easeOutSine=jindo.m.Effect(function(a){return Math.sin(a*(Math.PI/2))});jindo.m.Effect.easeInOutSine=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeInSine(0,1)(2*a)*0.5:jindo.m.Effect.easeOutSine(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeOutInSine=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeOutSine(0,1)(2*a)*0.5:jindo.m.Effect.easeInSine(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeInQuad=jindo.m.Effect(function(a){return a*a});jindo.m.Effect.easeOutQuad=jindo.m.Effect(function(a){return -(a*(a-2))});jindo.m.Effect.easeInOutQuad=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeInQuad(0,1)(2*a)*0.5:jindo.m.Effect.easeOutQuad(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeOutInQuad=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeOutQuad(0,1)(2*a)*0.5:jindo.m.Effect.easeInQuad(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeInCubic=jindo.m.Effect(function(a){return Math.pow(a,3)});jindo.m.Effect.easeOutCubic=jindo.m.Effect(function(a){return Math.pow((a-1),3)+1});jindo.m.Effect.easeInOutCubic=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeIn(0,1)(2*a)*0.5:jindo.m.Effect.easeOut(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeOutInCubic=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeOut(0,1)(2*a)*0.5:jindo.m.Effect.easeIn(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeInQuart=jindo.m.Effect(function(a){return Math.pow(a,4)});jindo.m.Effect.easeOutQuart=jindo.m.Effect(function(a){return -(Math.pow(a-1,4)-1)});jindo.m.Effect.easeInOutQuart=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeInQuart(0,1)(2*a)*0.5:jindo.m.Effect.easeOutQuart(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeOutInQuart=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeOutQuart(0,1)(2*a)*0.5:jindo.m.Effect.easeInQuart(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeInQuint=jindo.m.Effect(function(a){return Math.pow(a,5)});jindo.m.Effect.easeOutQuint=jindo.m.Effect(function(a){return Math.pow(a-1,5)+1});jindo.m.Effect.easeInOutQuint=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeInQuint(0,1)(2*a)*0.5:jindo.m.Effect.easeOutQuint(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeOutInQuint=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeOutQuint(0,1)(2*a)*0.5:jindo.m.Effect.easeInQuint(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeInCircle=jindo.m.Effect(function(a){return -(Math.sqrt(1-(a*a))-1)});jindo.m.Effect.easeOutCircle=jindo.m.Effect(function(a){return Math.sqrt(1-(a-1)*(a-1))});jindo.m.Effect.easeInOutCircle=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeInCircle(0,1)(2*a)*0.5:jindo.m.Effect.easeOutCircle(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeOutInCircle=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeOutCircle(0,1)(2*a)*0.5:jindo.m.Effect.easeInCircle(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeInBack=jindo.m.Effect(function(a){var b=1.70158;return(a==1)?1:(a/1)*(a/1)*((1+b)*a-b)});jindo.m.Effect.easeOutBack=jindo.m.Effect(function(a){var b=1.70158;return(a===0)?0:(a=a/1-1)*a*((b+1)*a+b)+1});jindo.m.Effect.easeInOutBack=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeInBack(0,1)(2*a)*0.5:jindo.m.Effect.easeOutBack(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeInElastic=jindo.m.Effect(function(c){var d=0,b=0,e;if(c===0){return 0}if((c/=1)==1){return 1}if(!d){d=0.3}if(!b||b<1){b=1;e=d/4}else{e=d/(2*Math.PI)*Math.asin(1/b)}return -(b*Math.pow(2,10*(c-=1))*Math.sin((c-1)*(2*Math.PI)/d))});jindo.m.Effect.easeOutElastic=jindo.m.Effect(function(c){var d=0,b=0,e;if(c===0){return 0}if((c/=1)==1){return 1}if(!d){d=0.3}if(!b||b<1){b=1;e=d/4}else{e=d/(2*Math.PI)*Math.asin(1/b)}return(b*Math.pow(2,-10*c)*Math.sin((c-e)*(2*Math.PI)/d)+1)});jindo.m.Effect.easeInOutElastic=jindo.m.Effect(function(c){var d=0,b=0,e;if(c===0){return 0}if((c=c/(1/2))==2){return 1}if(!d){d=(0.3*1.5)}if(!b||b<1){b=1;e=d/4}else{e=d/(2*Math.PI)*Math.asin(1/b)}if(c<1){return -0.5*(b*Math.pow(2,10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/d))}return b*Math.pow(2,-10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/d)*0.5+1});jindo.m.Effect.easeOutBounce=jindo.m.Effect(function(a){if(a<(1/2.75)){return(7.5625*a*a)}else{if(a<(2/2.75)){return(7.5625*(a-=(1.5/2.75))*a+0.75)}else{if(a<(2.5/2.75)){return(7.5625*(a-=(2.25/2.75))*a+0.9375)}else{return(7.5625*(a-=(2.625/2.75))*a+0.984375)}}}});jindo.m.Effect.easeInBounce=jindo.m.Effect(function(a){return 1-jindo.m.Effect.easeOutBounce(0,1)(1-a)});jindo.m.Effect.easeInOutBounce=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeInBounce(0,1)(2*a)*0.5:jindo.m.Effect.easeOutBounce(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeInExpo=jindo.m.Effect(function(a){return(a===0)?0:Math.pow(2,10*(a-1))});jindo.m.Effect.easeOutExpo=jindo.m.Effect(function(a){return(a==1)?1:-Math.pow(2,-10*a/1)+1});jindo.m.Effect.easeInOutExpo=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeInExpo(0,1)(2*a)*0.5:jindo.m.Effect.easeOutExpo(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect.easeOutInExpo=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.easeOutExpo(0,1)(2*a)*0.5:jindo.m.Effect.easeInExpo(0,1)((2*a)-1)*0.5+0.5});jindo.m.Effect._cubicBezier=function(b,d,a,c){return function(n){var k=3*b,m=3*(a-b)-k,e=1-k-m,j=3*d,l=3*(c-d)-j,o=1-j-l;function i(p){return((e*p+m)*p+k)*p}function h(p){return((o*p+l)*p+j)*p}function f(p){return(3*e*p+2*m)*p+k}function g(p,w){var v,u,s,q,t,r;for(s=p,r=0;r<8;r++){q=i(s)-p;if(Math.abs(q)<w){return s}t=f(s);if(Math.abs(t)<0.000001){break}s=s-q/t}v=0;u=1;s=p;if(s<v){return v}if(s>u){return u}while(v<u){q=i(s);if(Math.abs(q-p)<w){return s}if(p>q){v=s}else{u=s}s=(u-v)*0.5+v}return s}return h(g(n,1/200))}};jindo.m.Effect.cubicBezier=function(b,e,a,c){var g=jindo.m.Effect(jindo.m.Effect._cubicBezier(b,e,a,c));var d="cubic-bezier("+[b,e,a,c].join(",")+")";g.toString=function(){return d};return g};jindo.m.Effect.cubicEase=jindo.m.Effect.cubicBezier(0.25,0.1,0.25,1);jindo.m.Effect.cubicEase.toString=function(){return"ease"};jindo.m.Effect.cubicEaseIn=jindo.m.Effect.cubicBezier(0.42,0,1,1);jindo.m.Effect.cubicEaseIn.toString=function(){return"ease-in"};jindo.m.Effect.cubicEaseOut=jindo.m.Effect.cubicBezier(0,0,0.58,1);jindo.m.Effect.cubicEaseOut.toString=function(){return"ease-out"};jindo.m.Effect.cubicEaseInOut=jindo.m.Effect.cubicBezier(0.42,0,0.58,1);jindo.m.Effect.cubicEaseInOut.toString=function(){return"ease-in-out"};jindo.m.Effect.cubicEaseOutIn=jindo.m.Effect.cubicBezier(0,0.42,1,0.58);jindo.m.Effect.overphase=jindo.m.Effect(function(a){a/=0.652785;return(Math.sqrt((2-a)*a)+(0.1*a)).toFixed(5)});jindo.m.Effect.sinusoidal=jindo.m.Effect(function(a){return(-Math.cos(a*Math.PI)/2)+0.5});jindo.m.Effect.mirror=jindo.m.Effect(function(a){return(a<0.5)?jindo.m.Effect.sinusoidal(0,1)(a*2):jindo.m.Effect.sinusoidal(0,1)(1-(a-0.5)*2)});jindo.m.Effect.pulse=function(a){return jindo.m.Effect(function(b){return(-Math.cos((b*(a-0.5)*2)*Math.PI)/2)+0.5})};jindo.m.Effect.wave=function(b,a){return jindo.m.Effect(function(c){return(a||1)*(Math.sin(b*(c*360)*Math.PI/180)).toFixed(5)})};jindo.m.Effect.stepStart=jindo.m.Effect(function(a){return a===0?0:1});jindo.m.Effect.stepEnd=jindo.m.Effect(function(a){return a===1?1:0});jindo.m.Effect.easeIn=jindo.m.Effect.easeInCubic;jindo.m.Effect.easeOut=jindo.m.Effect.easeOutCubic;jindo.m.Effect.easeInOut=jindo.m.Effect.easeInOutCubic;jindo.m.Effect.easeOutIn=jindo.m.Effect.easeOutInCubic;jindo.m.Effect.bounce=jindo.m.Effect.easeOutBounce;jindo.m.Effect.elastic=jindo.m.Effect.easeInElastic;jindo.m.Morph=jindo.$Class({$init:function(c){this.option({fEffect:jindo.m.Effect.linear,bUseTransition:true}).option(c);var b=document.body.style;this._bTransitionSupport=("transition" in b||"webkitTransition" in b||"MozTransition" in b||"OTransition" in b||"msTransition" in b);var a=jindo.$Agent();var e=a.os();var d=a.navigator();this._bHasTransformRenderBug=e.ios&&parseInt(e.version,10)===5&&d.msafari;this._aQueue=[];this._aIngItem=null;this._oRAF=null;this._bPlaying=null;this._nPtr=0;this._nPausePassed=0;this._aRepeat=[];this._sTransitionEnd=(("webkitTransition" in b&&"webkitTransitionEnd")||("transition" in b&&"transitionend")||("MozTransition" in b&&"transitionend")||("OTransition" in b&&"oTransitionEnd")||("msTransition" in b&&"MSTransitionEnd"))},pushAnimate:function(b,a){if(a&&!(a instanceof Array)){throw Error("aLists should be a instance of Array")}a=[].concat(a);a.duration=b;this._aQueue.push(a);return this},pushKeyframe:function(b,a){this._aQueue.push({action:"keyframe",args:{duration:b,keyframe:a}});return this},pushWait:function(e){var a;for(var b=0,d=arguments.length;b<d;b++){var c=arguments[b];if(c instanceof this.constructor){this._aQueue.push(c)}else{this.pushAnimate(c,[])}}return this},pushCall:function(a){this._aQueue.push(a);return this},pushRepeatStart:function(b){if(typeof b==="undefined"){b=1}var a="L"+Math.round(new Date().getTime()*Math.random());this._aRepeat.push(a);this._pushLabel(a,b);return this},_pushLabel:function(b,a){if(typeof a==="undefined"){a=Infinity}this._aQueue.push({action:"label",args:{label:b,times:a,loops:0}});return this},pushRepeatEnd:function(){var a=this;var b=this._aRepeat.pop();this._aQueue.push({action:"goto",args:{label:b}});return this},_waitMorph:function(b){var a=this;if(!b.isPlaying()){return true}var c=function(){b.detach("end",c).detach("pause",c);a._flushQueue()};b.attach("end",c).attach("pause",c);return false},_getLabelIndex:function(c){var a=null;for(var b=0,d=this._aQueue.length;b<d;b++){a=this._aQueue[b];if(a.action==="label"&&a.args.label===c){return b}}return -1},_getRepeatEndIndex:function(c,e){var a=null;for(var b=e||0,d=this._aQueue.length;b<d;b++){a=this._aQueue[b];if(a.action==="goto"&&a.args.label===c){return b}}return -1},_flushQueue:function(){var c,g;var j=this;var d,e,f;do{c=false;g=this._aIngItem=this._aQueue[this._nPtr];if(!g){this._bPlaying=false;if(!g){this.fireEvent("end")}return}this._nPtr++;if(g instanceof Function){g.call(this);c=true;continue}else{if(g instanceof this.constructor){c=this._waitMorph(g);continue}else{if(typeof g==="number"){setTimeout(function(){j._flushQueue()},g);continue}else{if(g.action==="label"){if(++g.args.loops>g.args.times){var a=this._getRepeatEndIndex(g.args.label,this._nPtr);g.args.loops=0;if(a>-1){this._goto(a+1)}}c=true;continue}else{if(g.action==="goto"){this._goto(g.args.label);c=true;continue}else{if(g.action==="keyframe"){d=g.args.keyframe;e=this._nPausePassed;f=this._aCompiledItem=g.args;c=f.duration<0;if(c){this._processKeyframe(1,d);continue}this._playKeyframe(e,d);this._nPausePassed=0;continue}}}}}}f=this._aCompiledItem;e=this._nPausePassed;if(!e){f=this._aCompiledItem=this._compileItem(g)}else{for(var b=0,h=f.length;b<h;b++){f[b].sTimingFunc=""}f.allCSS=false}if(f.length===0){setTimeout(function(){j._flushQueue()},f.duration);continue}c=f.duration<0;if(c){this._processItem(1,true);continue}this._playAnimate(e);this._nPausePassed=0}while(c)},_playKeyframe:function(c,e){var d=this;this._nStart=new Date().getTime()-c;var a=this._aCompiledItem;var f=a.duration;(function b(){d._oRAF=d._requestAnimationFrame(function(){var g=d._nStart;if(d._oRAF===null){return}d._oRAF=null;var h=Math.min(1,Math.max(0,(new Date().getTime()-g)/f));e.frame(h);if(h<1){b()}else{d.fireEvent("timerEnd");d._flushQueue()}})})()},_processKeyframe:function(a,b){b.preprocess().frame(a)},_playAnimate:function(b){var c=this;this._nStart=new Date().getTime()-b;this._nIng=2;if(!b){this._processItem(0,true,3,true)}var a=this._aCompiledItem;if(a.allCSS){this._nIng--}else{this._animationLoop(true)}(function(){var g=c._processItem(1,true,1).transitionCache;if(!g||a.duration===0){if(--c._nIng===0){c._flushQueue()}return}var h=g.length;var f=h?g[0]:null;var e=function(k){var l;var j=[];while(l=g.pop()){l.css(c._getCSSKey("transitionDuration"),"0.0001ms");j.push(l)}g=null;(window.requestAnimationFrame||window.setTimeout)(function(){while(l=j.pop()){l.css(c._getCSSKey("transitionDuration"),"0");l.css(c._getCSSKey("transitionProperty"),"none")}j=null},0);c.fireEvent("transitionEnd");if(--c._nIng===0&&!k){c._requestAnimationFrame(function(){c._flushQueue()})}};if(!f){e();return}var d=f.$value();var i=function(j){d.removeEventListener(c._sTransitionEnd,c._fpOnTransitionEnd,true);c._fpOnTransitionEnd=null;e(j===true)};c._fpOnTransitionEnd=function(j){i(j)};d.addEventListener(c._sTransitionEnd,c._fpOnTransitionEnd,true)})()},_animationLoop:function(b){var a=this;this._oRAF=this._requestAnimationFrame(function(){var c=a._nStart;var e=a._aCompiledItem.duration;if(a._oRAF===null){return}a._oRAF=null;var d=Math.min(1,Math.max(0,(new Date().getTime()-c)/e));a._processItem(d,b,2);if(d<1){a._animationLoop()}else{a.fireEvent("timerEnd");if(--a._nIng===0){a._flushQueue()}}})},_processItem:function(d,m,h,q){var w={normalPropsToPause:[],transitionCache:[]};var o=w.normalPropsToPause;var f=w.transitionCache;var s=this;var j=this._aCompiledItem;var p=j.duration;if(p===0){p=1}else{if(p<0){p=0}}var l,x,c;var g,k;var t;var v=this._bHasTransformRenderBug;h=h||(1|2);if(!this.fireEvent("beforeProgress",{nRate:d})){return}var a=[],e;for(var u=0,r;r=j[u];u++){l=r.oObj;x=r.welObj;c=r.oProps;var b=r.sTimingFunc;if(b&&(h&1)){x&&x.$value().clientHeight;if(!("@transition" in c)&&!q){if(!("@transitionProperty" in c)){x.css(this._getCSSKey("transitionProperty"),"all")}if(!("@transitionDuration" in c)){x.css(this._getCSSKey("transitionDuration"),(p/1000).toFixed(3)+"s")}if(!("@transitionTimingFunction" in c)){x.css(this._getCSSKey("transitionTimingFunction"),b)}}f.push(x)}e={};a.push(l,e);if(q&&d===1&&"@transform" in c&&/AppleWebKit\/534\.30/.test(navigator.userAgent)){x.css(this._getCSSKey("transform"),"");l.clientHeight}for(var n in c){if(c.hasOwnProperty(n)){g=c[n];t=/^@(.*)$/.test(n)&&RegExp.$1;k=b&&t?1:2;if(!(h&k)){continue}if(typeof g==="function"){g=g(d)}else{if(!m){continue}}if(t){if(/transition/.test(n)){g=this._getCSSVal(g)}if(v&&"@transform"===n&&("@left" in c||"@top" in c)){l.clientHeight}x.css(this._getCSSKey(t),g)}else{if(q){o.push([l,n,g])}else{l[n]=g}}e[n]=g}}}this.fireEvent("progress",{aLists:a,nRate:d});return w},_compileItem:function(y){var d=y.length==0;var q=[];q.duration=y.duration;var g,t,b;var u,m;var x;var v,n;var p=this.option("fEffect");for(var r=0,l=y.length;r<l;r+=2){var h,a=null;g=y[r];t=jindo.$Element(g);b=y[r+1];x={};var j=false;for(var k in b){if(b.hasOwnProperty(k)){var w,c;m=b[k];v=/^@(.*)$/.test(k);n=RegExp.$1;if(m instanceof Array){u=m[0];m=m[1]}else{if(v){u=t.css(this._getCSSKey(n))}else{u=g[k]}}u=(u===0?u:u||"");w=typeof m==="function"?m.effectConstructor:p;c=this._getEffectCSS(w)||"";if(/^@transform$/.test(k)){if(typeof m==="function"){m=m.end}x[k]=this._getTransformFunction(u,m,w,g);if(jindo.m){var o=jindo.m.getOsInfo();if(/matrix/.test(u)||/matrix/.test(m)){if(o.android&&parseFloat(o.version)<3){c=""}}}}else{if(typeof m==="function"){if("setStart" in m){m.setStart(u)}x[k]=m}else{try{x[k]=w(u,m)}catch(s){if(!/^unit error/.test(s.message)){throw s}x[k]=m}}}var f=x[k];if(typeof f==="function"&&f(0)===f(1)){delete x[k];continue}if(v){if(a===null){a=c}else{if(a!==c){a=""}}}else{c=""}d=d||!c;j=true}}if(!t.visible()){a=null,d=true}j&&q.push({oObj:g,welObj:t,oProps:x,sTimingFunc:a})}q.allCSS=!d;return q},play:function(){if(!this._bPlaying){this._bPlaying=true;this.fireEvent("play");this._flushQueue()}return this},reset:function(){return this._goto(0)},pause:function(c){if(!this._bPlaying){return this}this._cancelAnimationFrame(this._oRAF);this._oRAF=null;var b=this._aCompiledItem;var h=b.duration;if(typeof c==="undefined"){var a=new Date().getTime()-this._nStart;c=a/h}c=Math.max(0,Math.min(1,c));var f=null;if(b.keyframe){this._processKeyframe(c,b.keyframe)}else{f=this._processItem(c,true,3,true).normalPropsToPause}this._nPtr--;this._nPausePassed=Math.round(h*c);if(this._fpOnTransitionEnd){this._fpOnTransitionEnd(true)}if(f){for(var e=0,g=f.length;e<g;e++){var d=f[e];d[0][d[1]]=d[2]}}this._bPlaying=false;this.fireEvent("pause");return this},_goto:function(a){var b=a;if(typeof a==="number"){a=a||0}else{a=this._getLabelIndex(b);if(a===-1){throw"Label not found"}}this._nPtr=a;this._nPausePassed=0;return this},isPlaying:function(){return this._bPlaying||false},clear:function(){this._aQueue.length=0;this._aRepeat.length=0;this._nPtr=0;this._nPausePassed=0;return this},_getPointer:function(){return this._nPtr},_getEffectCSS:function(a){var b=this.option("bUseTransition")&&this._bTransitionSupport;if(!b){return null}if((this._htEventHandler.progress&&this._htEventHandler.progress.length)||(this._htEventHandler.beforeProgress&&this._htEventHandler.beforeProgress.length)){return null}if(a.hasOwnProperty("toString")){return a.toString()}switch(a){case jindo.m.Effect.linear:return"linear";break;case jindo.m.Effect.cubicEase:return"ease";break;case jindo.m.Effect.cubicEaseIn:return"ease-in";break;case jindo.m.Effect.cubicEaseOut:return"ease-out";break;case jindo.m.Effect.cubicEaseInOut:return"ease-in-out";break;default:if(a.cubicBezier&&Math.max.apply(Math,a.cubicBezier)<=1&&Math.min.apply(Math,a.cubicBezier)>=0){return"cubic-bezier("+a.cubicBezier.join(",")+")"}break}return null},_requestAnimationFrame:function(d){var b;var a=this;var c=function(){if(b===a._oLastRAF){a._oLastRAF=null;d()}};if(window.requestAnimationFrame){b=requestAnimationFrame(c)}else{b=setTimeout(c,1000/60)}return(this._oLastRAF=b)},_cancelAnimationFrame:function(b){var a;if(window.cancelAnimationFrame){a=cancelAnimationFrame(b)}else{a=clearTimeout(b)}this._oLastRAF=null;return a},_oProperPrefix:{},_getProperPrefix:function(a){var h=this._oProperPrefix;if(a in h){return h[a]}var g=document.body.style;var e=["webkit","","Moz","O","ms"];var b,d;var c=function(i){return i.toUpperCase()};for(var f=0,j=e.length;f<j;f++){b=e[f];d=b+(b?a.replace(/^[a-z]/,c):a);if(d in g){return(h[a]=b)}}return(h[a]="")},_getCSSKey:function(d){var c=this;var b="";var a=d.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(e,f,g,h){b=g||c._getProperPrefix(h);if(b){h=h.replace(/^[a-z]/,function(i){return i.toUpperCase()})}return h}).replace(/\-(\w)/g,function(e,f){return f.toUpperCase()});return(({o:"O",moz:"Moz",webkit:"Webkit"})[b]||b)+a},_getCSSVal:function(c){var b=this;var a=c.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(e,g,f,d,h){d=d||b._getProperPrefix(h);return g+(d&&"-"+d+"-")+h});return a},_getMatrixObj:function(j,k){j=j.replace(/\b(translate(3d)?)\(\s*([^,]+)\s*,\s*([^,\)]+)/g,function(r,p,q,o,s){if(/%$/.test(o)){o=parseFloat(o)/100*k.offsetWidth+"px"}if(/%$/.test(s)){s=parseFloat(s)/100*k.offsetHeight+"px"}return p+"("+o+","+s}).replace(/\b(translate([XY]))\(\s*([^\)]+)/g,function(o,p,q,r){if(q==="X"&&/%$/.test(r)){r=parseFloat(r)/100*k.offsetWidth+"px"}else{if(q==="Y"&&/%$/.test(r)){r=parseFloat(r)/100*k.offsetHeight+"px"}}return p+"("+r});var h;var c=window.WebKitCSSMatrix||window.MSCSSMatrix||window.OCSSMatrix||window.MozCSSMatrix||window.CSSMatrix;if(c){h=function(o){return new c(o).toString()}}else{var m="M"+Math.round(new Date().getTime()*Math.random());var e=jindo.$Agent().navigator();var a=e.firefox?"moz":(e.ie?"ms":"o");var d="-"+a+"-transform";var l=document.createElement("style");l.type="text/css";var n=document.getElementsByTagName("html")[0];n.insertBefore(l,n.firstChild);var g=l.sheet||l.styleSheet;var b=document.createElement("div");b.id=m;var i=window.getComputedStyle(b,null);h=function(p){var o=null;g.insertRule("#"+m+" { "+d+": "+p+" !important; }",0);document.body.insertBefore(b,document.body.firstChild);o=i.getPropertyValue(d);document.body.removeChild(b);g.deleteRule(0);return o}}var f=h(j);if(/^([^\(]+)\(([^\)]*)\)$/.test(f)){return{key:RegExp.$1,val:RegExp.$2.replace(/\s*,\s*/g," ")}}return{key:"matrix",val:"1 0 0 1 0 0"}},_convertMatrix3d:function(b){if(b.key==="matrix3d"){return b}var a=b.val.split(" ");b.key="matrix3d";a.splice(2,0,"0");a.splice(3,0,"0");a.splice(6,0,"0");a.splice(7,0,"0");a.splice(8,0,"0");a.splice(9,0,"0");a.splice(10,0,"1");a.splice(11,0,"0");a.splice(14,0,"0");a.splice(15,0,"1");b.val=a.join(" ");return b},_parseTransformText:function(a){a=a||"";var b={};a.replace(/([\w\-]+)\(([^\)]*)\)/g,function(e,f,d){var c=d.split(/\s*,\s*/);switch(f){case"translate3d":case"scale3d":case"skew3d":f=f.replace(/3d$/,"");b[f+"Z"]=c[2];case"translate":case"scale":case"skew":b[f+"X"]=c[0];if(typeof c[1]==="undefined"){if(f==="scale"){b[f+"Y"]=c[0]}}else{b[f+"Y"]=c[1]}break;default:b[f]=c.join(",");break}});return b},_getTransformFunction:function(a,c,g,f){var i;var d,e;if(/matrix/.test(a+c)){d=this._getMatrixObj(a,f);e=this._getMatrixObj(c,f);if(d.key!==e.key){d=this._convertMatrix3d(d);e=this._convertMatrix3d(e)}g=g(d.val,e.val);return function(j){return j===1?c:d.key+"("+g(j).replace(/ /g,",")+")"}}d=this._parseTransformText(a);e=this._parseTransformText(c);var h={};for(i in d){if(d.hasOwnProperty(i)){h[i]=g(d[i],e[i]||(/^scale/.test(i)?1:0))}}for(i in e){if(e.hasOwnProperty(i)&&!(i in d)){h[i]=g(d[i]||(/^scale/.test(i)?1:0),e[i])}}var b=function(j){var k=[];for(var l in h){if(h.hasOwnProperty(l)){k.push(l+"("+h[l](j)+")")}}return k.join(" ")};return b}}).extend(jindo.m.Component);jindo.m.Animation=jindo.$Class({$init:function(a){this.option({bUseH:true,bHasOffsetBug:false,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction()});this.option(a||{});this._initVar()},_initVar:function(a){this.sCssPrefix=jindo.m.getCssPrefix();this._htTans=this.option("bUseCss3d")?{open:"3d(",end:",0)"}:{open:"(",end:")"};this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect"),bUseTransition:this.option("bUseTimingFunction")}).attach({end:jindo.$Fn(function(b){this._oMorph.clear();this.fireEvent("end",b)},this).bind()});this._welTarget=null},setStyle:function(){},move:function(d,b,c,a){},getTarget:function(a){if(a){return this._welTarget}else{return this._welTarget.$value()}},p:function(a){return jindo.m._toPrefixStr(a)},getTranslate:function(b,a){return"translate"+this._htTans.open+b+","+a+this._htTans.end},toCss:function(b){var e,d,c,a={};for(e in b){d=e;if(/^@/.test(e)){e.match(/^(@\w)/);c=RegExp.$1;if(/transition|transform/.test(d)){if(this.sCssPrefix==""){d=e.replace(c,c.toLowerCase())}else{d=e.replace(c,c.toUpperCase())}d=d.replace("@",this.sCssPrefix)}else{d=d.replace("@","")}}a[d]=b[e]}return a},isPlaying:function(){return this._oMorph.isPlaying()},stop:function(a){if(typeof a==="undefined"){a=0}this._oMorph.pause(a).clear()},destroy:function(){this._oMorph.detachAll("end")}}).extend(jindo.m.UIComponent);jindo.m.Touch=jindo.$Class({$init:function(b,a){this._el=jindo.$Element(b).$value();var c={nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1000,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:0.1,nRotateThreshold:5,bActivateOnload:true,bUseAutoDirection:false,nUseDiagonal:0,bVertical:true,bHorizental:false};this.option(c);this.option(a||{});if(this.option("nUseDiagonal")>0){this.option({bVertical:true,bHorizental:true})}this._initVariable();this._initTouchEventName();this._initPreventSystemEvent();this._setSlope();if(this.option("bActivateOnload")){this.activate()}},$static:{MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"}},_initTouchEventName:function(){if("ontouchstart" in window){this._htEventName.start="touchstart";this._htEventName.move="touchmove";this._htEventName.end="touchend";this._htEventName.cancel="touchcancel";this._hasTouchEvent=true}else{if(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0){this._htEventName.start="MSPointerDown";this._htEventName.move="MSPointerMove";this._htEventName.end="MSPointerUp";this._htEventName.cancel="MSPointerCancel";this._hasTouchEvent=false}}},_initPreventSystemEvent:function(){if(this._el.style&&typeof this._el.style.msTouchAction!="undefined"){var a="none";if(this.option("bHorizental")&&!this.option("bVertical")){a="pan-x"}if(this.option("bVertical")&&!this.option("bHorizental")){a="pan-y"}this._el.style.msTouchAction=a}},_initVariable:function(){this._htEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null};this._hasTouchEvent=false;this._radianToDegree=180/Math.PI;this._htMoveInfo={nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0,nBeforeScale:0,aPos:[]};this.htEndInfo={nX:0,nY:0};this.nStart=0;this.bMove=false;this.nMoveType=-1;this._nStartMoveType=-1;this._nVSlope=0;this._nHSlope=0;this.bSetSlope=false;this._nTouchEndTimer=null},_attachEvents:function(){this._htEvent={};var b=this._hasTouchEvent;this._htEvent[this._htEventName.start]={fn:jindo.$Fn(this._onStart,this).bind(),el:this._el};this._htEvent[this._htEventName.move]={fn:jindo.$Fn(this._onMove,this).bind(),el:this._el};this._htEvent[this._htEventName.end]={fn:jindo.$Fn(this._onEnd,this).bind(),el:this._el};this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind();jindo.m.bindRotate(this._htEvent.rotate);if(this._htEventName.cancel){this._htEvent[this._htEventName.cancel]={fn:jindo.$Fn(this._onCancel,this).bind(),el:this._el}}for(var a in this._htEvent){if(this._htEvent[a].fn){this._htEvent[a].ref=this._attachFakeJindo(this._htEvent[a].el,this._htEvent[a].fn,a)}}},_attachFakeJindo:function(c,d,e){var a=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,"");var b=null;if(a<230&&(typeof _notSupport!=="undefined")){b=_notSupport.$Fn(d).attach(c,e)}else{b=jindo.$Fn(d).attach(c,e)}return b},_detachEvents:function(){for(var b in this._htEvent){var a=this._htEvent[b];if(a.ref){a.ref.detach(a.el,b)}}jindo.m.unbindRotate(this._htEvent.rotate);this._htEvent=null},_onCancel:function(a){this._onEnd(a)},_onStart:function(a){var b=this._getTouchInfo(a);this.nStart=b.length;if(b.length>1){return}else{if(this.bMove){this._resetTouchInfo()}}var c={element:b[0].el,nX:b[0].nX,nY:b[0].nY,oEvent:a};if(!this._fireCustomEvent("touchStart",c)){return}this._updateTouchInfo(b,"start");this._startLongTapTimer(b,a)},_onMove:function(k){if(this.nStart<=0){return}this.bMove=true;var c=this._getTouchInfo(k);if(c.length===1){if(this.nMoveType<0||this.nMoveType==3||this.nMoveType==4){var d=this._getMoveType(c);if(!((this.nMoveType==4)&&(d==3))){if(this.option("nUseDiagonal")==2&&(d==0||d==1)){this._nStartMoveType=d;this.nMoveType=2}else{this.nMoveType=this._nStartMoveType=d}}}}else{if(this.nMoveType!==8){this.nMoveType=this._nStartMoveType=this._getMoveType(c)}}var a=this._getCustomEventParam(c,false,k);(this.nMoveType!=3)&&this._deleteLongTapTimer();var e=0;if(this.nMoveType==0){e=Math.abs(a.nDistanceX)}else{if(this.nMoveType==1){e=Math.abs(a.nDistanceY)}else{e=Math.abs(Math.sqrt(Math.pow(a.nDistanceX,2)+Math.pow(a.nDistanceY,2)))}}if((e<this.option("nMoveThreshold")||e<this.option("nSlopeThreshold"))&&(this.nMoveType<0||this.nMoveType>2)){return}this._updateTouchInfo(c,"move");a.sMoveTypeAgree=false;var h=a.sMoveType;var i=Math.abs(a.nVectorX);var f=(this.option("bHorizental")&&h==jindo.m.Touch.MOVETYPE[0]);var j=(this.option("bVertical")&&h==jindo.m.Touch.MOVETYPE[1]);var g=(this.option("nUseDiagonal")==1&&h==jindo.m.Touch.MOVETYPE[2]);var b=this.option("nUseDiagonal")==2;if((f||j||g)||b){a.sMoveTypeAgree=true}if(!this.fireEvent("touchMove",a)){this.nStart=0;return}},_onEnd:function(b){var c=this._getTouchInfo(b);this.nStart-=c.length;var a=this;if(this.nStart>0){clearTimeout(this._nTouchEndTimer);this._nTouchEndTimer=setTimeout(function(){a._onEnd(b)},500);return}this._deleteLongTapTimer();if(!this.bMove&&(this.nMoveType!=4)){this.nMoveType=3}if(this._isDblTap(c[0].nX,c[0].nY,c[0].nTime)){clearTimeout(this._nTapTimer);this._nTapTimer=-1;this.nMoveType=5}this._updateTouchInfo(c,"end");var e=this._getCustomEventParam(c,true,b);var d=e.sMoveType;if((typeof this._htEventHandler[jindo.m.Touch.MOVETYPE[5]]!="undefined"&&(this._htEventHandler[jindo.m.Touch.MOVETYPE[5]].length>0))&&(this.nMoveType==3)){this._nTapTimer=setTimeout(function(){a._fireCustomEvent(d,e);a.fireEvent("touchEnd",e);delete a._nTapTimer},this.option("nDoubleTapDuration"))}else{this.fireEvent("touchEnd",e);if(this.nMoveType!=4){if(this.nMoveType===8){e.sMoveType=jindo.m.Touch.MOVETYPE[6];this._fireCustomEvent(jindo.m.Touch.MOVETYPE[6],e);e.sMoveType=jindo.m.Touch.MOVETYPE[7];this._fireCustomEvent(jindo.m.Touch.MOVETYPE[7],e)}else{setTimeout(function(){a._fireCustomEvent(d,e)},0)}}}this._updateTouchEndInfo(c);this._resetTouchInfo()},_fireCustomEvent:function(b,a){return this.fireEvent(b,a)},_getCustomEventParam:function(h,b,d){var r;if(this._htMoveInfo.aPos.length>0){r=this._htMoveInfo.aPos[(this._htMoveInfo.aPos.length>0&&!b?this._htMoveInfo.aPos.length-1:0)]}else{r={nX:this._htMoveInfo.nBeforeX,nY:this._htMoveInfo.nBeforeY,nTime:this._htMoveInfo.nBeforeTime}}var q=jindo.m.Touch.MOVETYPE[this.nMoveType],g=jindo.m.Touch.MOVETYPE[this._nStartMoveType],f=h[0].nTime-this._htMoveInfo.nStartTime,u=0,s=0,l=0,k=0,x=0,w=0,n=0,m=0,c=(this.nMoveType===1)?0:h[0].nX-this._htMoveInfo.nStartX,a=(this.nMoveType===0)?0:h[0].nY-this._htMoveInfo.nStartY,v=(this.nMoveType===1)?0:h[0].nX-r.nX,t=(this.nMoveType===0)?0:h[0].nY-r.nY,p=h[0].nTime-r.nTime,j={element:h[0].el,nX:h[0].nX,nY:h[0].nY,nVectorX:h[0].nX-this._htMoveInfo.nBeforeX,nVectorY:h[0].nY-this._htMoveInfo.nBeforeY,nDistanceX:c,nDistanceY:a,sMoveType:q,sStartMoveType:g,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime,htMomentum:{nDistanceX:v,nDistanceY:t,nDuration:p},oEvent:d||{}};if((h.length)>1||(this.nMoveType>=6)){j.nScale=this._getScale(h);j.nRotation=this._getRotation(h);(j.nScale===null)&&(j.nScale=this._htMoveInfo.nBeforeScale);(j.nRotation===null)&&(j.nRotation=this._htMoveInfo.nBeforeRotation)}if(h.length>=1){j.aX=[];j.aY=[];j.aElement=[];for(var o=0,e=h.length;o<e;o++){j.aX.push(h[o].nX);j.aY.push(h[o].nY);j.aElement.push(h[o].el)}}if(b){if(this.nMoveType==0||this.nMoveType==1||this.nMoveType==2){if(f<=this.option("nMomentumDuration")){l=Math.abs(c)/f;u=(l*l)/2;k=Math.abs(a)/f;s=(k*k)/2}if(p<=this.option("nMomentumDuration")){n=Math.abs(v)/p;x=(n*n)/2;m=Math.abs(t)/p;w=(m*m)/2}}j.nMomentumX=u;j.nMomentumY=s;j.nSpeedX=l;j.nSpeedY=k;j.nDuration=f;j.htMomentum.nMomentumX=x;j.htMomentum.nMomentumY=w;j.htMomentum.nSpeedX=n;j.htMomentum.nSpeedY=m}return j},_updateTouchEndInfo:function(a){this.htEndInfo={element:a[0].el,time:a[0].nTime,movetype:this.nMoveType,nX:a[0].nX,nY:a[0].nY}},_deleteLongTapTimer:function(){if(typeof this._nLongTapTimer!="undefined"){clearTimeout(this._nLongTapTimer);delete this._nLongTapTimer}},_startLongTapTimer:function(c,b){var a=this;if((typeof this._htEventHandler[jindo.m.Touch.MOVETYPE[4]]!="undefined")&&(this._htEventHandler[jindo.m.Touch.MOVETYPE[4]].length>0)){a._nLongTapTimer=setTimeout(function(){a.fireEvent("longTap",{element:c[0].el,oEvent:b,nX:c[0].nX,nY:c[0].nY});a.nMoveType=4},a.option("nLongTapDuration"))}},_onResize:function(){this._setSlope()},_isDblTap:function(d,c,a){if((typeof this._nTapTimer!="undefined")&&this.nMoveType==3){var b=this.option("nTapThreshold");if((Math.abs(this.htEndInfo.nX-d)<=b)&&(Math.abs(this.htEndInfo.nY-c)<=b)){return true}}return false},_setSlope:function(){if(!this.bSetSlope){this._nHSlope=((window.innerHeight/2)/window.innerWidth).toFixed(2)*1;this._nVSlope=(window.innerHeight/(window.innerWidth/2)).toFixed(2)*1}},setSlope:function(a,b){this._nHSlope=b;this._nVSlope=a;this.bSetSlope=true},getSlope:function(){return{nVSlope:this._nVSlope,nHSlope:this._nHSlope}},_resetTouchInfo:function(){for(var a in this._htMoveInfo){if(a!="aPos"){this._htMoveInfo[a]=0}else{this._htMoveInfo.aPos.length=0}}this._deleteLongTapTimer();this.nStart=0;this.bMove=false;this.nMoveType=-1;this._nStartMoveType=-1},_updateTouchInfo:function(a,b){if(b=="end"){this.htEndInfo={nX:a[0].nX,nY:a[0].nY};if(this._htMoveInfo.aPos.length>3){this._htMoveInfo.aPos.pop()}}else{if(b=="start"){this._htMoveInfo.nStartX=a[0].nX;this._htMoveInfo.nStartY=a[0].nY;this._htMoveInfo.nStartTime=a[0].nTime}else{this._htMoveInfo.nBeforeTime=a[0].nTime}this._htMoveInfo.nBeforeX=a[0].nX;this._htMoveInfo.nBeforeY=a[0].nY;this._htMoveInfo.aPos.push({nX:a[0].nX,nY:a[0].nY,nTime:a[0].nTime});(this._htMoveInfo.aPos.length>5)&&this._htMoveInfo.aPos.shift()}},_getMoveTypeBySingle:function(a,h){var b=this.nMoveType;var g=Math.abs(this._htMoveInfo.nStartX-a);var f=Math.abs(this._htMoveInfo.nStartY-h);var e=g+f;var c=this.option("nTapThreshold");if((g<=c)&&(f<=c)){b=3}else{b=-1}if(this.option("nSlopeThreshold")<=e){var d=parseFloat((f/g).toFixed(2),10);if((this._nHSlope===-1)&&(this._nVSlope===-1)&&this.option("nUseDiagonal")>0){b=2}else{if(d<=this._nHSlope){b=0}else{if(d>=this._nVSlope){b=1}else{if(this.option("nUseDiagonal")>1){b=2}else{b=2}}}}}return b},_getMoveTypeByMulti:function(a){var b=-1;if((this.nMoveType===6)||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option("nPinchThreshold")){b=6}if((this.nMoveType===7)||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option("nRotateThreshold")){if(b===6){b=8}else{b=7}}if(b===-1){return this.nMoveType}return b},_getScale:function(b){var c=-1;var a=this._getDistance(b);if(a<=0){return null}if(this._htMoveInfo.nStartDistance===0){c=1;this._htMoveInfo.nStartDistance=a}else{c=a/this._htMoveInfo.nStartDistance}this._htMoveInfo.nBeforeScale=c;return c},_getRotation:function(a){var c=-1;var b=this._getAngle(a);if(b===null){return null}if(this._htMoveInfo.nStartAngle===0){this._htMoveInfo.nStartAngle=b;c=0}else{c=b-this._htMoveInfo.nStartAngle}this._htMoveInfo.nLastAngle=b;this._htMoveInfo.nBeforeRotation=c;return c},_getMoveType:function(a){var b=this.nMoveType;if(a.length===1){b=this._getMoveTypeBySingle(a[0].nX,a[0].nY)}else{if(a.length===2){b=this._getMoveTypeByMulti(a)}}return b},_getDistance:function(a){if(a.length===1){return -1}return Math.sqrt(Math.pow(Math.abs(a[0].nX-a[1].nX),2)+Math.pow(Math.abs(a[0].nY-a[1].nY),2))},_getAngle:function(c){if(c.length===1){return null}var b=c[0].nX-c[1].nX,a=c[0].nY-c[1].nY;var g=Math.atan2(a,b)*this._radianToDegree;if(this._htMoveInfo.nLastAngle!==null){var f=Math.abs(this._htMoveInfo.nLastAngle-g);var d=g+360;var e=g-360;if(Math.abs(d-this._htMoveInfo.nLastAngle)<f){g=d}else{if(Math.abs(e-this._htMoveInfo.nLastAngle)<f){g=e}}}return g},_getTouchInfo:function(b){var a=[];var d=b.$value().timeStamp;var e=null;if(this._hasTouchEvent){e=b.$value().touches;e=e.length>1?e:b.$value().changedTouches;for(var c=0,f=e.length;c<f;c++){a.push({el:jindo.m.getNodeElement(e[c].target),nX:e[c].pageX,nY:e[c].pageY,nTime:d})}}else{a.push({el:b.element,nX:b.pos().pageX,nY:b.pos().pageY,nTime:d})}return a},getBaseElement:function(a){return this._el},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},destroy:function(){var a;this.deactivate();this._el=null;for(a in this._htMoveInfo){this._htMoveInfo[a]=null}this._htMoveInfo=null;for(a in this.htEndInfo){this.htEndInfo[a]=null}this.htEndInfo=null;this.nStart=0;this.bMove=null;this.nMoveType=null;this._nStartMoveType=null;this._nVSlope=null;this._nHSlope=null;this.bSetSlope=null}}).extend(jindo.m.UIComponent);jindo.m.SwipeCommon=jindo.$Class({$init:function(b,a){this.option({bActivateOnload:true,bUseHighlight:true,bUseDiagonalTouch:true,bUseMomentum:true,nDeceleration:0.0006,bAutoResize:true,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),nZIndex:2000})},_getAnimationOption:function(a){return jindo.$Jindo.mixin({bUseH:this._bUseH,bHasOffsetBug:this._hasOffsetBug(),fEffect:this.option("fEffect"),bUseCss3d:this.option("bUseCss3d"),bUseTimingFunction:this.option("bUseTimingFunction")},a||{})},_initVar:function(){this._htWElement={};this._bUseH=false;this._bUseV=false;this._nX=0;this._nY=0;this._bUseDiagonalTouch=this.option("bUseDiagonalTouch");this._bClickBug=jindo.m.hasClickBug();this._htOffsetBug={hasBug:jindo.m.hasOffsetBug()&&this.option("bUseHighlight"),timer:-1,elDummyTag:null};this._htSize={viewWidth:0,viewHeight:0,contWidth:0,contHeight:0,maxX:0,maxY:0};this._isStop=false;this._oTouch=null;this._oAnimation=null},_setWrapperElement:function(a){this._htWElement.view=jindo.$Element(a);this._htWElement.base=jindo.$Element(this._htWElement.view.query("."+this.option("sClassPrefix")+"base"));if(this._htWElement.base){this._htWElement.container=this._htWElement.base.query("."+this.option("sClassPrefix")+"container")}else{this._htWElement.container=this._htWElement.view.query("."+this.option("sClassPrefix")+"container")||this._htWElement.view.first()}this._htWElement.container=jindo.$Element(this._htWElement.container);this._htWElement.view.css({overflow:"hidden",zIndex:this.option("nZIndex")});if(this._htWElement.base){this._htWElement.base.css({position:"relavite"})}this._htWElement.container.css({left:"0px",top:"0px"});this._createOffsetBugDummyTag()},_onActivate:function(){if(!this._oTouch){this._oTouch=new jindo.m.Touch(this._htWElement.view.$value(),{nMoveThreshold:0,nUseDiagonal:0,bVertical:this.bUseH,bHorizental:!this.bUseH,nMomentumDuration:200,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:(jindo.m.getDeviceInfo().win8?100:0),bActivateOnload:false})}this._attachEvent();this._attachAniEvent();this._oTouch.activate()},_onDeactivate:function(){this._detachEvent();this._detachAniEvent();this._oTouch.deactivate();if(this._oAnimation){this._oAnimation.deactivate()}},_attachEvent:function(){this._htEvent={};this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind();this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind();this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind();this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd});if(this.option("bAutoResize")){this._htEvent.resize=jindo.$Fn(this._onResize,this).bind();jindo.m.bindRotate(this._htEvent.resize);jindo.m.bindPageshow(this._htEvent.resize)}},_detachEvent:function(){this._oTouch.detachAll();if(this.option("bAutoResize")){jindo.m.unbindRotate(this._htEvent.resize);jindo.m.unbindPageshow(this._htEvent.resize)}},_getX:function(a){return(a>=0?0:(a<=this._htSize.maxX?this._htSize.maxX:a))},_getY:function(a){return(a>=0?0:(a<=this._htSize.maxY?this._htSize.maxY:a))},_attachAniEvent:function(){if(this._oAnimation){this._htEvent.endAni=jindo.$Fn(this._onEndAniImpl,this).bind();this._oAnimation.attach({end:this._htEvent.endAni})}},_detachAniEvent:function(){if(this._oAnimation){this._oAnimation.detachAll()}},set:function(){var a=Array.prototype.slice.apply(arguments);if(a.length>=1){this._oAnimation=a.shift();this._oAnimation.setStyle(a);this._attachAniEvent()}return this._oAnimation},getAnimation:function(){return this._oAnimation},isPlaying:function(){if(this._oAnimation){return this._oAnimation.isPlaying()}return false},isAnimating:this.isPlaying,refresh:function(){},resize:function(){var c=this._htWElement.view,b=this._htWElement.container,f=parseInt(c.css("borderLeftWidth"),10),a=parseInt(c.css("borderRightWidth"),10),e=parseInt(c.css("borderTopWidth"),10),d=parseInt(c.css("borderBottomWidth"),10);f=isNaN(f)?0:f;a=isNaN(a)?0:a;e=isNaN(e)?0:e;d=isNaN(d)?0:d;this._htSize.viewWidth=c.width()-f-a;this._htSize.viewHeight=c.height()-e-d;this._htSize.contWidth=b.width();this._htSize.contHeight=b.height()},_calcMomentum:function(c,g,f,i,d,h){var j=this.option("nDeceleration"),a=f/j,e=0,b=0;if(c>0&&a>i){b=h/(6/(a/g*j));i=i+b;g=g*i/a;a=i}else{if(c<0&&a>d){b=h/(6/(a/g*j));d=d+b;g=g*d/a;a=d}}a=a*(c<0?-1:1);e=g/j;return{nDist:a,nTime:Math.round(e)}},_onStart:function(a){if(this.isPlaying()){a.oEvent.stop();return}this._clearOffsetBug();if(this.fireEvent("beforeTouchStart",a)){this._isStop=false;this._startImpl(a);if(!this.fireEvent("touchStart",jindo.$Jindo.mixin(a,{}))){a.stop()}}else{a.stop()}},_onMove:function(a){this._clearOffsetBug();if(this.fireEvent("beforeTouchMove",a)){var b=this._preventSystemEvent(a);if(b&&!this.isPlaying()){this._bClickBug&&this._htWElement.container.css("pointerEvents","none");this._moveImpl(a)}if(!b){this.fireEvent("scroll")}var c=jindo.$Jindo.mixin(a,{});c.bPreventDefaultEvent=b;if(!this.fireEvent("touchMove",c)){a.stop()}}else{a.stop()}},_onEnd:function(a){if(this.isPlaying()){return}if(!this._isStop){this._clearOffsetBug()}if(this.fireEvent("beforeTouchEnd",a)){if(a.sMoveType===jindo.m.MOVETYPE[3]||a.sMoveType===jindo.m.MOVETYPE[4]||a.sMoveType===jindo.m.MOVETYPE[5]){if(this._isStop){a.oEvent.stop(jindo.$Event.CANCEL_ALL)}else{this._tapImpl&&this._tapImpl()}}else{if(a.sMoveType===jindo.m.MOVETYPE[0]||a.sMoveType===jindo.m.MOVETYPE[1]||a.sMoveType===jindo.m.MOVETYPE[2]){this._endImpl(a)}else{this._restore&&this._restore()}}if(!this.fireEvent("touchEnd",jindo.$Jindo.mixin(a,{}))){a.stop()}}else{a.stop()}this._bClickBug&&this._htWElement.container.css("pointerEvents","auto")},_preventSystemEvent:function(b){var a=b.oEvent;if(b.sMoveType===jindo.m.MOVETYPE[0]){if(this._bUseH){a.stop();return true}else{return false}}else{if(b.sMoveType===jindo.m.MOVETYPE[1]){if(this._bUseV){a.stop();return true}else{return false}}else{if(b.sMoveType===jindo.m.MOVETYPE[2]){if(this._bUseDiagonalTouch){a.stop();return true}else{return false}}else{if(b.sMoveType===jindo.m.MOVETYPE[6]||b.sMoveType===jindo.m.MOVETYPE[7]||b.sMoveType===jindo.m.MOVETYPE[8]){a.stop();return true}else{a.stop();return true}}}}},_onResize:function(a){if(a.sType==="rotate"){if(this.fireEvent("rotate",{isVertical:a.isVertical})){this._resizeImpl(a)}}else{this._resizeImpl(a)}},_getMomentumData:function(f,c,e){var b={nDist:0,nTime:0},a={nDist:0,nTime:0},d={momentumX:f.nMomentumX,momentumY:f.nMomentumY,distanceX:f.nDistanceX,distanceY:f.nDistanceY,x:this._nX,y:this._nY,nextX:this._nX,nextY:this._nY};if(this.option("bUseMomentum")&&((f.nMomentumX&&f.nMomentumX>c)||(f.nMomentumY&&f.nMomentumY>c))){if(this._bUseH){b=this._calcMomentum(f.nDistanceX,f.nSpeedX,f.nMomentumX,-this._nX,-this._htSize.maxX+this._nX,e?this._htSize.viewWidth:0)}if(this._bUseV){a=this._calcMomentum(f.nDistanceY,f.nSpeedY,f.nMomentumY,-this._nY,-this._htSize.maxY+this._nY,e?this._htSize.viewHeight:0)}d.nextX=this._nX+b.nDist;d.nextY=this._nY+a.nDist;d.duration=Math.max(Math.max(b.nTime,a.nTime),10);d.duration=jindo.m.getOsInfo().android?d.duration*0.7:d.duration}else{d.duration=0}return d},_makeStylePos:function(c){var d=this.getAnimation(),e=jindo.m.getTranslateOffset(c),b=jindo.m.getStyleOffset(c),a={top:(e.top+b.top)+"px",left:(e.left+b.left)+"px"};a[d.p("Transform")]=d.getTranslate("0px","0px");c.css(a);this._htOffsetBug.elDummyTag.focus()},_createOffsetBugDummyTag:function(){if(this._hasOffsetBug()){this._htOffsetBug.elDummyTag=jindo.$$.getSingle("._offsetbug_dummy_atag_",this._htWElement.view.$value());if(!this._htOffsetBug.elDummyTag){this._htOffsetBug.elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_offsetbug_dummy_atag_'></a>");this._htWElement.view.append(this._htOffsetBug.elDummyTag)}}},_clearOffsetBug:function(){if(this._hasOffsetBug()){clearTimeout(this._htOffsetBug.timer);this._htOffsetBug.timer=-1}},_fixOffsetBugImpl:function(){if(this._hasOffsetBug()){var a=this;var b=this.getAnimation().getTarget(true);this._clearOffsetBug();this._htOffsetBug.timer=setTimeout(function(){if(b){a._makeStylePos(b)}},200)}},_hasOffsetBug:function(){return this._htOffsetBug.hasBug},destroy:function(){var a;this.deactivate();for(a in this._htWElement){this._htWElement[a]=null}this._htWElement=null;for(a in this._htEvent){this._htEvent[a]=null}this._htEvent=null;if(this._oTouch){this._oTouch.destroy()}if(this._oAnimation){this._oAnimation.destroy()}}}).extend(jindo.m.UIComponent);jindo.m.Flick=jindo.$Class({$init:function(b,a){this.option({bHorizontal:true,sClassPrefix:"flick-",sContentClass:"ct",bUseCircular:false,nTotalContents:3,nFlickThreshold:40,nDuration:100,nBounceDuration:100,fpPanelEffect:jindo.m.Effect.cubicEaseIn,nDefaultIndex:0,bFitContentSize:true,nDeceleration:0.001,bUseMomentum:false})},_initVar:function(){jindo.m.SwipeCommon.prototype._initVar.apply(this);this._bUseH=this.option("bHorizontal");this._bUseV=!this._bUseH;this._bUseCircular=this.option("bUseCircular");this._nContentIndex=0;this._welElement=null;this._aPos=[];this._nRange=null;this._nDefaultPanel=3;this._hasKitkatHighlightBug=jindo.m._hasKitkatHighlightBug();this._nKitkatHighlightBug=-1},_setWrapperElement:function(b){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,b);var a=this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));var c=jindo.$A(this._htWElement.aPanel);if(!this._bUseCircular){c=c.filter(function(e,f,d){return jindo.$Element(e).visible()})}this._htWElement.container.css({position:"relative"}).css(a,"100%");this._htWElement.aPanel=c.forEach(function(e,f,d){d[f]=jindo.$Element(e).css(a,"100%")}).$value()},_checkIndex:function(c){var a=true,b=this.getTotalContents()-1;if(isNaN((c*1))||c<0){a=false}if(c>b){a=false}return a},_refreshPanelInfo:function(){var a=0;this._aPos=[0];for(var b=0,d=this._bUseH?"width":"height",c=this.getTotalContents();b<c;b++){if(this._nRange!=null){a-=this._nRange}else{a-=this._htWElement.aPanel[b][d]()}this._aPos.push(a)}},_onActivate:function(){jindo.m.SwipeCommon.prototype._onActivate.apply(this)},_onDeactivate:function(){jindo.m.SwipeCommon.prototype._onDeactivate.apply(this)},set:function(){if(!this._oAnimation){jindo.m.SwipeCommon.prototype.set.apply(this,Array.prototype.slice.apply(arguments));if(this._bUseCircular){this.option("nTotalContents",parseInt(this.option("nTotalContents"),10))}else{this.option("nTotalContents",this._htWElement.aPanel.length)}var a=this.option("nDefaultIndex");if(!this._checkIndex(a)){a=0}this.resize();this.refresh(a)}return this._oAnimation},refresh:function(c,a,b){jindo.m.SwipeCommon.prototype.refresh.call(this);c=typeof c==="undefined"?this.getContentIndex():c;this._hasKitkatHighlightBug&&this._htWElement.container.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS);this._moveTo(c,{duration:0,fireEvent:a,fireMoveEvent:b,corrupt:true})},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this);if(!this.option("bFitContentSize")&&!this._bUseCircular){this._nRange=null}else{this._nRange=this._bUseH?this._htSize.viewWidth:this._htSize.viewHeight;if(this._nRange==0){this._nRange=this._htWElement.view[this._bUseH?"width":"height"]()}}this._refreshPanelInfo();if(this._nRange!=null){if(this._bUseH){this._htSize.maxX=(this.option("nTotalContents")-1)*-this._nRange;this._nX=this._aPos[this.getContentIndex()]}else{this._htSize.maxY=(this.option("nTotalContents")-1)*-this._nRange;this._nY=this._aPos[this.getContentIndex()]}}},getElement:function(){var a=this.getContentIndex();if(this._bUseCircular){if(this._welElement){return this._welElement}else{a%=this._nDefaultPanel;return this._htWElement.aPanel[a]}}else{return this._htWElement.aPanel[a]}},getNextElement:function(){var a;if(this._bUseCircular){a=this._getIndexByElement(this.getElement());a=((((a+1)%this._nDefaultPanel)>this._nDefaultPanel-1)?0:(a+1))%this._nDefaultPanel}else{a=this.getNextIndex()}return this._htWElement.aPanel[a]},getPrevElement:function(){var a;if(this._bUseCircular){a=this._getIndexByElement(this.getElement());a=((a-1)<0)?this._nDefaultPanel-1:(a-1)}else{a=this.getPrevIndex()}return this._htWElement.aPanel[a]},_getIndexByElement:function(a){var b=-1;jindo.$A(this._htWElement.aPanel).forEach(function(d,e,c){if(d.isEqual(a)){b=e}});return b},getContentIndex:function(){return parseInt(this._nContentIndex,10)},getNextIndex:function(){var b=this.getContentIndex()+1,a=this.getTotalContents()-1;if(this._bUseCircular&&(b>a)){b=0}return Math.min(a,b)},getPrevIndex:function(){var a=this.getContentIndex()-1;if(this._bUseCircular&&a<0){a=this.getTotalContents()-1}return Math.max(0,a)},getTotalContents:function(){if(this._bUseCircular){return this.option("nTotalContents")}else{return this._htWElement.aPanel.length}},setTotalContents:function(a){if(isNaN(a)||a<1){return}a=parseInt(a,10);if((this.getContentIndex()+1)>a){this._moveTo(a-1,{duration:0,fireEvent:true,fireMoveEvent:true})}this.option("nTotalContents",a);this.resize()},getTotalPanels:function(){return this._htWElement.aPanel.length},getPanels:function(){return this._htWElement.aPanel},moveTo:function(a,b){if(a==this.getContentIndex()){return}return this._moveTo(a,{duration:b})},_moveTo:function(a,c){if((this._nRange==null)&&(this._aPos.indexOf(this._bUseH?this._htSize.maxX:this._htSize.maxY))<a){return}var e={duration:typeof c.duration==="undefined"?this.option("nDuration"):c.duration,fireEvent:typeof c.fireEvent==="undefined"?true:c.fireEvent,fireMoveEvent:typeof c.fireMoveEvent==="undefined"?false:c.fireMoveEvent,corrupt:typeof c.corrupt=="undefined"?false:c.corrupt,direct:typeof c.direct=="undefined"?false:c.direct};if(this.isPlaying()||isNaN(a)||a<0||a>=this.getTotalContents()){return}var g=this._bUseH?this._nX:this._nY,h=this._getPos(a);if(this._bUseCircular){var d=this._posToIndex(g),f=this.getTotalContents();if(d==0&&a==f-1){if(this.option("nTotalContents")>=3){h=this._nRange}}else{if(d==f-1&&a==0){h=this._getPos(d)-this._nRange}}}if(g==h){if(e.duration===0&&e.fireEvent){if(e.fireMoveEvent){if(this._fireMoveEvent(a)){this._fireMoveEvent()}}else{var b={next:null,moveCount:0,corrupt:e.corrupt,contentsNextIndex:a};if(this._fireFlickingEvent("beforeFlicking",b)){this._fireFlickingEvent("flicking",b);this._fireFlickingEvent("afterFlicking",b)}}}return}this._move(g,h,{duration:e.duration,contentsNextIndex:a,fireEvent:e.fireEvent,fireMoveEvent:e.fireMoveEvent,corrupt:e.corrupt,direct:c.direct})},moveNext:function(c){var b={duration:c,direct:false};if(this._bUseCircular&&this.option("nTotalContents")<3){var a=this.getContentIndex();if(this._bUseH){this._nX=a==0?1:this._nX-1}else{this._nY=a==0?1:this._nY-1}b.direct=true}this._moveTo(this.getNextIndex(),b)},movePrev:function(c){var b={duration:c,direct:false};if(this._bUseCircular&&this.option("nTotalContents")<3){var a=this.getContentIndex();b.direct=true;if(this._bUseH){this._nX=a==0?this._aPos[this.getTotalContents()-1]-1:this._nX+1}else{this._nY=a==0?this._aPos[this.getTotalContents()-1]-1:this._nY+1}this._moveTo(this.getNextIndex(),b)}else{this._moveTo(this.getPrevIndex(),b)}},_startImpl:function(a){if(this.isPlaying()){return}this._nPosToIndex=this._posToIndex(this._bUseH?this._nX:this._nY)},_moveImpl:function(b){var a=this._bUseH?b.nVectorX:b.nVectorY,f=this._bUseH?b.nDistanceX:b.nDistanceY,e=f<0,d=this._bUseH?this._nX:this._nY,c=e?this.getNextIndex():this.getPrevIndex();if(this._bUseCircular){d+=a}else{d+=(c==this.getContentIndex()?a/2:a)}this._nX=this._bUseH?d:0;this._nY=this._bUseV?d:0;b.bNext=e;this._moveAfterCall&&this._moveAfterCall(b);return e},_endImpl:function(c){var i=null,d=(this._bUseH?c.nDistanceX:c.nDistanceY)<0,f=this.getContentIndex(),g=d?this.getNextIndex():this.getPrevIndex(),h=this._getPos(f),e=Math.abs((this._bUseH?this._nX:this._nY)-h),b=(f===g)||(e<parseInt(this.option("nFlickThreshold"),10)||(this._aPos.indexOf(this._bUseH?this._htSize.maxX:this._htSize.maxY))<g);if(e==0){return}if(b){this._restore()}else{i=this._getMomentumData(c,1.5);if(i.duration===0||(d&&f===this.getTotalContents()-1)||(!d&&f===0)){var a=this._bUseH?this._nX:this._nY;if((d&&(a<this._aPos[g]))||(!d&&(a>this._aPos[g]))){if(this._bUseCircular&&this.option("nTotalContents")<3){if(f==0&&g==1&&!d){if(this._bUseH){this._nX=this._aPos[this.getTotalContents()-1]-1}else{this._nY=this._aPos[this.getTotalContents()-1]-1}}}else{this._setCurrentPos(f,d)}}this._moveTo(this._nRange==null?this._getNextIndexByView(f,d):g,{duration:this.option("nDuration"),direct:true})}else{var j=this._posToIndex(this._bUseH?i.nextX:i.nextY);if(j==f){this._restore()}else{if(this._bUseCircular){f+=d?1:-1;this._setCurrentPos(f,d)}else{this._setCurrentPos(f,d)}this._moveTo(j,{duration:i.duration})}}}},_getNextIndexByView:function(a,b){return b?this.getNextIndex():this.getPrevIndex()},_setCurrentPos:function(a,b){if(this._bUseH){this._nX=this._aPos[a]}else{this._nY=this._aPos[a]}},_resizeImpl:function(a){this.resize()},_restore:function(){if(!this._bUseH&&!this._bUseV){return}var a=this._getPos(this.getContentIndex()),b;if(jindo.m.SlideFlicking&&this instanceof jindo.m.SlideFlicking){var c=jindo.m.getTranslateOffset(this._htWElement.container);b=this._bUseH?c.left:c.top}else{b=this._bUseH?this._nX:this._nY}if(a===b){return}else{this._move(b,a,{duration:this.option("nBounceDuration"),restore:true})}},_getRevisionNo:function(a){var b=this.getTotalContents();if(a<0){a+=b}else{if(a>b-1){a=a%b}}return a},_fireCustomBeforeEvent:function(a){if(a.restore){if(!this._fireRestoreEvent("beforeRestore",a)){return false}}else{if(a.fireMoveEvent){if(a.moveIndex==0){if(!this._fireMoveEvent(a.contentsNextIndex)){return false}}}else{if(!this._fireFlickingEvent("beforeFlicking",a)){return false}}}return true},_setPanelEndInfo:function(a){if(a.restore){this._nX=this._bUseH?this._getPos(a.no):0;this._nY=this._bUseV?this._getPos(a.no):0}else{a.no=this._getRevisionNo(a.no);if(a.direct&&a.moveCount>1){this._updateFlickInfo(a.no,this._htWElement.aPanel[a.no])}else{this._updateFlickInfo(a.no,a.next?this.getNextElement():this.getPrevElement())}}},_fireCustomEvent:function(a){if(a.restore){this._fireRestoreEvent("restore",a)}else{if(a.fireMoveEvent){if(a.duration===0||a.moveCount==(a.moveIndex+1)){this._fireMoveEvent()}}else{this._fireFlickingEvent("flicking",a);this._fireFlickingEvent("afterFlicking",a)}}},_fireFlickingEvent:function(b,c){if(typeof this._htEventHandler[b]=="undefined"){return true}var a={nContentsIndex:this.getContentIndex(),bNext:c.next};if(/before/.test(b)){if(c.direct||(c.duration===0&&c.moveCount>1)||c.next==null){a.nContentsNextIndex=c.contentsNextIndex}else{a.nContentsNextIndex=c.next?this.getNextIndex():this.getPrevIndex()}}a.nMoveCount=c.moveCount;a.bCorrupt=c.corrupt;a[this._bUseH?"bLeft":"bTop"]=a.bNext;return this.fireEvent(b,a)},_fireRestoreEvent:function(a,b){return this.fireEvent(a,{nContentsIndex:this.getContentIndex()})},_fireMoveEvent:function(a){if(typeof a==="undefined"){return this.fireEvent("move",{nContentsIndex:this.getContentIndex()})}else{return this.fireEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:a})}},_updateFlickInfo:function(a,b){this._nContentIndex=typeof a==="undefined"?this.getContentIndex():a;b=typeof b==="undefined"?this.getElement():b;this._nX=this._bUseH?this._getPos(this._nContentIndex):0;this._nY=this._bUseV?this._getPos(this._nContentIndex):0;this._welElement=b},_onEndAniImpl:function(a){if(this._bUseCircular){}},_makeOption:function(b){var a=jindo.$Jindo.mixin({duration:0,restore:false,fireEvent:true,fireMoveEvent:false,moveCount:1,moveIndex:0,corrupt:false,useCircular:this._bUseCircular,range:this._nRange},b||{});a.restore&&(a.moveCount=0);(a.moveCount>1&&a.duration===0)&&(a.corrupt=true);a.direct=a.direct||(jindo.m.SlideFlicking&&this instanceof jindo.m.SlideFlicking&&typeof this._htEventHandler.beforeFlicking=="undefined"&&typeof this._htEventHandler.flicking=="undefined"&&typeof this._htEventHandler.afterFlicking=="undefined");return a},_moveWithEvent:function(c,e,b){var a=this,d={};b.no=this._posToIndex(c);d=jindo.$Jindo.mixin(b,{});if(!d.fireMoveEvent&&d.moveCount>1){d.contentsNextIndex=d.no}a._panelEndBeforeCall&&a._panelEndBeforeCall(d);this._oAnimation._oMorph.pushCall(function(){if(d.fireEvent&&!a._fireCustomBeforeEvent(d)){this.clear();a._restore()}});this._oAnimation.move(this._bUseH?c:0,this._bUseV?c:0,e,d);this._oAnimation._oMorph.pushCall(function(){a._setPanelEndInfo(d);a._panelEndAfterCall&&a._panelEndAfterCall(d);d.fireEvent&&a._fireCustomEvent(d)});return this._oAnimation._oMorph},_move:function(g,h,l){if(!this._bUseCircular){var a=this._bUseH?this._htSize.maxX:this._htSize.maxY;h=h<a?a:h}if(g===h){return}this._clearOffsetBug();var d=g>h,k=this._getStepCount(g,h);l=l||{};l.moveCount=k;l.next=d;l=this._makeOption(l);if(l.restore){this._moveWithEvent(h,l.duration,l).play();return}if(l.duration==0){this._moveWithEvent(h,0,l).play()}else{if(l.direct){this._moveWithEvent(h,l.duration,l).play()}else{var j=0,b=g,c=0,f=this.option("fpPanelEffect")(0,l.duration);for(var e=0;e<k;e++){l.moveIndex=e;c=this._getPanelEndPos(b,h,d);j=f((e+1)/k)-f(e/k);this._moveWithEvent(c,j,l);b=c}}this._oAnimation._oMorph.play()}},_getPos:function(a){if(a<0||a>=this._aPos.length){console.error("wrong index",a);return 0}else{return this._aPos[a]}},_isPosPoint:function(a){return this._aPos.indexOf(a)!=-1},_getStepCount:function(d,f){var c=d>f;var e=this._posToIndex(d),b=this._posToIndex(f),a=Math.abs(b-e);if(!c&&!this._isPosPoint(d)&&this._isPosPoint(f)){a++}return a},_posToIndex:function(d){for(var c=0,a=-1,b,e=this._aPos.length;c<e;c++){b=this._aPos[c];if(d<b){a++}else{if(d==b){a++;break}else{break}}}return a},_getPanelEndPos:function(d,e,c){var a=this._posToIndex(d),b;(!c&&!this._isPosPoint(d))&&(a++);a+=c?1:-1;if(this._bUseCircular&&a<0){b=d+e}else{b=this._getPos(a)}((this._nRange==null)&&c)&&(b=e>b?e:b);return b},_getTranslate:function(a){return this._oAnimation.getTranslate(this._bUseH?a:0,this._bUseV?a:0)},_tapImpl:function(){if(this._hasKitkatHighlightBug){this._htWElement.container.removeClass(jindo.m.KITKAT_HIGHLIGHT_CLASS);this._htWElement.container._element.clientHeight;var a=this;clearTimeout(this._nKitkatHighlightBug);this._nKitkatHighlightBug=setTimeout(function(){a._htWElement.container.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS)},200)}},destroy:function(){jindo.m.SwipeCommon.prototype.destroy.apply(this)}}).extend(jindo.m.SwipeCommon);jindo.m.Slide=jindo.$Class({$init:function(a){this.option({});this.option(a||{})},setStyle:function(b){var a={};a[this.p("TransitionProperty")]=this.sCssPrefix==""?"tranform":"-"+this.sCssPrefix+"-transform";a[this.p("TransitionDuration")]="0ms";a[this.p("Transform")]=this.getTranslate(0,0);this._welTarget=b[0].css(a);this.fireEvent("set",{css:a});return a},move:function(g,e,f,d){d=d||{};var c=this.getTarget(true),a;if(d.useCircular){if(this.option("bUseH")){g=this._getPos(g,d)}else{e=this._getPos(e,d)}}else{if(this.option("bHasOffsetBug")){var b=jindo.m.getStyleOffset(c);g-=b.left;e-=b.top}}a={"@transitionProperty":this.sCssPrefix==""?"tranform":"-"+this.sCssPrefix+"-transform","@transform":this.getTranslate(g+"px",e+"px")};if(!!f){this._oMorph.pushAnimate(f,[c,a])}else{c.css(this.toCss(a))}return this._oMorph},_getPos:function(c,b){var f=c,d=b.next,e=b.range;if(b.restore){f=0}else{if(b.duration!=0&&c%e===0){f=d?-e:e}else{if(typeof b.startIndex!="undefined"){var a=parseInt(f/e,10)*-1;if(a==b.startIndex||a>b.startIndex){d=true}else{d=false}f=(f%e)+((d?-1:1)*(Math.abs(a-b.startIndex)*e))}else{f=(f%e)+(d?0:2*e);f%=e}}}return f}}).extend(jindo.m.Animation);jindo.m.PreviewFlicking=jindo.$Class({$init:function(b,a){this.option({nTotalContents:5,nWidthPer:50});this.option(a||{});this._initVar();this._setWrapperElement(b);if(this.option("bActivateOnload")){this.activate()}},_initVar:function(){jindo.m.Flick.prototype._initVar.apply(this);this._nDefaultPanel=5},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var a=this;this.set(new jindo.m.Slide(this._getAnimationOption()).attach({set:function(b){a._setStyle(b.css)}}),this._htWElement.container)},_setStyle:function(d){var c={},a=0,g=this._bUseH?"width":"height",f=this._bUseH?"left":"top";for(var e in d){c[e]=d[e]}c.position="relative";if(this._bUseCircular){d.position="absolute"}if(this._bUseH){c.clear="both";d["float"]="left";this._htWElement.base.css("margin","0 auto")}else{var h=this._htWElement.view.height();var b=(h-this._htWElement.aPanel[0].height())/2;this._htWElement.base.css("marginTop",b+"px")}if(this.option("nMinWidth")){var j=g.charAt(0).toUpperCase()+g.substr(1);this._htWElement.base.css("min"+j,this.option("nMinWidth").replace(/\D/gi,"")+"px")}this._htWElement.base.css({position:"relative"});this._htWElement.base.css(g,this.option("nWidthPer")+"%");this._htWElement.container.css(c);var k=this;jindo.$A(this._htWElement.aPanel).forEach(function(m,l,n){var i=m;if(k._bUseCircular){i.css("position","absolute")}if(!this._bUseH){d.width="100%"}else{d[g]=(100/k._htWElement.aPanel.length)+"%"}i.css(d)},this)},_setWrapperElement:function(c){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,c);var a=this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));for(var b in this._htWElement.aPanel){this._htWElement.aPanel[b]=jindo.$Element(this._htWElement.aPanel[b])}this._htWElement.container.css({left:"",top:""})},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this);this._restorePanel();var b=this._bUseH?"width":"height",a=this._htWElement.view[b]();this._htWElement.container.css(b,this._htWElement.aPanel.length*100+"%");this._nRange=(this._bUseH?this._htWElement.aPanel[0].width():this._htWElement.aPanel[0].height());this._refreshPanelInfo();if(this._bUseH){this._htSize.maxX=(this.option("nTotalContents")-1)*-this._nRange;this._nX=this._aPos[this.getContentIndex()]}else{this._htSize.maxY=(this.option("nTotalContents")-1)*-this._nRange;this._nY=this._aPos[this.getContentIndex()]}this._updateFlickInfo();if(!this._bUseCircular){this._oAnimation.move(this._nX,this._nY)}},_restorePanel:function(c){c=c||this.getElement();var f=this.getTotalPanels(),g=this._bUseH?"left":"top",b=this._getIndexByElement(c);this._htWElement.container.css(this._oAnimation.p("Transform"),this._getTranslate(0));var a=0;var e=Math.floor(f/2);for(var d=0;d<f;d++){a=d-b;if(this._bUseCircular){if(a>e){a=a-f}else{if(a<-e){a=a+f}}}this._htWElement.aPanel[d].css(g,(a*20)+"%");if(a==0){this._htWElement.aPanel[d].css("zIndex",10)}else{this._htWElement.aPanel[d].css("zIndex",1)}}},_getPosValue:function(a){return this._hasOffsetBug()?a:this._getTranslate(a)},_panelEndAfterCall:function(a){if(this._bUseCircular){this._restorePanel()}},_moveAfterCall:function(a){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:a.bNext,startIndex:this._nPosToIndex}))},getIndexByElement:function(c){var b=-1;for(var a=0,d=this._htWElement.aPanel.length;a<d;a++){if(this._htWElement.aPanel[a].$value()===c){b=a;break}}return b},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick);jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){var a=this.constructor.getInstance();a.push(this);this._htEventHandler={};this._htOption={};this._htOption._htSetter={}},option:function(e,c){switch(typeof e){case"undefined":var d={};for(var a in this._htOption){if(!(a=="htCustomEventHandler"||a=="_htSetter")){d[a]=this._htOption[a]}}return d;case"string":if(typeof c!="undefined"){if(e=="htCustomEventHandler"){if(typeof this._htOption[e]=="undefined"){this.attach(c)}else{return this}}this._htOption[e]=c;if(typeof this._htOption._htSetter[e]=="function"){this._htOption._htSetter[e](c)}}else{return this._htOption[e]}break;case"object":for(var b in e){if(b=="htCustomEventHandler"){if(typeof this._htOption[b]=="undefined"){this.attach(e[b])}else{continue}}if(b!=="_htSetter"){this._htOption[b]=e[b]}if(typeof this._htOption._htSetter[b]=="function"){this._htOption._htSetter[b](e[b])}}break}return this},optionSetter:function(c,a){switch(typeof c){case"undefined":return this._htOption._htSetter;case"string":if(typeof a!="undefined"){this._htOption._htSetter[c]=jindo.$Fn(a,this).bind()}else{return this._htOption._htSetter[c]}break;case"object":for(var b in c){this._htOption._htSetter[b]=jindo.$Fn(c[b],this).bind()}break}return this},fireEvent:function(b,k){k=k||{};var d=this["on"+b],c=this._htEventHandler[b]||[],h=typeof d=="function",g=c.length>0;if(!h&&!g){return true}c=c.concat();k.sType=b;if(typeof k._aExtend=="undefined"){k._aExtend=[];k.stop=function(){if(k._aExtend.length>0){k._aExtend[k._aExtend.length-1].bCanceled=true}}}k._aExtend.push({sType:b,bCanceled:false});var f=[k],e,j;for(e=2,j=arguments.length;e<j;e++){f.push(arguments[e])}if(h){d.apply(this,f)}if(g){var a;for(e=0,a;(a=c[e]);e++){a.apply(this,f)}}return !k._aExtend.pop().bCanceled},attach:function(c,a){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(d,e){this.attach(e,d)},this).bind());return this}var b=this._htEventHandler[c];if(typeof b=="undefined"){b=this._htEventHandler[c]=[]}b.push(a);return this},detach:function(e,b){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(f,g){this.detach(g,f)},this).bind());return this}var d=this._htEventHandler[e];if(d){for(var a=0,c;(c=d[a]);a++){if(c===b){d=d.splice(a,1);break}}}return this},detachAll:function(c){var b=this._htEventHandler;if(arguments.length){if(typeof b[c]=="undefined"){return this}delete b[c];return this}for(var a in b){delete b[a]}return this}});jindo.Component.factory=function(b,f){var c=[],a;if(typeof f=="undefined"){f={}}for(var d=0,e;(e=b[d]);d++){a=new this(e,f);c[c.length]=a}return c};jindo.Component.getInstance=function(){if(typeof this._aInstance=="undefined"){this._aInstance=[]}return this._aInstance};jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false},isActivating:function(){return this._bIsActivating},activate:function(){if(this.isActivating()){return this}this._bIsActivating=true;if(arguments.length>0){this._onActivate.apply(this,arguments)}else{this._onActivate()}return this},deactivate:function(){if(!this.isActivating()){return this}this._bIsActivating=false;if(arguments.length>0){this._onDeactivate.apply(this,arguments)}else{this._onDeactivate()}return this}}).extend(jindo.Component);new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.Component"]})');jindo.Timer=jindo.$Class({$init:function(){this._nTimer=null;this._nLatest=null;this._nRemained=0;this._nDelay=null;this._fRun=null;this._bIsRunning=false},start:function(b,a){this.abort();this._nRemained=0;this._nDelay=a;this._fRun=b;this._bIsRunning=true;this._nLatest=this._getTime();this.fireEvent("wait");this._excute(this._nDelay,false);return true},isRunning:function(){return this._bIsRunning},_getTime:function(){return new Date().getTime()},_clearTimer:function(){var a=false;if(this._nTimer){clearInterval(this._nTimer);this._bIsRunning=false;a=true}this._nTimer=null;return a},abort:function(){var a=this._clearTimer();if(a){this.fireEvent("abort");this._fRun=null}return a},pause:function(){var a=this._getTime()-this._nLatest;this._nRemained=Math.max(this._nDelay-a,0);return this._clearTimer()},_excute:function(b,a){var c=this;this._clearTimer();this._bIsRunning=true;var d=function(e){if(c._nTimer||e){c.fireEvent("run");var f=c._fRun();c._nLatest=c._getTime();if(!f){if(!e){clearInterval(c._nTimer)}c._nTimer=null;c._bIsRunning=false;c.fireEvent("end");return}c.fireEvent("wait");if(a||e){c._excute(c._nDelay,false)}}};if(b>-1){this._nTimer=setInterval(d,b)}else{d(true)}},resume:function(){if(!this._fRun||this.isRunning()){return false}this._bIsRunning=true;this.fireEvent("wait");this._excute(this._nRemained,true);this._nRemained=0;return true}}).extend(jindo.Component);new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.UIComponent"]})');jindo.WatchInput=jindo.$Class({_bTimerRunning:false,_bFocused:false,_sPrevValue:"",$init:function(a,b){var c={nInterval:100,bUseTimerOnIE:false,sKeyEvent:"keyup",bPermanent:false,bActivateOnload:true};this.option(c);this.option(b||{});this._elInput=jindo.$(a);this._oTimer=new jindo.Timer();this._bIE=jindo.$Agent().navigator().ie;this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyEvent=jindo.$Fn(this._onKeyEvent,this);this._wfStartTimer=jindo.$Fn(this._startTimer,this);this._wfStopTimer=jindo.$Fn(this._stopTimer,this);if(this.option("bActivateOnload")){this.activate(true)}},getInput:function(){return this._elInput},setInputValue:function(a){this.getInput().value=a;this.setCompareValue(a);return this},getCompareValue:function(){return this._sPrevValue},setCompareValue:function(a){this._sPrevValue=a;return this},fireChangeEvent:function(){var a=this.getInput(),b=a.value;this.setCompareValue(b);this.fireEvent("change",{elInput:a,sText:b});return this},start:function(a){return this.activate(a||false)},stop:function(){return this.deactivate()},_onActivate:function(b){this.setCompareValue("");var a=this.getInput();this._wfFocus.attach(a,"focus");if(this._bIE&&!this.option("bUseTimerOnIE")){this.fireEvent("start");this._wfKeyEvent.attach(a,this.option("sKeyEvent"))}else{if(this._isTimerRunning()){return}this.fireEvent("start");if(this.option("bPermanent")){this._startTimer()}else{this._wfStartTimer.attach(a,"focus");this._wfStopTimer.attach(a,"blur")}}this._wfBlur.attach(a,"blur");if(b||false){this.compare()}},_onDeactivate:function(){var a=this.getInput();this._wfFocus.detach(a,"focus");this._wfKeyEvent.detach(a,this.option("sKeyEvent"));this._stopTimer();this._wfStartTimer.detach(a,"focus");this._wfStopTimer.detach(a,"blur");this._wfBlur.detach(a,"blur");this.fireEvent("stop")},getInterval:function(){return this.option("nInterval")},setInterval:function(a){this.option("nInterval",a);return this},_isTimerRunning:function(){return this._bTimerRunning},_startTimer:function(){if(this._isTimerRunning()){return}this._bTimerRunning=true;this.fireEvent("timerStart");this.compare();var a=this;this._oTimer.start(function(){a.compare();return true},this.getInterval())},_stopTimer:function(){if(this._isTimerRunning()){this._oTimer.abort();this._bTimerRunning=false;this.compare();this.fireEvent("timerStop")}},_onKeyEvent:function(){this.compare()},_onFocus:function(){this._bFocused=true;this.fireEvent("focus")},_onBlur:function(){this._bFocused=false;this.fireEvent("blur")},compare:function(){if(this.getInput().value!=this.getCompareValue()){this.fireChangeEvent()}return this}}).extend(jindo.UIComponent);new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.UIComponent"]})');jindo.LayerManager=jindo.$Class({_bIsActivating:false,_bIsHiding:false,_bIsShowing:false,_aLink:null,$init:function(a,b){this.option({sCheckEvent:"click",nCheckDelay:100,nShowDelay:0,nHideDelay:100});this.option(b||{});this.setLayer(a);this._aLink=[];this._oShowTimer=new jindo.Timer();this._oHideTimer=new jindo.Timer();this._oEventTimer=new jindo.Timer();this._wfOnEvent=jindo.$Fn(this._onEvent,this);this.getVisible();this.activate()},_onActivate:function(){this._wfOnEvent.attach(document,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfOnEvent.detach(document,this.option("sCheckEvent"))},getVisible:function(){return this._wel.visible()},_check:function(d){var b=jindo.$Element(d);for(var c=0,a,e;(a=this._aLink[c]);c++){e=jindo.$Element(a);if(e){a=e.$value();if(a&&(d==a||b.isChildOf(a))){return true}}}return false},_find:function(c){for(var b=0,a;(a=this._aLink[b]);b++){if(a==c){return b}}return -1},getLayer:function(){return this._el},setLayer:function(a){this._el=jindo.$(a);this._wel=jindo.$Element(a);return this},getLinks:function(){return this._aLink},setLinks:function(b){this._aLink=jindo.$A(b).unique().$value();return this},link:function(b){if(arguments.length>1){for(var c=0,a=arguments.length;c<a;c++){this.link(arguments[c])}return this}if(this._find(b)!=-1){return this}this._aLink.push(b);return this},unlink:function(c){if(arguments.length>1){for(var d=0,b=arguments.length;d<b;d++){this.unlink(arguments[d])}return this}var a=this._find(c);if(a>-1){this._aLink.splice(a,1)}return this},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventShow:function(){this._bIsShowing=false;this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventBeforeHide:function(){var a=this.fireEvent("beforeHide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()});if(!a){this._bIsHiding=false}return a},_fireEventHide:function(){this._bIsHiding=false;this.fireEvent("hide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_show:function(c,a){var b=this;this._oEventTimer.abort();this._bIsShowing=true;this._bIsHiding=false;if(a<=0){b._oHideTimer.abort()}this._oShowTimer.start(function(){c()},a)},_hide:function(c,a){var b=this;this._bIsShowing=false;this._bIsHiding=true;if(a<=0){b._oShowTimer.abort()}this._oHideTimer.start(function(){c()},a)},show:function(a){if(typeof a=="undefined"){a=this.option("nShowDelay")}var b=this;this._show(function(){if(!b.getVisible()){if(b._fireEventBeforeShow()){b._wel.show();b._fireEventShow()}}},a);return this},hide:function(a){if(typeof a=="undefined"){a=this.option("nHideDelay")}var b=this;this._hide(function(){if(b.getVisible()){if(b._fireEventBeforeHide()){b._wel.hide();b._fireEventHide()}}},a);return this},toggle:function(a){if(!this.getVisible()||this._bIsHiding){this.show(a||this.option("nShowDelay"))}else{this.hide(a||this.option("nHideDelay"))}return this},_onEvent:function(b){var c=b.element,a=this;this._oEventTimer.start(function(){if(!a._bIsHiding&&a.getVisible()){if(a._check(c)){if(!a._bIsShowing){a.fireEvent("ignore",{sCheckEvent:a.option("sCheckEvent")});a._oHideTimer.abort();a._bIsHiding=false}}else{if(typeof c.tagName!="undefined"){a.hide()}}}},this.option("nCheckDelay"))}}).extend(jindo.UIComponent);new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.Component"]})');jindo.LayerPosition=jindo.$Class({$init:function(b,a,c){this.option({sPosition:"outside-bottom",sAlign:"left",sValign:"",nTop:0,nLeft:0,bAuto:false});this.option(c||{});this.setElement(b);if(a){this.setLayer(a)}if(b&&a){this.setPosition()}this._wfSetPosition=jindo.$Fn(function(){var d=this._elLayer;if(d&&this._welLayer.visible()){if(this.fireEvent("beforeAdjust",{elLayer:d,htCurrentPosition:this.getCurrentPosition(),htAdjustedPosition:this._adjustPosition(this.getCurrentPosition())})){this.setPosition();this.fireEvent("adjust",{elLayer:d,htCurrentPosition:this.getCurrentPosition()})}}},this);if(this.option("bAuto")){this._wfSetPosition.attach(window,"scroll").attach(window,"resize")}},getElement:function(){return this._el},setElement:function(a){this._wel=this._el=jindo.$(a);if(this._el){this._wel=jindo.$Element(a)}return this},getLayer:function(){return this._elLayer},setLayer:function(a){this._elLayer=jindo.$(a);this._welLayer=jindo.$Element(a);if(this._elLayer.parentNode!=document.body){document.body.appendChild(this._elLayer)}return this},_isPosition:function(b,a){if(b.sPosition.indexOf(a)>-1){return true}return false},_setLeftRight:function(i,b){var c=this.getElement(),e=this.getLayer(),g=c.offsetWidth,d=e.offsetWidth;if(c==document.body){g=jindo.$Document().clientSize().width}var a=this._isPosition(i,"left"),h=this._isPosition(i,"right"),f=this._isPosition(i,"inside");if(a){if(f){b.nLeft+=i.nLeft}else{b.nLeft-=d;b.nLeft-=i.nLeft}}else{if(h){b.nLeft+=g;if(f){b.nLeft-=d;b.nLeft-=i.nLeft}else{b.nLeft+=i.nLeft}}else{if(i.sAlign=="left"){b.nLeft+=i.nLeft}if(i.sAlign=="center"){b.nLeft+=(g-d)/2}if(i.sAlign=="right"){b.nLeft+=g-d;b.nLeft-=i.nLeft}}}return b},_setVerticalAlign:function(e,f){var c=this.getElement(),b=this.getLayer(),a=c.offsetHeight,d=b.offsetHeight;if(c==document.body){a=jindo.$Document().clientSize().height}switch(e.sValign){case"top":f.nTop+=e.nTop;break;case"middle":f.nTop+=(a-d)/2;break;case"bottom":f.nTop+=a-d-e.nTop;break}return f},_adjustScrollPosition:function(a){if(this.getElement()==document.body){var b=jindo.$Document().scrollPosition();a.nTop+=b.top;a.nLeft+=b.left}return a},getPosition:function(o){if(typeof o!="object"){o=this.option()}if(typeof o.nTop=="undefined"){o.nTop=0}if(typeof o.nLeft=="undefined"){o.nLeft=0}var a,k=this._isPosition(o,"center"),i=this._isPosition(o,"inside"),j=this._isPosition(o,"top"),v=this._isPosition(o,"bottom"),p=this._isPosition(o,"left"),c=this._isPosition(o,"right");if(p){a="left"}if(c){a="right"}if(j){a="top"}if(v){a="bottom"}if(k){a="center"}var b=this.getElement(),q=jindo.$Element(b),s=this.getLayer(),n=jindo.$Element(s),g=q.offset(),h=b.offsetWidth,r=b.offsetHeight,u,d=s.offsetWidth,f=s.offsetHeight,l={nTop:g.top,nLeft:g.left};if(b==document.body){u=jindo.$Document().clientSize();h=u.width;r=u.height}d+=parseInt(n.css("marginLeft"),10)+parseInt(n.css("marginRight"),10)||0;f+=parseInt(n.css("marginTop"),10)+parseInt(n.css("marginBottom"),10)||0;switch(a){case"center":l.nTop+=(r-f)/2;l.nTop+=o.nTop;l.nLeft+=(h-d)/2;l.nLeft+=o.nLeft;break;case"top":if(i){l.nTop+=o.nTop}else{l.nTop-=o.nTop+f}l=this._setLeftRight(o,l);break;case"bottom":l.nTop+=r;if(i){l.nTop-=o.nTop+f}else{l.nTop+=o.nTop}l=this._setLeftRight(o,l);break;case"left":if(i){l.nLeft+=o.nLeft}else{l.nLeft-=o.nLeft+d}l=this._setVerticalAlign(o,l);break;case"right":l.nLeft+=h;if(i){l.nLeft-=o.nLeft+d}else{l.nLeft+=o.nLeft}l=this._setVerticalAlign(o,l);break}l=this._adjustScrollPosition(l);if(jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version<8&&window.external){try{var t=(window!=top)&&(window.frameElement)&&!window.frameElement.frameBorder;if(t){l.nLeft-=2;l.nTop-=2}}catch(m){}}return l},setPosition:function(c){var a=jindo.$Element(this.getLayer()),b=a.visible();if(!b){a.show()}a.css("left","-9999px").css("top","0px");if(typeof c=="undefined"){c=this.getPosition()}if(this.option("bAuto")){c=this._adjustPosition(c)}a.css("left",c.nLeft+"px").css("top",c.nTop+"px");if(!b){a.hide()}return this},getCurrentPosition:function(){var a=jindo.$Element(this.getLayer());return{nTop:parseInt(a.css("top"),10),nLeft:parseInt(a.css("left"),10)}},_isFullyVisible:function(c){var e=this.getLayer(),i=jindo.$Element(e),g=jindo.$Document().scrollPosition(),h=g.top,b=g.left,a=jindo.$Document().clientSize(),d=e.offsetWidth+(parseInt(i.css("marginLeft"),10)+parseInt(i.css("marginRight"),10)||0),f=e.offsetHeight+(parseInt(i.css("marginTop"),10)+parseInt(i.css("marginBottom"),10)||0);if(c.nLeft>=0&&c.nTop>=0&&a.width>=c.nLeft-b+d&&a.height>=c.nTop-h+f){return true}return false},_mirrorHorizontal:function(c){if(c.sAlign=="center"||c.sPosition=="inside-center"){return c}var a={};for(var b in c){a[b]=c[b]}if(this._isPosition(a,"right")){a.sPosition=a.sPosition.replace(/right/,"left")}else{if(this._isPosition(a,"left")){a.sPosition=a.sPosition.replace(/left/,"right")}else{if(a.sAlign=="right"){a.sAlign="left"}else{if(a.sAlign=="left"){a.sAlign="right"}}}}return a},_mirrorVertical:function(c){if(c.sValign=="middle"||c.sPosition=="inside-center"){return c}var a={};for(var b in c){a[b]=c[b]}if(this._isPosition(a,"top")){a.sPosition=a.sPosition.replace(/top/,"bottom")}else{if(this._isPosition(a,"bottom")){a.sPosition=a.sPosition.replace(/bottom/,"top")}else{if(a.sValign=="top"){a.sValign="bottom"}else{if(a.sValign=="bottom"){a.sValign="top"}}}}return a},_adjustPosition:function(d){var c=this.option(),a=[];a.push(d);a.push(this.getPosition(this._mirrorHorizontal(c)));a.push(this.getPosition(this._mirrorVertical(c)));a.push(this.getPosition(this._mirrorVertical(this._mirrorHorizontal(c))));for(var b=0,e;(e=a[b]);b++){if(this._isFullyVisible(e)){d=e;break}}return d}}).extend(jindo.Component);new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.UIComponent"]})');jindo.NumericStepper=jindo.$Class({_bIsOnFocus:false,$init:function(a,b){this._el=jindo.$(a);this.option({sClassPrefix:"ns-",bActivateOnload:true,bUseMouseWheel:false,nStep:1,nDecimalPoint:0,nMin:-Infinity,nMax:Infinity,nDefaultValue:0,bInputReadOnly:true});this.option(b||{});this._assignHTMLElements();this._wfPlusClick=jindo.$Fn(this._onPlusClick,this);this._wfMinusClick=jindo.$Fn(this._onMinusClick,this);this._wfWheel=jindo.$Fn(this._onWheel,this);this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){var a=this.option("sClassPrefix");this._elInput=jindo.$$.getSingle("."+a+"input",this._el);this._elPlusButton=jindo.$$.getSingle("."+a+"plus",this._el);this._elMinusButton=jindo.$$.getSingle("."+a+"minus",this._el)},reset:function(){this._elInput.value=this.option("nDefaultValue").toFixed(this.option("nDecimalPoint"))},getValue:function(){return parseFloat(this._elInput.value)},setValue:function(d){if(isNaN(d)){this._elInput.value=this.option("nDefaultValue");return}d=d.toFixed(this.option("nDecimalPoint"));var a=this.option("nMin"),b=this.option("nMax"),c={nValue:d,nMin:a,nMax:b};if(d>b||d<a){this.fireEvent("overLimit",c);this._elInput.value=Math.max(a,Math.min(b,d));return}if(!this.fireEvent("beforeChange",c)){return}this._elInput.value=c.nValue;this.fireEvent("change",c)},getBaseElement:function(){return this._el},getInputElement:function(){return this._elInput},getPlusElement:function(){return this._elPlusButton},getMinusElement:function(){return this._elMinusButton},isFocused:function(){return this._bIsOnFocus},_onActivate:function(){var a=this.getInputElement();this._wfPlusClick.attach(this.getPlusElement(),"click");this._wfMinusClick.attach(this.getMinusElement(),"click");this._wfFocus.attach(a,"focus");this._wfBlur.attach(a,"blur");if(this.option("bUseMouseWheel")){this._wfWheel.attach(a,"mousewheel")}this._elInput.readOnly=this.option("bInputReadOnly");this.reset()},_onDeactivate:function(){var a=this.getInputElement();this._wfPlusClick.detach(this.getPlusElement(),"click");this._wfMinusClick.detach(this.getMinusElement(),"click");this._wfFocus.detach(a,"focus");this._wfBlur.detach(a,"blur");this._wfWheel.detach(a,"mousewheel")},_onMinusClick:function(a){this.setValue(this.getValue()-this.option("nStep"))},_onPlusClick:function(a){this.setValue(this.getValue()+this.option("nStep"))},_onWheel:function(a){if(this.isFocused()){a.stop(jindo.$Event.CANCEL_DEFAULT);if(a.mouse().delta>0){this._onPlusClick()}else{this._onMinusClick()}}},_onFocus:function(a){this._bIsOnFocus=true},_onBlur:function(a){this._bIsOnFocus=false;this.setValue(this.getValue());this._elInput.readOnly=this.option("bInputReadOnly")}}).extend(jindo.UIComponent);var ghtPugConfig={sInitializeEvent:"domready",bUseScriptLazyLoading:false,bUseAutoDestroy:false,bUseAccessModifier:true,bUseParameterTypeCheck:false,htMessage:{MSG0001:"",MSG0038:"  ?",MSG0039:"  ?",MSG0040:"   ",MSG0041:"    .       .",MSG0042:"   ",MSG0043:"  .      ."},htUrl:{URL0001:""}};if(typeof console=="undefined"){console={log:function(){},debug:function(){}}}var pug={MODULE_NAME:"pug",_htInstance:{},_htEventData:{},_aInitializeModuleList:[],_htModuleSource:{},_htCommonCallback:{},_htMessageCallback:{},initialize:function(){this.variables.applyConfig(window.ghtPugConfig);var a=jindo.$Fn(function(){this._setFunctionName();this._attachEvent();this._executeModule()},this).bind();if(this.variables.get("bScriptLazyLoading")){JSLL.initialize({sScriptUrl:this.variables.get("sScriptUrl"),sScriptVersion:this.variables.get("sScriptVersion"),fCallback:a})}else{a()}},_setFunctionName:function(){var c=[this,this.utility];for(var b=0;b<c.length;b++){for(var a in c[b]){if(typeof(c[b][a])=="function"){c[b][a]["__name"]=c[b][a]["__sName"]=c[b]["MODULE_NAME"]+"."+a}}}},_attachEvent:function(){if(this.variables.get("bUseAutoDestroy")){this._htEventData.unload=jindo.$Fn(this._destroy,this).attach(window,"beforeunload")}},createModule:function(k,g,l){var j=this.utility.cloningObject(this.base);var f=k.split(".");var b=[];var d=window,a={};var e=window.ghtPugConfig?window.ghtPugConfig.bUseAccessModifier:true;for(var c=0;c<f.length;c++){if(d[f[c]]){d=d[f[c]]}else{d=d[f[c]]={}}b.push(d);if(b[c-1]){d.oParent=b[c-1]}}for(var h in g){if(h=="initialize"||h=="destroy"){j["__"+h]=g[h]}else{j[h]=g[h]}}for(var h in j){if(typeof(j[h])=="function"){j[h].name=j[h].__sName=(k?k+".":"")+h;j[h].__sModuleName=k;j[h].__oContext=j}if(e){a[h]=j[h];if(typeof(j[h])=="function"&&/^[^_]\w+$/.test(h)){d[h]=this.utility.bindFunction(a[h],a)}else{if(typeof(j[h])=="function"&&/^[_][^_]+$/.test(h)){d[h]=this.utility.bindFunction(function(m,i){pug.throwError(m+"."+i+"()  .")},d,[k,h])}else{if(/^[^_][_0-9A-Z]+$/.test(h)){d[h]=j[h]}}}}else{d[h]=j[h]}}if(e){d.MODULE_NAME=a.MODULE_NAME=k||"";a.oParent=d.oParent;a.__oInstance=d;a.__htDefinitionOption=l||{};d.attachEvent=this.utility.bindFunction(function(){this.__htCustomEventData.attach.push(arguments)},a);d.detachEvent=this.utility.bindFunction(function(){this.__htCustomEventData.detach.push(arguments)},a);d.detachAllEvent=this.utility.bindFunction(function(){this.__htCustomEventData.detachAll.push(arguments)},a);this._htModuleSource[k]=a}else{d.MODULE_NAME=k||"";d.__oInstance=d;d.__htDefinitionOption=l||{};d.attachEvent=this.utility.bindFunction(function(){this.__htCustomEventData.attach.push(arguments)},d);d.detachEvent=this.utility.bindFunction(function(){this.__htCustomEventData.detach.push(arguments)},d);d.detachAllEvent=this.utility.bindFunction(function(){this.__htCustomEventData.detachAll.push(arguments)},d)}j=null;a=null;g=null;if(l&&l.bAutoInitialize){this.registerModule(k)}return d},_i:0,checkParameter:function(e,c,d,f){for(var b=0,a=true;b<f.length;b++){if(!jindo.$Jindo.isUndefined(f[b])){a=false;switch(d[b]){case"a":a=jindo.$Jindo.isArray(f[b]);break;case"s":a=jindo.$Jindo.isString(f[b]);break;case"b":a=jindo.$Jindo.isBoolean(f[b]);break;case"n":a=jindo.$Jindo.isNumeric(f[b]);break;case"f":a=jindo.$Jindo.isFunction(f[b]);break;case"el":a=jindo.$Jindo.isElement(f[b]);break;case"rx":a=jindo.$Jindo.isRegExp(f[b]);break;case"d":a=jindo.$Jindo.isDate(f[b]);break;case"ht":a=jindo.$Jindo.isHash(f[b]);break;case"o":a=f[b] instanceof Object;break;case"e":a=f[b] instanceof Event;break;case"wel":a=f[b] instanceof $Element;break;case"wa":a=f[b] instanceof $Array;break;case"ws":a=f[b] instanceof $S;break;case"wf":a=f[b] instanceof $Fn;break;case"we":a=f[b] instanceof $Event;break;case"wht":a=f[b] instanceof $H;break}if(!a){}}}},registerModule:function(a,b){if(a){this._aInitializeModuleList.push({sModuleName:typeof(a)=="string"?a:"",oContext:typeof(a)=="string"?null:a,htOption:b||{}})}else{alert(pug.variables.getMessage("PUG_MESSAGE_0004"))}},throwError:function(c){var b=arguments.callee.caller;var d=b.__sName||"";var a=(d?d+"() ":"")+"   .\n-   : "+c;var e=function(){this.name="PugException";this.message=a;this.methodName=d;this.caller=b};e.prototype=new Error;throw new e()},_executeModule:function(){var f=this._aInitializeModuleList;for(var a=0,c=f.length;a<c;a++){var b=f[a];b.oContext=b.oContext||this.utility.getObjectByName(b.sModuleName);if(b.oContext.initialize&&typeof(b.oContext.initialize)=="function"){try{b.oContext.initialize(b.htOption)}catch(d){throw (d)}}}},executeCallback:function(a,d){if(a){var b=a.split(".");var f=window;for(var c=0,e=b.length-1;c<e;c++){f=f[b[c]]}return f[b[e]].call(f,pug.utility.cloningObject(d))}},checkClass:function(){var aList=[];for(var i=0;i<arguments.length;i++){if(!eval(arguments[i])){aList.push(arguments[i])}}if(aList.length){pug.variables.alertMessage("PUG_MESSAGE_0005",[aList.join(", ")])}},isLoadedModule:function(sModuleName){try{return !!eval(sModuleName)}catch(e){return false}},isInitializedModule:function(sModuleName){var oModule=eval(sModuleName);return oModule&&typeof(oModule.isInitialized)=="function"&&oModule.isInitialized()==true?true:false},addCommonCallback:function(c,b,a){if(c&&b){this._htCommonCallback[c]=this._htCommonCallback[c]||[];this._htCommonCallback[c].push({fCallback:b,htOption:a||{}})}},removeCommonCallback:function(b,a){if(b&&this._htCommonCallback[b]){if(a){this._htCommonCallback[b]=$A(this._htCommonCallback[b]).refuse(a).$value()}else{this._htCommonCallback[b]=[]}}},executeCommonCallback:function(){var sMethodFullName=arguments.callee.caller.__sName;var aCallbackList=this._htCommonCallback[sMethodFullName];if(sMethodFullName&&aCallbackList){var oModule=eval(arguments.callee.caller.__sModuleName);var aArguments=arguments.length?arguments:[];for(var i=0,oContext,bResult=true;i<aCallbackList.length;i++){oContext=aCallbackList[i].htOption.oContext||oModule;bResult=aCallbackList[i].fCallback.apply(oContext,aArguments);if(bResult===false){return false}}return true}else{return false}},notifyMessage:function(d,c){if(d){var e="";var a=d.split(":");if(a.length>1){e=a[0];d=a[1]}c=c||{};c.sMessage=d;c.sModuleName=arguments.callee.caller.__sModuleName||"";for(var b=0,a=(this._htMessageCallback[d]||[]);b<a.length;b++){if(!e&&(!this._htMessageCallback[d][b].sCallerModuleName||this._htMessageCallback[d][b].sCallerModuleName==c.sModuleName)){this._htMessageCallback[d][b].fCallback.call(this._htMessageCallback[d][b].oContext,c)}else{if(e==this._htMessageCallback[d][b].sModuleName){this._htMessageCallback[d][b].fCallback.call(this._htMessageCallback[d][b].oContext,c)}}}}else{pug.throwError("aa")}},subscribeMessage:function(b,e,c){if(b&&e){var d="";var a=b.split(":");if(a.length>1){d=a[0];b=a[1]}if(!this._htMessageCallback[b]){this._htMessageCallback[b]=[]}this._htMessageCallback[b].push({fCallback:e,sCallerModuleName:d,sModuleName:arguments.callee.caller.__sModuleName,oContext:arguments.callee.caller.__oContext,nPriority:c||1000});this._htMessageCallback[b]=pug.utility.sortArray(this._htMessageCallback[b],"asc","nPriority")}else{pug.throwError("aa")}},unsubscribeMessage:function(c){if(c){var d="";var a=c.split(":");if(a.length>1){d=a[0];c=a[1]}for(var b=0,a=(this._htMessageCallback[c]||[]);b<a.length;b++){if(arguments.callee.caller.__oContext==this._htMessageCallback[c][b].oContext){if(!d||d==this._htMessageCallback[c][b].sCallerModuleName){a.splice(b,1);b--}}}}else{pug.throwError("aa")}},_detachEvent:function(){if(pug.isLoadedModule("pug.event.delegator")){pug.event.delegator.detachAll()}},_destroy:function(){this._detachEvent();var d=this._aInitializeModuleList;for(var a=0,c=d.length;a<c;a++){var b=d[a];if(b.oContext.destroy&&typeof(b.oContext.destroy)=="function"){b.oContext.destroy()}}},error:function(a){alert(a);throw Error(a)}};if(window.ghtPugConfig){jindo.$Fn(pug.initialize,pug).attach(window.ghtPugConfig.sInitializeEvent=="domready"?document:window,window.ghtPugConfig.sInitializeEvent)}else{jindo.$Fn(pug.initialize,pug).attach(document,"domready")};pug.base={_htElementSelector:{},_htDefaultOption:{},__htDefinitionOption:{},__htCustomEventData:{attach:[],detach:[],detachAll:[]},__oBaseComponent:null,__bInitialized:false,initialize:function(a){this.__oBaseComponent=new pug.Component({htElementSelector:this._htElementSelector,sModuleName:this.MODULE_NAME,bNotUseElementSelector:this.__htDefinitionOption.bNotUseElementSelector});this.__bindMethod();this.__bindCustomEventHandler();this._setOption(this._htDefaultOption);this._setOption(a);this.__initialize(a);this.__bInitialized=true},isInitialized:function(){return this.__bInitialized},__bindMethod:function(){this.__oInstance.attachEvent=pug.utility.bindFunction(this.__oBaseComponent.attach,this.__oBaseComponent);this.__oInstance.detachEvent=pug.utility.bindFunction(this.__oBaseComponent.detach,this.__oBaseComponent);this.__oInstance.detachAllEvent=pug.utility.bindFunction(this.__oBaseComponent.detachAll,this.__oBaseComponent);this._fireEvent=pug.utility.bindFunction(this.__oBaseComponent.fireEvent,this.__oBaseComponent);this._getOption=this._setOption=pug.utility.bindFunction(this.__oBaseComponent.option,this.__oBaseComponent);for(var a in this.__oBaseComponent){if(typeof(this.__oBaseComponent[a])=="function"&&/^_[^_$]\w+$/.test(a)){this[a]=pug.utility.bindFunction(this.__oBaseComponent[a],this.__oBaseComponent)}}},__bindCustomEventHandler:function(){var b=["attach","detach","detachAll"];for(var c=0,e=b.length,a=0;c<e;c++){for(var a=0,d=this.__htCustomEventData[b[c]].length;a<d;a++){this.__oBaseComponent[b[c]].apply(this.__oBaseComponent,this.__htCustomEventData[b[c]][a])}}},__destroyInstance:function(){for(var a in this._htInstance){if(this._htInstance[a]&&typeof(this._htInstance[a].destroy)=="function"){this._htInstance[a].destroy();delete this._htInstance[a]}}},__destroyBaseComponent:function(){if(this.__oBaseComponent){this.__oBaseComponent.destroy();delete this.__oBaseComponent}},__destroyVariables:function(){for(var a in this){delete this[a]}},destroy:function(){if(this.__bInitialized){if(typeof(this.__destroy)=="function"){var a=this.__destroy()===false?false:true}this.__destroyInstance();this.__destroyBaseComponent();if(a){this.__destroyVariables()}}}};pug.utility={MODULE_NAME:"pug.utility",_sScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",_welDimmedLayer:null,_oTplDimmedLayer:jindo.$Template(["{set nOpacityAlpha=(=nOpacity * 10)}",'<div class="_stopDefault _stopBubble" style="z-index:{=nZIndex};width:100%;height:100%;position:fixed;top:0;left:0;background:#000;opacity:{=nOpacity};filter:alpha(opacity={=nOpacityAlpha})"></div>'].join("")),_htAttribute:{},_bResizeFlag:false,extend:function(b,c){for(var a in c){b[a]=c[a]}return b},stripScript:function(a){return a.replace(new RegExp(this._sScriptFragment,"img"),"")},extractScript:function(c){var b=new RegExp(this._sScriptFragment,"img");var a=new RegExp(this._sScriptFragment,"im");return jindo.$A(c.match(b)||[]).map(function(d){return(d.match(a)||["",""])[1]}).$value()},evaluateScript:function(sString){return jindo.$A(this.extractScript(sString)).map(function(sScript){return eval(sScript)})},bindFunction:function(d,a,c){c=c||[];var b=function(){var e=Array.prototype.slice.call(arguments,0);if(c.length){e=c.concat(e)}return d.apply(a||window,e)};if(d.__sName){b.__sModuleName=d.__sModuleName;b.name=b.__sName=d.__sName}return b},getObjectByName:function(d){var a=d.split(".");var c=window;for(var b=0;b<a.length;b++){if(c[a[b]]){c=c[a[b]]}else{c=c[a[b]]={}}}return c},getConstructorName:function(c){if(c&&c.constructor){var a=c.constructor.toString();var b=a.match(/function ([^\(]*)/);return(b&&b[1])||null}return null},cloningObject:function(oSourceTarget){var sConstructor;var oDestinationTarget;if((typeof oSourceTarget=="object")&&(sConstructor=this.getConstructorName(oSourceTarget))){oDestinationTarget=eval("new "+sConstructor+"()");if(oSourceTarget.prototype){for(var x in oSourceTarget.prototype){oDestinationTarget.prototype[x]=this.cloningObject(oSourceTarget.prototype[x])}}for(var y in oSourceTarget){if(oSourceTarget[y] instanceof RegExp){oDestinationTarget[y]=eval(oSourceTarget[y].toString())}else{oDestinationTarget[y]=this.cloningObject(oSourceTarget[y])}}return oDestinationTarget}oDestinationTarget=oSourceTarget;return oDestinationTarget},addSelectboxOption:function(e,d,c,b){var a=new Option(d,c,b||false);e.options[e.options.length]=a;a=null},removeSelectboxOption:function(b,a){if(a){b.options[a]=null}else{b.options.length=0}},sortArray:function(g,b,p){var h;var q=g.length;var a,x;if(q/2<1){h=g}else{if(q/2==1){var w;a=(p)?g[0][p]:g[0];x=(p)?g[1][p]:g[1];if(b=="asc"){if(a>x){w=g[1];g[1]=g[0];g[0]=w}}else{if(a<x){w=g[1];g[1]=g[0];g[0]=w}}h=[g[0],g[1]]}else{var s=Math.round(q/2)-1;var m=0;var d=0;var t=[];var o=[];if(b=="asc"){for(var n=0;n<s;n++){a=(p)?g[n][p]:g[n];x=(p)?g[s][p]:g[s];if(a>x){o[d++]=g[n]}else{t[m++]=g[n]}}for(var l=s+1;l<q;l++){a=(p)?g[l][p]:g[l];x=(p)?g[s][p]:g[s];if(a<x){t[m++]=g[l]}else{o[d++]=g[l]}}}else{for(var n=0;n<s;n++){a=(p)?g[n][p]:g[n];x=(p)?g[s][p]:g[s];if(a<x){o[d++]=g[n]}else{t[m++]=g[n]}}for(var l=s+1;l<q;l++){a=(p)?g[l][p]:g[l];x=(p)?g[s][p]:g[s];if(a>x){t[m++]=g[l]}else{o[d++]=g[l]}}}var r=t.length;var e=o.length;var f,v;if(r>1){f=arguments.callee(t,b,p)}else{f=t}if(e>1){v=arguments.callee(o,b,p)}else{v=o}h=new Array(r+e-1);var u=0;for(var n=0,c=f.length;n<c;n++){h[u++]=f[n]}h[u++]=g[s];for(var n=0,k=v.length;n<k;n++){h[u++]=v[n]}}}return h},restoreAllSpecialChar:function(b){var a=document.createElement("div");a.innerHTML=b;try{return a.textContent||a.innerText}finally{a=null}},filterOutParameter:function(k,d){var f=[];for(var e=0,h=k.length;e<h;e++){var l=k[e],a={};for(var c=0,b=d.length;c<b;c++){var g=d[c];a[g]=l[g]}f.push(a)}return f},isNotEmpty:function(a){if(a&&jindo.$S(a).trim().$value()!=""){return true}return false},isEmpty:function(a){return !this.isNotEmpty(a)},getOnlyNumber:function(a){return a.replace(/^0/,"").replace(/[^0-9]/ig,"")},toFlatten:function(d,c,b){c=c||[];b=b||{};var e="";for(var a in d){c.push(a);e=Object.prototype.toString.call(d[a]);if(e=="[object Array]"||e=="[object Object]"){this.toFlatten(d[a],c,b)}else{b[c.join(".")]=d[a]}c.pop()}return b},toHtmlEntitySpecialChars:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;")},toHtmlTagSpecialChars:function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ")},checkInstanceMethod:function(a){var c=arguments[0];for(var b=1,e=arguments.length;b<e;b++){var d=arguments[b];if(typeof c[d]!="function"){alert(d+"    .");break}}},createSubmitButton:function(a,b){if(jindo.$Element(a).test("input[type=image],input[type=submit]")){return}b=b||"";jindo.$Element(a).prepend('<input type="submit" style="position:absolute;left:-5000px;top:-5000px" value="'+b+'">')},mergeComponentMethod:function(a,b,d){for(var c in b){if(/^_|^\$|^option$|^optionSetter$|^fireEvent$|^attach$|^detach$|^detachAll$|^destroy$|^constructor$|^activate$|^deactivate$|^isActivating$/.test(c)||typeof b[c]!="function"){continue}if(a[c]){c+=d}a[c]=jindo.$Fn(b[c],b).bind()}},cutString:function(f,c,g){var b=(typeof f!="String")?f.toString():f;var h=parseInt(c,10);var a=g||"";for(var d=0,e=b.length;d<e;d++){if(d>h){return b.substring(0,d)+a}}return b},cutStringByByte:function(a,e,h){var d=(typeof a!="String")?a.toString():a;var f=parseInt(e,10);var j=h||"";for(var b=0,g=d.length,c=0;b<g;b++){c+=(d.charCodeAt(b)>128)?2:1;if(c>f){return d.substring(0,b)+j}}return d},cutStringByPixel:function(a,b,k,l){var e=(typeof a!="String")?a.toString():a;var g=parseInt(b,10);var m=k||"";var c=[];var j="";if(!this.welMeasure){this.welMeasure=jindo.$Element("<span>");this.welMeasure.css({position:"absolute",top:"-1000px",left:"-1000px"});this.welMeasure.prependTo(document.body)}else{this.welMeasure.empty()}e=e.replace(/\r?\n/gim," ");var f=0;if(l){c.push(e.substring(0,l));var f=l}else{l=0}for(var d=f,h=e.length;d<h;d++){j=e.charAt(d);if(j===" "){c.push(";")}else{c.push(j)}this.welMeasure.text(c.join("")+m);if(this.welMeasure.width()>g){return e.substring(0,((c.length-1)+(l?(-1+f):(f))))+m}}return e},cutStringByPixelMultiLine:function(a,g,d,q){var f=(typeof a!="String")?a.toString():a;var r=q||"";var b=[];var p="";var n=g.cloneNode(true);var c=jindo.$Element(g).parent();var h=jindo.$Element(c).width();var m=jindo.$Element(n);m.css({position:"absolute",top:"-1000px",left:"-1000px",width:h+"px"});m.appendTo(c);var k=0;var j=0;var l=0;for(var e=0,o=f.length;e<o;e++){p=f.charAt(e);b.push(p);if(l==d){m.text(b.join("")+r);j=m.height();if(j>k){m.leave();return f.substring(0,e-1)+r}}else{m.text(b.join(""));j=m.height();if(j>k){k=j;l++}}}m.leave();return f},comma:function(b){var d="";var c=b||0;c=(typeof c!="String")?String(c):c;if(c.indexOf(".")>-1){var a=c.split(".");c=a[0];d="."+a[1]}return c.replace(/(\d)(?=(\d{3})+$)/igm,"$1,")+d},replaceString:function(b,a){if(b){var c=b.match(/\{[0-9]\}*/g);if(c&&a){for(var d=0;d<c.length;d++){b=b.replace(c[d],(typeof a[d]!="undefined"&&a[d]!=null)?a[d]:"")}return b}else{return b}}else{return""}},convertNumber:function(a){return parseFloat(String(a).replace(/,/g,""))},convertNumberFormat:function(a){var b=String(a)||"0";return b.replace(/(\d)(?=(\d{3})+$)/gi,"$1,")},convertNumberFormatWithTemplate:function(j,d,f){var h=this.convertNumberFormat(j);if(typeof d=="undefined"||typeof f=="undefined"){return h}var l=jindo.$Template(d);var g=jindo.$Template(f);var k=[];for(var c=0,e=h.length;c<e;c++){var b=h.charAt(c);var a={"char":b};if(b==","){k.push(g.process(a))}else{k.push(l.process(a))}}return k.join("")},getImageOrignalUrl:function(a){if(!a){return""}return a.replace(/\?type=.*$/,"")},isArray:function(a){return Object.prototype.toString.call(a)=="[object Array]"},isHTMLElement:function(a){if(typeof(HTMLElement)==="object"){return(a&&(a instanceof HTMLElement))}return !!(a&&a.nodeType)},isBlankHTML:function(a){return !a.replace(/<(?!table|img|div|embed|iframe|object)[^>]*>|&nbsp;|\s*/gi,"")},getTextLengthInHtml:function(c){var a=jindo.$Element("<div>"+c+"</div>"),b=a.text().length;a.leave();return b},detachPreventSelect:function(a){if(!this._wfStopEvent){this._wfStopEvent=jindo.$Fn(this._stopEvent,this)}a=jindo.$Element(a||document.body);jindo.$Fn(this._wfStopEvent,this).detach(a,"contextmenu");jindo.$Fn(this._wfStopEvent,this).detach(a,"dragstart");jindo.$Fn(this._wfStopEvent,this).detach(a,"selectstart");a.css("MozUserSelect","")},attachPreventSelect:function(a){this.detachPreventSelect(a);a=jindo.$Element(a||document.body);jindo.$Fn(this._wfStopEvent,this).attach(a,"contextmenu");jindo.$Fn(this._wfStopEvent,this).attach(a,"dragstart");jindo.$Fn(this._wfStopEvent,this).attach(a,"selectstart");a.css("MozUserSelect","none")},_stopEvent:function(a){a.stop()},trim:function(a){if(this.isArray(a)){for(var b=0,c=a.length;b<c;b++){a[b]=this.trim(a[b])}return a}return jindo.$S(a).trim().$value()},convertPrice:function(a,l,f){var d="",b="",j="",g=["","","","","","","",""],h=[];l=l||1000;f=typeof f=="string"?f:" ";a=parseInt(a,10);if(isNaN(a)){return""}if(a<0){b="-"}a=Math.abs(a);if(a%l!=0||a==0){return b+a}for(var c=0,k=g.length;c<k;c++){if(a<l){break}var e=Math.floor((a/l)%10);if(e!=0){d=(e==1?"":e)+g[(String(l).length-2)];h.push(d)}l=l*10}d=jindo.$A(h).reverse().$value().join(f);if(d[d.length-1]!=""&&(a/10000)%10==0){j=""}return b+d+j},escapeRegExp:function(a){return a.replace(/([{}\(\)\^$&.\*\?\/\+\|\[\\\\]|\]|\-)/g,"\\$1")},dimmmedElement:function(k,t){var f=jindo.$Element(k);var j=f.width();var u=f.height();var e=f.$value().tagName.toLocaleLowerCase();var g=(e=="p"||e=="a")?false:true;var w=4096;if(g){var a=(f.css("position")=="relative")?true:false;if(jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version<=8&&u>w){var d=Math.ceil(u/w);var h=u%w;var m=[];var l=0;while(d!=1){d--;l+=w;m.push('<div style="margin-top:-'+l+"px;position:absolute;z-index:999;height:"+w+"px;width:"+j+'px;opacity:0;filter:alpha(opacity=0);background:#000"></div>')}l+=h;m.push('<div style="margin-top:-'+l+"px;position:absolute;z-index:999;height:"+h+"px;width:"+j+'px;opacity:0;filter:alpha(opacity=0);background:#000"></div>');jindo.$A(m).forEach(function(x){f.append(x)},this)}else{var s=jindo.$Element("<div>");s.css({position:"absolute",width:j+"px",height:u+"px",zIndex:999,background:"#000000",opacity:0,filter:"alpha(opacity=0)"});if(a){s.css({left:"0px"});s.css({top:"0px"})}else{s.css({marginTop:-u+"px"})}f.append(s)}}else{var c=f.offset();var b=(f.css("position")=="absolute")?true:false;var p=f.css("marginBottom");var q=parseInt(f.css("marginBottom").toLowerCase().replace("px",""),10);var v=(q)?q:0;var r=(b)?0:-(u+v);var s=jindo.$Element("<div>");var o=f.css("marginLeft");var n=f.css("marginRight");s.css({marginBottom:p,marginTop:r+"px",width:j+"px",height:u+"px",zIndex:999,background:"#000000",opacity:0,filter:"alpha(opacity=0)"});if(b){s.css({position:"absolute"})}else{var o=f.css("marginLeft");var n=f.css("marginRight");s.css({marginLeft:o,marginRight:n});var i=f.css("cssFloat");if(i){s.css({cssFloat:i})}}f.after(s)}if(t){s.addClass(t)}return s},changeClass:function(b,f,e){var a=jindo.$Element(b);var d=a.className().split(" ");for(var c=0;c<d.length;c++){if(d[c].indexOf(f)==0){a.removeClass(d[c]);break}}a.addClass(e)},resizeIframe:function(e,g){var a,c,f,b=jindo.$Agent().navigator();g=g||10;try{a=e.contentWindow.document}catch(d){return}if(a.location.href=="about:blank"){e.style.height=g+"px";return}if(b.ie&&b.version<8){c=a.body.scrollHeight}else{f=a.body.appendChild(jindo.$("<DIV>"));f.style.clear="both";c=f.offsetTop;f.parentNode.removeChild(f)}if(c<g){c=g}e.style.height=c+"px"},resizeIframeWithMargin:function(f,h,d){var a,c,g,b=jindo.$Agent().navigator();h=h||10;try{a=f.contentWindow.document}catch(e){return}if(a.location.href=="about:blank"){f.style.height=h+"px";return}if(b.ie&&b.version<8){c=a.body.scrollHeight}else{g=a.body.appendChild(jindo.$("<DIV>"));g.style.clear="both";c=g.offsetTop;g.parentNode.removeChild(g)}if(c<h){c=h}f.style.height=(c+d)+"px"},isSupportAttribute:function(a){if(!this._htAttribute){var b=document.createElement("input"),c={};this._htAttribute=(function(f){for(var d=0,e=f.length;d<e;d++){c[f[d]]=!!(f[d] in b)}return c})("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}return this._htAttribute[a]},getSelection:function(c){var e=[-1,-1];if(isNaN(c.selectionStart)){var f=document.selection.createRange().duplicate(),d=c.value.length,a=f.text.length;for(var b=0;b<d;b++){if(f.parentElement()!==c){break}f.moveStart("character",-1)}e[1]=f.text.length;e[0]=e[1]-a}else{e[0]=c.selectionStart;e[1]=c.selectionEnd}this.setSelection(c,e[0],e[1]);return e},setSelection:function(a,b,c){if(typeof c=="undefined"){c=b}if(a.setSelectionRange){a.setSelectionRange(b,c)}else{if(a.createTextRange){var d=a.createTextRange();d.collapse(true);d.moveStart("character",b);d.moveEnd("character",c-b);d.select()}}},showDimmedLayer:function(a){if(this._welDimmedLayer){this.hideDimmedLayer()}var b={nOpacity:0,nZIndex:10000};a=this.extend(b,a||{});this._welDimmedLayer=jindo.$Element(this._oTplDimmedLayer.process(a));this._welDimmedLayer.appendTo(document.body)},hideDimmedLayer:function(){this._welDimmedLayer.leave();this._welDimmedLayer=null},lcs:function(a){jindo.$Fn(function(){lcs_do(a||{})},this).delay(0)},isEmail:function(a){var b=(typeof a=="string")?this.trim(a):"";var c=b.match(/[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+(\.[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+)*@[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+(\.[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+)+/);if(c&&c[0]==b){return true}else{return false}},isEmailFirst:function(a){var b=/^[\w\d]+([-_\.]?[\w\d])*$/i;if(a&&b.test(a)){return true}return false},isEmailLast:function(b){var a=/^[\w\d]([-_\.]?[\w\d])*\.[\w]{2,3}$/i;if(b&&a.test(b)){return true}return false},getPixel:function(a){if(!this.welMeasure){this.welMeasure=jindo.$Element("<span>");this.welMeasure.css({position:"absolute",top:"-1000px",left:"-1000px"});this.welMeasure.prependTo(document.body)}else{this.welMeasure.empty()}this.welMeasure.text(a);return parseInt(this.welMeasure.width())||0},formatNumber:function(a){var c=""+a;var b=/(\d+)(\d{3})/;while(b.test(c)){c=c.replace(b,"$1,$2")}return c}};pug.createModule("pug.variables",{_htData:{bMobile:true},_htMessage:{PUG_MESSAGE_0001:"[{0}]  root     .\n\n  root    .",PUG_MESSAGE_0002:'[{0}]  root      .\n\nCSS Selector : "{1}"',PUG_MESSAGE_0003:"[{0}]  root    ,      .\n\n  root    .",PUG_MESSAGE_0004:"  .  .",PUG_MESSAGE_0005:"     ,   .\n\n{0}",PUG_MESSAGE_0006:"  URL   .",PUG_MESSAGE_0007:"    .",PUG_MESSAGE_0008:"[{0}]    .",PUG_MESSAGE_0009:"   .\n\n  : {0}",PUG_MESSAGE_0010:" ",PUG_MESSAGE_0011:"  .\n   .",PUG_MESSAGE_0012:"     .",PUG_MESSAGE_0013:"   URL   .",PUG_MESSAGE_0014:"Iframe   URL  .",PUG_MESSAGE_1001:"   .\n\n  : {0}",PUG_MESSAGE_1002:"  action   .\n\n action   .",MSG1090:" .",MSG1094:"{0}  .",MSG1095:"99,999,999  .",MSG1096:"999,999,990  ."},_htUrl:{},applyConfig:function(b){if(b){for(var a in b){if(a=="htMessage"||a=="htAPI"||a=="htPage"){for(var c in b[a]){this["_"+a][c]=b[a][c]}}else{this._htData[a]=b[a]}}b=null}},get:function(a){if(!a){this.alertMessage("0010");return null}else{return this._controlVariable(a)}},set:function(c,b){if(!c||(typeof(c)=="string"&&typeof(b)=="undefined")){this.alertMessage("PUG_MESSAGE_0010");return false}else{if(typeof(c)=="string"){return this._controlVariable(c,b)}else{if(typeof(c)=="object"){for(var a in c){this._controlVariable(a,c[a])}}}}},_controlVariable:function(a,d){if(!/\./.test(a)){a="_htData."+a}var e=a.split(".");var c=this;for(var b=0;b<e.length;b++){if(typeof(d)!="undefined"){if(b==e.length-1){c[e[b]]=d;return true}else{if(c[e[b]]){c=c[e[b]]}else{c=c[e[b]]={}}}}else{if(typeof(c[e[b]])!="undefined"){c=c[e[b]]}else{return null}}}return c},getMessage:function(c,a){var b=this.get("_htMessage."+c)||"";return a?pug.utility.replaceString(b,a):b},getUrl:function(a,b){var c=this.get("_htUrl."+a);if(c){return b?pug.utility.replaceString(c,b):c}else{return""}},alertMessage:function(c,a){var b=this.getMessage(c,a);if(b){alert(b);return true}else{return false}}},{bNotUseElementSelector:true});pug.Component=jindo.$Class({__htElementSelector:{},__htEventData:{},__htCachedElement:{},__htCachedTemplate:{},__bRootElementExist:false,__sModuleName:"",__bNotUseElementSelector:false,$init:function(b){this.__htElementSelector={};this.__htEventData={};this.__htCachedElement={};this.__htCachedTemplate={};this.__bRootElementExist=false;if(this._htElementSelector){this.__htElementSelector=pug.utility.cloningObject(this._htElementSelector)}if(b){if(b.elRoot){this.__htCachedElement.root=b.elRoot}else{if(b.sRootElementSelector){this.__htElementSelector.root=b.sRootElementSelector}else{if(b.htElementSelector){this.__htElementSelector=b.htElementSelector}}}this.__sModuleName=b.sModuleName;this.__bNotUseElementSelector=b.bNotUseElementSelector}if(!b||(b&&!b.bNotUseSelector)){this.__setRootElement()}if(typeof(this.destroy)=="function"){var a=this.destroy.toString().replace(/function[^{]*{/,"").replace(/}$/,"");a=a+";this.__destroy();";this.destroy=new Function(a)}},_getElementSelector:function(a){return this.__htElementSelector[a]||""},__setRootElement:function(){if(this.__htCachedElement.root){this.__bRootElementExist=true}else{if(this.__htElementSelector.root){this.__htCachedElement.root=jindo.$$.getSingle(this.__htElementSelector.root);if(this.__htCachedElement.root==null){pug.variables.alertMessage("PUG_MESSAGE_0002",[this.__sModuleName,this.__htElementSelector.root])}else{this.__bRootElementExist=true}}else{if(this.__sModuleName&&!this.__bNotUseElementSelector){pug.variables.alertMessage("PUG_MESSAGE_0001",[this.__sModuleName])}}}},_getElement:function(b,a){if(!this.__bRootElementExist){pug.variables.alertMessage("PUG_MESSAGE_0003",[this.__sModuleName]);return null}if(b){return this.__findElement(b,a,false)}else{return null}},_getElementList:function(b,a){if(!this.__bRootElementExist){pug.variables.alertMessage("PUG_MESSAGE_0003",[this.__sModuleName]);return null}if(b){return this.__findElement(b,a,true)}else{return null}},_clearElement:function(a){if(!this.__bRootElementExist){pug.variables.alertMessage("PUG_MESSAGE_0003",[this.__sModuleName]);return null}if(a&&a!="root"){delete this.__htCachedElement[a];delete this.__htCachedElement[this.__getCachedKey(a,true)]}},_resetElement:function(){for(var a in this.__htCachedElement){if(a!="root"){delete this.__htCachedElement[a]}}},_getTemplate:function(b){var a=this.__htCachedTemplate[b];if(!a){a=jindo.$Template(this._getElement(b,true));this.__htCachedTemplate[b]=a}return a},__findElement:function(f,e,h){var c=this.__getCachedKey(f,h);if(!this.__htCachedElement[c]){var d=this.__htCachedElement.root;var g=this.__htElementSelector[f]||"._"+f;var a=h?jindo.$$(g,d):jindo.$$.getSingle(g,d);this.__htCachedElement[c]=a}var b=this.__htCachedElement[c];if(b){if(h){if(e){return b}else{return jindo.$ElementList(b)}}else{return e?b:jindo.$Element(b)}}},__getCachedKey:function(a,b){return(b)?"multi_"+a:a},_attachEventHandler:function(f,e,d){if(f&&e&&d){var c=e+"_"+parseInt(Math.random()*10000000,10);var b,a=false;if(e=="tap"){b=d;a=true;this._htInstance=this._htInstance||{};this._htInstance[c]=new jindo.m.Touch(f).attach(e,b)}else{b=jindo.$Fn(d,this).attach(f,e)}b.__sKey=c;this.__htEventData[c]={elTarget:f,sEventType:e,fHandler:b,bUseComponent:a};return b}},_detachEventHandler:function(a){var b=a?a.__sKey:"";if(b&&this.__htEventData[b]){if(this.__htEventData[b].bUseComponent&&this._htInstance[b]){this._htInstance[b].deactivate()}else{a.detach(this.__htEventData[b]["elTarget"],this.__htEventData[b]["sEventType"])}}},__detachEvent:function(){for(var a in this.__htEventData){this.__htEventData[a]["fHandler"].detach(this.__htEventData[a]["elTarget"],this.__htEventData[a]["sEventType"])}},__destroyInstance:function(){for(var a in this._htInstance){if(this._htInstance[a]&&typeof(this._htInstance[a].destroy)=="function"){this._htInstance[a].destroy()}}},__destroy:function(){this.__destroyInstance();this.__detachEvent();for(var a in this){delete this[a]}},destroy:function(){}}).extend(jindo.Component);pug.component={};pug.createModule("pug.layer",{_htEventData:{},_htInstance:{},_aLayerList:[],_nBaseZIndex:10000,_htLayerOption:{},_htDimmedLayer:{},_aHideList:[],_sHighestStepKey:"",_htBoundary:{},initialize:function(){this._attachEvent()},_attachEvent:function(){if(pug.isLoadedModule("pug.event.delegator")){pug.event.delegator.attach(document.body,"click",this,true)}},_onBeforeAdjust:function(b,a){this._executeCallback(b,"fBeforeAdjustCallback",a)},_onAdjust:function(b,a){this._executeCallback(b,"fAdjustCallback",a)},_onBeforeShow:function(b,a){this._executeCallback(b,"fBeforeShowCallback",a)},_onShow:function(b,a){this._executeCallback(b,"fShowCallback",a)},_onBeforeHide:function(a,b){this._executeCallback(a,"fBeforeHideCallback",b);if(this._htLayerOption[a].bUseStep&&!jindo.$A(this._aHideList).has(a)&&this._aLayerList[this._aLayerList.length-1]!=a){b.stop()}},_onHide:function(d,c){var b=this._htLayerOption[d];this._executeCallback(d,"fHideCallback",c);if(b.aLink&&b.aLink.length){for(var a=0;a<b.aLink.length;a++){this._getLayerManager(d).unlink(b.aLink[a])}}if(b.bUseDimmedLayer){this._hideDimmedLayer(d)}if(this._htEventData[d]){this._htEventData[d].detach(b.elTargetLayer,"click")}jindo.$Fn(function(){this._hideDimmedLayer(d);this._aLayerList=jindo.$A(this._aLayerList).refuse(d).$value();this._aHideList=jindo.$A(this._aHideList).refuse(d).$value()},this).delay(0)},_onIgnore:function(b,a){return this._executeCallback(b,"fIgnoreCallback",a)},_showDimmedLayer:function(d){var c=jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version==6;if(!this._htDimmedLayer[d]){var a=this._getZIndex(d,true);if(c){var b=jindo.$Document().scrollSize();this._htDimmedLayer[d]=jindo.$Element("<div style='position:absolute;z-index:"+a+";top:0px;left:0px;width:"+b.width+"px;height:"+b.height+"px;background:#000;opacity:0.3;filter:alpha(opacity=30)'><!--[if lte IE 6.5]><iframe onclick='return false;' style='display:none;display/**/:block;position:absolute;top:0;left:0;z-index:-1;filter:mask();'></iframe><![endif]--></div>")}else{this._htDimmedLayer[d]=jindo.$Element("<div style='position:fixed;z-index:"+a+";top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.3;filter:alpha(opacity=30)'><!--[if lte IE 6.5]><iframe onclick='return false;' style='display:none;display/**/:block;position:absolute;top:0;left:0;z-index:-1;filter:mask();'></iframe><![endif]--></div>")}jindo.$Element(this._htLayerOption[d].elTargetLayer).before(this._htDimmedLayer[d])}if(c){this._htEventData["resize_"+d]=this._attachEventHandler(window,"resize",jindo.$Fn(this._setDimmedLayerSize,this).bind(d))}this._htDimmedLayer[d].show();this._getLayerManager(d).link(this._htDimmedLayer[d])},_hideDimmedLayer:function(a){if(this._htDimmedLayer[a]){this._htDimmedLayer[a].hide();this._getLayerManager(a).unlink(this._htDimmedLayer[a]);if(this._htEventData["resize_"+a]){this._detachEventHandler(this._htEventData["resize_"+a])}}},_setDimmedLayerSize:function(a){this._htDimmedLayer[a].width(jindo.$Document().clientSize().width);jindo.$Fn(function(){var b=jindo.$Document().scrollSize();this._htDimmedLayer[a].width(b.width).height(b.height);jindo.$Element(this._htDimmedLayer[a].query("iframe")).width(b.width).height(b.height)},this).delay(0)},_getZIndex:function(d,a){for(var c=0,b=0;c<this._aLayerList.length;c++){if(this._aLayerList[c]==d){b=c;break}}return this._nBaseZIndex+b*100-(a?50:0)},_resetZIndex:function(){var d={},a=1;for(var c=0,b=0;c<this._aLayerList.length;c++){d=this._htLayerOption[this._aLayerList[c]];a=d.nZIndex||this._nBaseZIndex+c*100-(d.bUseDimmedLayer?50:0);jindo.$Element(d.elTargetLayer).css("zIndex",a)}},_executeCallback:function(d,b,a){var c=this._htLayerOption[d];if(d&&b&&c){if(c[b]&&typeof(c[b])=="function"){return c[b](a)}}return true},_getLayerKey:function(c){var b=jindo.$Element(c),a="";if(b.attr("__layer_key")){a=b.attr("__layer_key")}else{a=String(parseInt(Math.random()*1000000000,10));b.attr("__layer_key",a)}return a},_getLayerManager:function(c){var a=this._htInstance["layer_manager_"+c];if(!a){var b=this._htLayerOption[c];a=this._htInstance["layer_manager_"+c]=new jindo.LayerManager(b.elTargetLayer,b);if(b.fBeforeShowCallback){a.attach("beforeShow",jindo.$Fn(this._onBeforeShow,this).bind(c))}if(b.fShowCallback){a.attach("show",jindo.$Fn(this._onShow,this).bind(c))}if(b.fIgnoreCallback){a.attach("ignore",jindo.$Fn(this._onIgnore,this).bind(c))}a.attach({beforeHide:jindo.$Fn(this._onBeforeHide,this).bind(c),hide:jindo.$Fn(this._onHide,this).bind(c)})}return a},_getLayerPosition:function(c){var a=this._htInstance["layer_position_"+c];if(!a){var b=this._htLayerOption[c];a=this._htInstance["layer_position_"+c]=new jindo.LayerPosition(b.elBaseElement,b.elTargetLayer,b);if(b.fBeforeAdjustCallback){a.attach("beforeAdjust",jindo.$Fn(this._onBeforeAdjust,this).bind(c))}if(b.fAdjustCallback){a.attach("adjust",jindo.$Fn(this._onAdjust,this).bind(c))}}return a},_setLayerOption:function(c,d,f,e){var b={bUseStep:false,elTargetLayer:d,elBaseElement:f,aLink:[],nShowDelay:0,nHideDelay:0};if(e){for(var a in e){b[a]=e[a]}}b.aLink=b.aLink.concat([d,f]);this._htLayerOption[c]=b;return b},show:function(d,f,h,a){var e=jindo.$Element(d).$value();var g=jindo.$Element(f).$value();var c=h&&h.bUseStep?this._getLayerKey(e):this._getLayerKey(e);var b=this._setLayerOption(c,e,g,h);if(b.bToggle&&jindo.$Element(e).visible()){this.hide(e);return false}if(b.bUseStep){this._aLayerList=jindo.$A(this._aLayerList).refuse(c).$value();this._aLayerList.push(c)}else{this.hide();this._aLayerList=[c]}this._resetZIndex();this._getLayerManager(c).setLayer(e).setLinks(b.aLink).show(b.nShowDelay||-1);if(!b.bShowOnly){this._getLayerPosition(c).setLayer(e).setElement(g).option(b).setPosition();if(b.elBoundaryElement||b.htBoundary){this._checkBoundary(e);this._getLayerPosition(c).attach("beforeAdjust",$Fn(this._onBeforeAdjustForCheckBoundary,this).bind())}}if(b.bShowDimmedLayer){this._showDimmedLayer(c)}if(a){this._htEventData[c]=pug.event.delegator.attach(e,"click",a)}},_onBeforeAdjustForCheckBoundary:function(a){if(!this._checkBoundary(a.elLayer)){a.stop()}},_checkBoundary:function(h){var f=jindo.$Element(h);var l=f.attr("__layer_key");var g;if(this._htLayerOption[l].elBoundaryElement){var i=jindo.$Element(this._htLayerOption[l].elBoundaryElement);var j=i.offset();g={nTop:j.top,nLeft:j.left,nRight:j.left+i.width(),nBottom:j.top+i.height()}}else{g=this._htLayerOption[l].htBoundary}var b=this._getLayerPosition(l).getPosition();var k=b.nTop;var a=b.nLeft;var c=f.width();var e=f.height();var d=Math.max(Math.min(k+e,g.nBottom)-e,g.nTop);var m=Math.max(Math.min(a+c,g.nRight)-c,g.nLeft);if(k!=d||a!=m){f.css({top:d+"px",left:m+"px"});return false}else{return true}},hide:function(b){var c=b?jindo.$Element(b).$value():null;for(var a=0;a<this._aLayerList.length;a++){if(c){if(this._htLayerOption[this._aLayerList[a]].elTargetLayer==c){this._aHideList.push(this._aLayerList[a]);this._getLayerManager(this._aLayerList[a]).hide()}}else{this._aHideList.push(this._aLayerList[a]);this._getLayerManager(this._aLayerList[a]).hide()}}},getPosition:function(a){a=jindo.$Element(a);if(a&&a.attr("__layer_key")){this._getLayerPosition(a.attr("__layer_key")).getPosition()}},rePositioning:function(b,a){b=jindo.$Element(b);if(b&&b.attr("__layer_key")){this._getLayerPosition(b.attr("__layer_key")).setPosition(a)}},showAfterLoad:function(c,e,d,b){var a=jindo.$$.getSingle("._lazy_load_layer[loadedUrl='"+encodeURIComponent(c)+"']");if(a){arguments[0]=a;this.show.apply(this,arguments)}else{pug.net.loadHTML(c,document.body,jindo.$Fn(this._onLayerLoad,this).bind(c,e,d,b),"append")}},_onLayerLoad:function(d,f,e,c,b,a){if(a){if(e&&typeof(e.fLoadCallback)=="function"){e.fLoadCallback(a)}$Element(a).addClass("_lazy_load_layer").attr("loadedUrl",encodeURIComponent(d));arguments[0]=a;this.show.apply(this,arguments)}else{throw new Error("pug.layer.showAfterLoad : check url")}},showDimmedLayer:function(){},hideDimmedLayer:function(){}},{bNotUseElementSelector:true,bAutoInitialize:true});pug.createModule("pug.form",{_oFormTemplate:jindo.$Template(["<form method='{=METHOD}' action='{=PAGE_URL}' target='{=NAME}' style='display:none'>","{for INPUT in INPUT_LIST}<input type='hidden' name='{=INPUT.NAME}' value='{=INPUT.VALUE}' />{/for}","</form>"].join("")),initialize:function(){},create:function(d,g,c,f,b){var a=[];jindo.$H(f).forEach(function(i,h){a.push({NAME:jindo.$S(h).escapeHTML().$value(),VALUE:jindo.$S(String(i)).escapeHTML().$value()})},this);var e=jindo.$Element(this._oFormTemplate.process({METHOD:c,PAGE_URL:d,NAME:g,INPUT_LIST:a}));jindo.$Element(b||document.body).append(e);return e}},{bNotUseElementSelector:true,bAutoInitialize:true});pug.createModule("pug.net",{_htAjaxRequestData:{},initialize:function(){},_getRandomId:function(){return String(parseInt(Math.random()*10000000000,10))},requestAjax:function(g,b,e){var f=/URL[0-9]{4}/.test(g)?pug.variables.getUrl(g):g;if(f){var h=this._getRandomId();b=b||{};e=e||{};for(var a in this._htAjaxRequestData){if(g==this._htAjaxRequestData[a].sAPI&&jindo.$Json(this._htAjaxRequestData[a].htParameter).compare(b)){return false}}e.method=e.method||"post";var d=pug.utility.cloningObject(e);d.sAPI=g;d.htParameter=b;this._htAjaxRequestData[h]=d;var c=e.method.toLowerCase();if(c=="put"||c=="delete"){b._method=c;e.method="post"}if(e.type&&e.type.toLowerCase()=="jsonp"){b["X-Requested-With"]="JSONP"}e.onload=jindo.$Fn(this._onReceiveData,this).bind(h);return jindo.$Ajax(f,e).header("X-Requested-With","XMLHttpRequest").request(b)}else{pug.variables.alertMessage("PUG_MESSAGE_0006");return false}},_onReceiveData:function(f,d){var b,a,c={bSuccess:false,sErrorCode:"SERVER_ERROR",sErrorMessage:pug.variables.getMessage("PUG_MESSAGE_0007")},e=this._htAjaxRequestData[f];delete this._htAjaxRequestData[f];b=d[e.sResultType||"json"]();if(d.status()==200&&b){if(e.sResultType=="text"){if(b){a={bSuccess:true,htReturnValue:{text:b}}}else{a=c}}else{a=b}if(!a.bSuccess&&!e.bNotUseErrorAlert&&a.sErrorMessage){alert(a.sErrorMessage)}}else{if(!e.bNotUseErrorAlert&&b&&b.sErrorMessage&&b.bViewMessage){alert("["+d.status()+"]"+b.sErrorMessage)}else{if(!e.bNotUseErrorAlert){pug.variables.alertMessage("PUG_MESSAGE_0008",[d.status()])}}a=c}if(e.onload&&typeof e.onload=="function"){e.onload(a,d)}},loadHTML:function(a,b,c,d){d=d||"html";return this.requestAjax(a,{},{onload:$Fn(this._onLoadHTML,this).bind(b,c,d),bNotUseErrorAlert:false,sResultType:"text",method:"get"})},_onLoadHTML:function(e,g,h,a){if(a.bSuccess){var d=a.htReturnValue.text||"";var c=pug.utility.stripScript(d);var b=jindo.$Element(e);var f;if(h=="html"){b.html(c)}else{if(h=="append"){f=jindo.$(c);if(f.length){jindo.$A(f).forEach(function(i){b.append(i)})}else{b.append(f)}}}pug.utility.evaluateScript(d);if(g){g(b,f)}}}},{bNotUseElementSelector:true,bAutoInitialize:true});pug.createModule("pug.window",{_htResizeData:{},_oNavigator:jindo.$Agent().navigator(),_htOpenedPopup:{},resize:function(a){a=a||{nWidth:0,nHeight:0,nMaxWidth:0,nMaxHeight:0};var c=this._getScrollBarUsed();this._htResizeData={bUseScrollBarX:c.bUseScrollBarX,bUseScrollBarY:c.bUseScrollBarY,bResizeFlag:false,nResizeCount:3,nResizeTimer:0};if(this._oNavigator.firefox){window.sizeToContent();if(a.nWidth||a.nHeight||a.nMaxWidth||a.nMaxHeight){this._setWindowSize(a.nWidth,a.nHeight,a.nMaxWidth,a.nMaxHeight)}}else{if(this._oNavigator.safari){this._htResizeData.bResizeFlag=true;var b=jindo.$Fn(function(){if(this._htResizeData.bResizeFlag){this._htResizeData.bResizeFlag=false;b.detach(window,"resize");this._setWindowSize(a.nWidth,a.nHeight,a.nMaxWidth,a.nMaxHeight)}},this).attach(window,"resize");jindo.$Window().resizeTo(0,0)}else{this._setWindowSize(a.nWidth,a.nHeight,a.nMaxWidth,a.nMaxHeight)}}},_getScrollBarUsed:function(){var b={bUseScrollBarX:true,bUseScrollBarY:true};var a=jindo.$Element(document.body).prepend(jindo.$("<div style='width:9999px;height:1px;position:absolute;top:-1px;left:0px;'></div>"));var c=jindo.$Element(document.body).prepend(jindo.$("<div style='height:9999px;width:1px;position:absolute;top:0px;left:-1px;'></div>"));b={bUseScrollBarX:this._oNavigator.ie&&this._oNavigator.version==7?true:((typeof(window.innerHeight)!="undefined"?window.innerHeight:document.documentElement.offsetHeight)-document.documentElement.clientHeight)>=17,bUseScrollBarY:this._oNavigator.ie&&this._oNavigator.version==7?true:((typeof(window.innerWidth)!="undefined"?window.innerWidth:document.documentElement.offsetWidth)-document.documentElement.clientWidth)>=17};a.leave();c.leave();return b},_checkWindowPosition:function(d,j,i,h,a){if(this._oNavigator.ie){var g=8;var c=window.screenTop>window.screen.availHeight?window.screenTop-window.screen.availHeight:window.screenTop;var b=window.screenLeft>window.screen.availWidth?window.screenLeft-window.screen.availWidth:window.screenLeft;var e=c>0?Math.min(window.screen.availHeight-(c+j+(i?17:0)+g+a),0):-Math.min(c,0);var f=b>0?Math.min(window.screen.availWidth-(b+d+(h?17:0)+g),0):-Math.min(b,0);if(!(e==0&&f==0)){jindo.$Window().moveBy(f,e)}return{nMoveX:f,nMoveY:e}}},_checkWindowSize:function(d,a,c,b){if(this._oNavigator.chrome||(this._oNavigator.ie&&this._oNavigator.version==7)){clearTimeout(this._htResizeData.nResizeTimer);this._htResizeData.nResizeTimer=setTimeout(jindo.$Fn(function(){var e=jindo.$Document().clientSize();if(this._htResizeData.nResizeCount<this._htResizeData.nResizeLimit&&(e.width!=d||e.height!=a)){this._htResizeData.nResizeCount++;this._setWindowSize(d,a,c,b)}},this).bind(),50)}else{setTimeout(jindo.$Fn(function(){var e=jindo.$Document().clientSize()},this).bind(),50)}},_checkMaxTargetHeight:function(b,e,d){if(this._oNavigator.ie){var a=this._oNavigator.version==7?52:59;var c=8;var f=a+(d?17:0)+e+c;return b+f>window.screen.availHeight?window.screen.availHeight-f:b}return b},_getStatusBarHeight:function(c,b){var a=8;var d=this._oNavigator.ie&&this._oNavigator.version>=9&&window.outerHeight&&(window.screenTop-window.screenY+c+(b?17:0)+a)==window.outerHeight?false:true;return this._oNavigator.version==8?26:(this._oNavigator.version==7||d?22:0)},_setWindowSize:function(k,t,f,q){try{document.getElementsByTagName("html")[0].style.width="0px";var m=jindo.$Document().scrollSize();var o=jindo.$Document().clientSize();var s=this._oNavigator.ie?document.body:document.documentElement;var g=s.scrollWidth;var p=s.scrollHeight;var i=Math.min(k||g,f||window.screen.availWidth);var u=Math.min(t||p,q||window.screen.availHeight);var j=this._htResizeData.bUseScrollBarX&&m.width>o.width;var h=this._htResizeData.bUseScrollBarY&&m.height>o.height;var c=this._htResizeData.bUseScrollBarX&&g!=i&&g-17>i?true:false;var b=this._htResizeData.bUseScrollBarY&&p!=u&&p-17>u?true:false;var d=this._getStatusBarHeight(o.height,c);u=this._checkMaxTargetHeight(u,d,c);b=this._htResizeData.bUseScrollBarY&&p!=u&&p-17>u?true:false;var a=i-o.width;var n=u-o.height;var l=this._checkWindowPosition(i,u,c,b,d);if(this._oNavigator.safari){if(c==true&&b==false){n+=17}else{if(c==false&&b==true){a+=17}}}else{if(j!=c&&c==false){n-=17}else{if(j!=c&&c==true){n+=17}}if(!(this._oNavigator.ie&&this._oNavigator.version==7)){if(h!=b&&b==false){a-=17}else{if(h!=b&&b==true){a+=17}}if(this._oNavigator.chrome){a+=1}}}jindo.$Window().resizeBy(a,n);if(this._oNavigator.chrome){jindo.$Window().resizeBy(-1)}document.getElementsByTagName("html")[0].style.width="";this._checkWindowSize(i,u,f,q)}catch(r){setTimeout(jindo.$Fn(this._setWindowSize,this).bind(k,t,f,q),100)}},openPopup:function(a,b){if(!a){this.alertMessage("PUG_MESSAGE_0013");return null}var e,d,c={sPopupName:"popup_"+String(parseInt(Math.random()*10000000000,10)),sPopupOption:"",sMethod:"get",htParam:null,bReload:true,bNotUseAlert:false,bCloseWithParent:false};b=pug.utility.extend(c,b||{});if(!/^[_a-zA-Z0-9]+$/.test(b.sPopupName)){this.alertMessage("PUG_MESSAGE_0012");return null}e=this._htOpenedPopup[b.sPopupName];if(b.bReload||!(e&&!e.closed)){if(b.htParam||b.sMethod=="post"){d=pug.form.create(a,b.sPopupName,b.sMethod,b.htParam);d.appendTo(document.body,true);a="about:blank"}this._htOpenedPopup[b.sPopupName]=e=window.open(a,b.sPopupName,b.sPopupOption);if(d){if(e){d.$value().submit()}d.leave()}}if(e){e.bCloseWithParent=b.bCloseWithParent||false;jindo.$Fn(function(){var f=this._htOpenedPopup[b.sPopupName];if(f&&!f.closed){f.focus()}},this).delay(0);return e}else{if(!b.bNotUseAlert){this.alertMessage("PUG_MESSAGE_0011");return null}}},close:function(){self.window.open("","_self","");self.opener=self;window.close()},closeAllPopup:function(b){for(var a in this._htOpenedPopup){if(!b||(b&&this._htOpenedPopup[a].bCloseWithParent)){this._htOpenedPopup[a].close()}}},resizeIframe:function(f,i,d){var a,c,h,b=jindo.$Agent().navigator();try{a=f.contentWindow.document}catch(g){return false}if(a.location.href=="about:blank"){f.style.height=i+"px";return false}if(b.ie&&b.version<8){c=a.body.scrollHeight}else{h=a.body.appendChild(jindo.$("<DIV>"));h.style.clear="both";c=h.offsetTop;h.parentNode.removeChild(h)}i=i||10;if(c<i){c=i}f.style.height=(c+(d||0))+"px"}},{bNotUseElementSelector:true});pug.createModule("pug.layer",{_htEventData:{},_htInstance:{},_aLayerList:[],_nBaseZIndex:10000,_htLayerOption:{},_htDimmedLayer:{},_aHideList:[],_sHighestStepKey:"",_htBoundary:{},initialize:function(){this._attachEvent()},_attachEvent:function(){if(pug.isLoadedModule("pug.event.delegator")){pug.event.delegator.attach(document.body,"click",this,true)}},_onBeforeAdjust:function(b,a){this._executeCallback(b,"fBeforeAdjustCallback",a)},_onAdjust:function(b,a){this._executeCallback(b,"fAdjustCallback",a)},_onBeforeShow:function(b,a){this._executeCallback(b,"fBeforeShowCallback",a)},_onShow:function(b,a){this._executeCallback(b,"fShowCallback",a)},_onBeforeHide:function(a,b){this._executeCallback(a,"fBeforeHideCallback",b);if(this._htLayerOption[a].bUseStep&&!jindo.$A(this._aHideList).has(a)&&this._aLayerList[this._aLayerList.length-1]!=a){b.stop()}},_onHide:function(d,c){var b=this._htLayerOption[d];this._executeCallback(d,"fHideCallback",c);if(b.aLink&&b.aLink.length){for(var a=0;a<b.aLink.length;a++){this._getLayerManager(d).unlink(b.aLink[a])}}if(b.bUseDimmedLayer){this._hideDimmedLayer(d)}if(this._htEventData[d]){this._htEventData[d].detach(b.elTargetLayer,"click")}jindo.$Fn(function(){this._hideDimmedLayer(d);this._aLayerList=jindo.$A(this._aLayerList).refuse(d).$value();this._aHideList=jindo.$A(this._aHideList).refuse(d).$value()},this).delay(0)},_onIgnore:function(b,a){return this._executeCallback(b,"fIgnoreCallback",a)},_showDimmedLayer:function(d){var c=jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version==6;if(!this._htDimmedLayer[d]){var a=this._getZIndex(d,true);if(c){var b=jindo.$Document().scrollSize();this._htDimmedLayer[d]=jindo.$Element("<div style='position:absolute;z-index:"+a+";top:0px;left:0px;width:"+b.width+"px;height:"+b.height+"px;background:#000;opacity:0.3;filter:alpha(opacity=30)'><!--[if lte IE 6.5]><iframe onclick='return false;' style='display:none;display/**/:block;position:absolute;top:0;left:0;z-index:-1;filter:mask();'></iframe><![endif]--></div>")}else{this._htDimmedLayer[d]=jindo.$Element("<div style='position:fixed;z-index:"+a+";top:0px;left:0px;width:100%;height:100%;background:#000;opacity:0.3;filter:alpha(opacity=30)'><!--[if lte IE 6.5]><iframe onclick='return false;' style='display:none;display/**/:block;position:absolute;top:0;left:0;z-index:-1;filter:mask();'></iframe><![endif]--></div>")}jindo.$Element(this._htLayerOption[d].elTargetLayer).before(this._htDimmedLayer[d])}if(c){this._htEventData["resize_"+d]=this._attachEventHandler(window,"resize",jindo.$Fn(this._setDimmedLayerSize,this).bind(d))}this._htDimmedLayer[d].show();this._getLayerManager(d).link(this._htDimmedLayer[d])},_hideDimmedLayer:function(a){if(this._htDimmedLayer[a]){this._htDimmedLayer[a].hide();this._getLayerManager(a).unlink(this._htDimmedLayer[a]);if(this._htEventData["resize_"+a]){this._detachEventHandler(this._htEventData["resize_"+a])}}},_setDimmedLayerSize:function(a){this._htDimmedLayer[a].width(jindo.$Document().clientSize().width);jindo.$Fn(function(){var b=jindo.$Document().scrollSize();this._htDimmedLayer[a].width(b.width).height(b.height);jindo.$Element(this._htDimmedLayer[a].query("iframe")).width(b.width).height(b.height)},this).delay(0)},_getZIndex:function(d,a){for(var c=0,b=0;c<this._aLayerList.length;c++){if(this._aLayerList[c]==d){b=c;break}}return this._nBaseZIndex+b*100-(a?50:0)},_resetZIndex:function(){var d={},a=1;for(var c=0,b=0;c<this._aLayerList.length;c++){d=this._htLayerOption[this._aLayerList[c]];a=d.nZIndex||this._nBaseZIndex+c*100-(d.bUseDimmedLayer?50:0);jindo.$Element(d.elTargetLayer).css("zIndex",a)}},_executeCallback:function(d,b,a){var c=this._htLayerOption[d];if(d&&b&&c){if(c[b]&&typeof(c[b])=="function"){return c[b](a)}}return true},_getLayerKey:function(c){var b=jindo.$Element(c),a="";if(b.attr("__layer_key")){a=b.attr("__layer_key")}else{a=String(parseInt(Math.random()*1000000000,10));b.attr("__layer_key",a)}return a},_getLayerManager:function(c){var a=this._htInstance["layer_manager_"+c];if(!a){var b=this._htLayerOption[c];a=this._htInstance["layer_manager_"+c]=new jindo.LayerManager(b.elTargetLayer,b);if(b.fBeforeShowCallback){a.attach("beforeShow",jindo.$Fn(this._onBeforeShow,this).bind(c))}if(b.fShowCallback){a.attach("show",jindo.$Fn(this._onShow,this).bind(c))}if(b.fIgnoreCallback){a.attach("ignore",jindo.$Fn(this._onIgnore,this).bind(c))}a.attach({beforeHide:jindo.$Fn(this._onBeforeHide,this).bind(c),hide:jindo.$Fn(this._onHide,this).bind(c)})}return a},_getLayerPosition:function(c){var a=this._htInstance["layer_position_"+c];if(!a){var b=this._htLayerOption[c];a=this._htInstance["layer_position_"+c]=new jindo.LayerPosition(b.elBaseElement,b.elTargetLayer,b);if(b.fBeforeAdjustCallback){a.attach("beforeAdjust",jindo.$Fn(this._onBeforeAdjust,this).bind(c))}if(b.fAdjustCallback){a.attach("adjust",jindo.$Fn(this._onAdjust,this).bind(c))}}return a},_setLayerOption:function(c,d,f,e){var b={bUseStep:false,elTargetLayer:d,elBaseElement:f,aLink:[],nShowDelay:0,nHideDelay:0};if(e){for(var a in e){b[a]=e[a]}}b.aLink=b.aLink.concat([d,f]);this._htLayerOption[c]=b;return b},show:function(d,f,h,a){var e=jindo.$Element(d).$value();var g=jindo.$Element(f).$value();var c=h&&h.bUseStep?this._getLayerKey(e):this._getLayerKey(e);var b=this._setLayerOption(c,e,g,h);if(b.bToggle&&jindo.$Element(e).visible()){this.hide(e);return false}if(b.bUseStep){this._aLayerList=jindo.$A(this._aLayerList).refuse(c).$value();this._aLayerList.push(c)}else{this.hide();this._aLayerList=[c]}this._resetZIndex();this._getLayerManager(c).setLayer(e).setLinks(b.aLink).show(b.nShowDelay||-1);if(!b.bShowOnly){this._getLayerPosition(c).setLayer(e).setElement(g).option(b).setPosition();if(b.elBoundaryElement||b.htBoundary){this._checkBoundary(e);this._getLayerPosition(c).attach("beforeAdjust",$Fn(this._onBeforeAdjustForCheckBoundary,this).bind())}}if(b.bShowDimmedLayer){this._showDimmedLayer(c)}if(a){this._htEventData[c]=pug.event.delegator.attach(e,"click",a)}},_onBeforeAdjustForCheckBoundary:function(a){if(!this._checkBoundary(a.elLayer)){a.stop()}},_checkBoundary:function(h){var f=jindo.$Element(h);var l=f.attr("__layer_key");var g;if(this._htLayerOption[l].elBoundaryElement){var i=jindo.$Element(this._htLayerOption[l].elBoundaryElement);var j=i.offset();g={nTop:j.top,nLeft:j.left,nRight:j.left+i.width(),nBottom:j.top+i.height()}}else{g=this._htLayerOption[l].htBoundary}var b=this._getLayerPosition(l).getPosition();var k=b.nTop;var a=b.nLeft;var c=f.width();var e=f.height();var d=Math.max(Math.min(k+e,g.nBottom)-e,g.nTop);var m=Math.max(Math.min(a+c,g.nRight)-c,g.nLeft);if(k!=d||a!=m){f.css({top:d+"px",left:m+"px"});return false}else{return true}},hide:function(b){var c=b?jindo.$Element(b).$value():null;for(var a=0;a<this._aLayerList.length;a++){if(c){if(this._htLayerOption[this._aLayerList[a]].elTargetLayer==c){this._aHideList.push(this._aLayerList[a]);this._getLayerManager(this._aLayerList[a]).hide()}}else{this._aHideList.push(this._aLayerList[a]);this._getLayerManager(this._aLayerList[a]).hide()}}},getPosition:function(a){a=jindo.$Element(a);if(a&&a.attr("__layer_key")){this._getLayerPosition(a.attr("__layer_key")).getPosition()}},rePositioning:function(b,a){b=jindo.$Element(b);if(b&&b.attr("__layer_key")){this._getLayerPosition(b.attr("__layer_key")).setPosition(a)}},showAfterLoad:function(c,e,d,b){var a=jindo.$$.getSingle("._lazy_load_layer[loadedUrl='"+encodeURIComponent(c)+"']");if(a){arguments[0]=a;this.show.apply(this,arguments)}else{pug.net.loadHTML(c,document.body,jindo.$Fn(this._onLayerLoad,this).bind(c,e,d,b),"append")}},_onLayerLoad:function(d,f,e,c,b,a){if(a){if(e&&typeof(e.fLoadCallback)=="function"){e.fLoadCallback(a)}$Element(a).addClass("_lazy_load_layer").attr("loadedUrl",encodeURIComponent(d));arguments[0]=a;this.show.apply(this,arguments)}else{throw new Error("pug.layer.showAfterLoad : check url")}},showDimmedLayer:function(){},hideDimmedLayer:function(){}},{bNotUseElementSelector:true,bAutoInitialize:true});pug.createModule("pug.event",{initialize:function(){}},{bNotUseElementSelector:true,bAutoInitialize:true});pug.createModule("pug.event.delegator",{_sNonBubbleEvent:"scroll,select,change,focus,blur,submit,reset",_sDisabledAttributeTag:"input,select,textarea,option,button",_aEventData:[],STOP_DEFAULT:"_stopDefault",STOP_BUBBLE:"_stopBubble",DISABLED:"_disabled",_htInstance:{},initialize:function(){},_onEvent:function(g,j,a){var c=a.oEvent?a.sType:a.type;var f=new RegExp("_"+c+"\\(("+g.MODULE_NAME.replace(/\./g,"\\.")+".*?)");var e=new RegExp("_"+c+"\\(("+g.MODULE_NAME.replace(/\./g,"\\.")+".*?)\\((.*?)\\)\\)");var b=this._findDelegatedElements(a.oEvent||a,e,f,this._isNonBubbleEvent(c));for(var d=0,h=b.length;d<h;d++){this._dispatchEvent(a.oEvent||a,b[d],g,e,j)}},_findDelegatedElements:function(b,h,i,g){var a=b.element,f=b.currentElement,c,d,e=[];do{if(this._isDisabled(a)){return[]}c=a.className;d=h.test(c);if(i.test(c)&&!d){alert("pug.event.delegator > check class value : "+c+" ex) _click(pug.moduleName.someMethod(someParameter))")}if(d||this._hasClass(c,this.STOP_DEFAULT)){e.push(a);if(g||this._hasClass(c,this.STOP_BUBBLE)){break}}if(a==f){break}a=a.parentNode}while(a&&a!=document.body&&a!=document);return e},_isDisabled:function(b){if(!b||!b.tagName){return false}var a=b.tagName.toLowerCase();return this._sDisabledAttributeTag.indexOf(a)>-1&&b.disabled},_dispatchEvent:function(d,b,k,h,l){var e=b.className;if(this._hasClass(e,this.STOP_DEFAULT)){d.stopDefault()}if(this._hasClass(e,this.STOP_BUBBLE)){d.stopBubble()}if(this._hasClass(e,this.DISABLED)){return}if(!h.test(e)){return}var a=h.exec(e),c=a[1].split("."),g=c.pop(),f=c.join(".");if(typeof k!="object"||k.MODULE_NAME!=f){return}var i=k[g];if(typeof i!="function"){alert("pug.event.delegator > function check : "+g+" is not exist")}if(/ /.test(a[2])){alert("pug.event.delegator > parameter check : Spaces are not allowed.")}var j=a[2].split(",");d.delegatedElement=b;if(!l){j.unshift(d)}i.apply(k,j)},_hasClass:function(b,a){return(" "+b+" ").indexOf(" "+a+" ")>-1},_isNonBubbleEvent:function(a){return this._sNonBubbleEvent.indexOf(a)>-1},attach:function(a,f,c,d){a=jindo.$Element(a);if(!(a&&f&&c)){alert("pug.event.delegator > check parameter : pug.event.delegator.attach(wel, sEventType, oContext), oContext.MODULE_NAME : "+c.MODULE_NAME)}var b=c.MODULE_NAME;if(typeof b!="string"){alert('pug.event.delegator > empty context name : this.MODULE_NAME : "module fullname"')}if(f=="tap"){var e=jindo.$Fn(this._onEvent,this).bind(c,d);this._htInstance["touch_"+(parseInt(Math.random()*10000000000,10))]=new jindo.m.Touch(a).attach("tap",e)}else{var e=jindo.$Fn(jindo.$Fn(this._onEvent,this).bind(c,d),this).attach(a,f);this._aEventData.push({wel:a,sEventType:f,fHandler:e})}return e},detachAll:function(){for(var b=0,d=this._aEventData.length;b<d;b++){var c=this._aEventData[b];c.fHandler.detach(c.wel,c.sEventType)}for(var a in this._htInstance){this._htInstance[a].deactivate()}}},{bNotUseElementSelector:true,bAutoInitialize:true});pug.createModule("pug.storage",{_bSupportChecked:false,_bLocalStorageSupport:false,_elStorage:document.body,_sMarkKey:"__pug_storage_key_list",initialize:function(){},_checkLocalStorageSupprot:function(){if(!this._bSupportChecked){this._bLocalStorageSupport=!!localStorage;if(!this._bLocalStorageSupport){this._elStorage.addBehavior("#default#userData")}this._bSupportChecked=true}return this._bLocalStorageSupport},set:function(b,a){a=$Json(a).toString();if(this._checkLocalStorageSupprot()){try{localStorage.setItem(b,a)}catch(c){return false}}else{this._elStorage.setAttribute(b,a);this._elStorage.save(b);this._markKey(b,"set")}return true},get:function(b){var a;if(this._checkLocalStorageSupprot()){a=localStorage.getItem(b)}else{this._elStorage.load(b);a=this._elStorage.getAttribute(b)}return new Function("return "+a)()},remove:function(a){if(this._checkLocalStorageSupprot()){localStorage.removeItem(a)}else{this._elStorage.removeAttribute(a);this._elStorage.save(a);this._markKey(a,"remove")}},clear:function(){if(this._checkLocalStorageSupprot()){localStorage.clear()}else{this._elStorage.load(this._sMarkKey);var b=(this._elStorage.getAttribute(this._sMarkKey)||"").split(",");for(var a=0;a<b.length;a++){this._elStorage.removeAttribute(b[a]);this._elStorage.save(b[a])}this._elStorage.setAttribute(this._sMarkKey,"");this._elStorage.save(this._sMarkKey)}},key:function(a){if(this._checkLocalStorageSupprot()){return localStorage.key(a)}else{this._elStorage.load(this._sMarkKey);var b=(this._elStorage.getAttribute(this._sMarkKey)||"").split(",");return a<b.length?b[a]:""}},getSize:function(){},_markKey:function(c,d){this._elStorage.load(this._sMarkKey);var b=this._elStorage.getAttribute(this._sMarkKey)||"";var a=new RegExp("\\b"+c+"\\b,?","i");b=d=="remove"?b.replace(a,""):(a.test(b)?b:(b===""?c:b.split(",").concat(c).join(",")));this._elStorage.setAttribute(this._sMarkKey,b);this._elStorage.save(this._sMarkKey)}},{bNotUseElementSelector:true,bAutoInitialize:true});new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.UIComponent"]})');jindo.m.Touch=jindo.$Class({$init:function(b,a){this._el=jindo.$(b);var c={nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1000,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:0.1,nRotateThreshold:5,bActivateOnload:true};this.option(c);this.option(a||{});this._initVariable();this._setSlope();if(this.option("bActivateOnload")){this.activate()}},_initVariable:function(){this._hasTouchEvent="ontouchstart" in window;this._radianToDegree=180/Math.PI;this._htMoveInfo={nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0};this.bStart=false;this.bMove=false;this.nMoveType=-1;this.htEndInfo={};this._nVSlope=0;this._nHSlope=0;this.bSetSlope=false},_attachEvents:function(){this._htEvent={};var a=this._hasTouchEvent;this._htEvent[a?"touchstart":"mousedown"]={ref:jindo.$Fn(this._onStart,this).attach(this._el,(a?"touchstart":"mousedown")),el:this._el};this._htEvent[a?"touchmove":"mousemove"]={ref:jindo.$Fn(this._onMove,this).attach(this._el,(a?"touchmove":"mousemove")),el:this._el};this._htEvent[a?"touchend":"mouseup"]={ref:jindo.$Fn(this._onEnd,this).attach(this._el,(a?"touchend":"mouseup")),el:this._el};this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind();jindo.m.bindRotate(this._htEvent.rotate);if(a){this._htEvent.touchcancel={ref:jindo.$Fn(this._onCancel,this).attach(this._el,"touchcancel"),el:this._el}}},_detachEvents:function(){for(var b in this._htEvent){var a=this._htEvent[b];if(a.ref){a.ref.detach(a.el,b)}}jindo.m.unbindRotate(this._htEvent.rotate);this._htEvent=null},_onCancel:function(a){this._onEnd(a)},_onStart:function(a){this._resetTouchInfo();var b=this._getTouchInfo(a);var c={element:b[0].el,nX:b[0].nX,nY:b[0].nY,oEvent:a};if(!this._fireCustomEvent("touchStart",c)){return}this.bStart=true;this._htMoveInfo.nStartX=b[0].nX;this._htMoveInfo.nBeforeX=b[0].nX;this._htMoveInfo.nStartY=b[0].nY;this._htMoveInfo.nBeforeY=b[0].nY;this._htMoveInfo.nStartTime=b[0].nTime;this._htMoveInfo.aStartInfo=b;this._startLongTapTimer(b,a)},_onMove:function(a){if(!this.bStart){return}this.bMove=true;var b=this._getTouchInfo(a);var c=this._getCustomEventParam(b,false);if(b.length===1){if(this.nMoveType<0||this.nMoveType==3||this.nMoveType==4){this.nMoveType=this._getMoveType(b)}}else{if(this.nMoveType!==8){this.nMoveType=this._getMoveType(b)}}c=this._getCustomEventParam(b,false);if((typeof this._nLongTapTimer!="undefined")&&this.nMoveType!=3){this._deleteLongTapTimer()}c.oEvent=a;var d=0;if(this.nMoveType==0){d=Math.abs(c.nVectorX)}else{if(this.nMoveType==1){d=Math.abs(c.nVectorY)}else{d=Math.abs(c.nVectorX)+Math.abs(c.nVectorY)}}if(d<this.option("nMoveThreshold")){return}if(!this.fireEvent("touchMove",c)){this.bStart=false;return}this._htMoveInfo.nBeforeX=b[0].nX;this._htMoveInfo.nBeforeY=b[0].nY;this._htMoveInfo.nBeforeTime=b[0].nTime},_onEnd:function(b){if(!this.bStart){return}var a=this;this._deleteLongTapTimer();if(!this.bMove&&(this.nMoveType!=4)){this.nMoveType=3}if(this.nMoveType<0){return}var c=this._getTouchInfo(b);if(this._isDblTap(c[0].nX,c[0].nY,c[0].nTime)){clearTimeout(this._nTapTimer);delete this._nTapTimer;this.nMoveType=5}var e=this._getCustomEventParam(c,true);e.oEvent=b;var d=e.sMoveType;if((typeof this._htEventHandler[jindo.m.MOVETYPE[5]]!="undefined"&&(this._htEventHandler[jindo.m.MOVETYPE[5]].length>0))&&(this.nMoveType==3)){this._nTapTimer=setTimeout(function(){a.fireEvent("touchEnd",e);a._fireCustomEvent(d,e);delete a._nTapTimer},this.option("nDoubleTapDuration"))}else{this.fireEvent("touchEnd",e);if(this.nMoveType!=4){if(this.nMoveType===8){e.sMoveType=jindo.m.MOVETYPE[6];this._fireCustomEvent(jindo.m.MOVETYPE[6],e);e.sMoveType=jindo.m.MOVETYPE[7];this._fireCustomEvent(jindo.m.MOVETYPE[7],e)}else{setTimeout(function(){a._fireCustomEvent(d,e)},0)}}}this._updateTouchEndInfo(c);this._resetTouchInfo()},_fireCustomEvent:function(b,a){return this.fireEvent(b,a)},_getCustomEventParam:function(c,b){var j=jindo.m.MOVETYPE[this.nMoveType];var h=c[0].nTime-this._htMoveInfo.nStartTime;var k=nVectorY=nMomentumX=nMomentumY=nSpeedX=nSpeedY=nDisX=nDisY=0;nDisX=(this.nMoveType===1)?0:c[0].nX-this._htMoveInfo.nStartX;nDisY=(this.nMoveType===0)?0:c[0].nY-this._htMoveInfo.nStartY;k=c[0].nX-this._htMoveInfo.nBeforeX;nVectorY=c[0].nY-this._htMoveInfo.nBeforeY;if(b&&(this.nMoveType==0||this.nMoveType==1||this.nMoveType==2)){if(h<=this.option("nMomentumDuration")){nSpeedX=Math.abs(nDisX)/h;nMomentumX=(nSpeedX*nSpeedX)/2;nSpeedY=Math.abs(nDisY)/h;nMomentumY=(nSpeedY*nSpeedY)/2}}var a={element:c[0].el,nX:c[0].nX,nY:c[0].nY,nVectorX:k,nVectorY:nVectorY,nDistanceX:nDisX,nDistanceY:nDisY,sMoveType:j,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime};if((c.length)>1||(this.nMoveType>=6)){a.nScale=this._getScale(c);a.nRotation=this._getRotation(c);if(a.nScale===null){a.nScale=this._htMoveInfo.nBeforeScale}if(a.nRotation===null){a.nRotation=this._htMoveInfo.nBeforeRotation}}if(c.length>=1){var f=[];var d=[];var g=[];for(var e=0,l=c.length;e<l;e++){f.push(c[e].nX);d.push(c[e].nY);g.push(c[e].el)}a.aX=f;a.aY=d;a.aElement=g}if(b){a.nMomentumX=nMomentumX;a.nMomentumY=nMomentumY;a.nSpeedX=nSpeedX;a.nSpeedY=nSpeedY;a.nDuration=h}return a},_updateTouchEndInfo:function(a){this.htEndInfo={element:a[0].el,time:a[0].nTime,movetype:this.nMoveType,nX:a[0].nX,nY:a[0].nY}},_deleteLongTapTimer:function(){if(typeof this._nLongTapTimer!="undefined"){clearTimeout(this._nLongTapTimer);delete this._nLongTapTimer}},_startLongTapTimer:function(c,b){var a=this;if((typeof this._htEventHandler[jindo.m.MOVETYPE[4]]!="undefined")&&(this._htEventHandler[jindo.m.MOVETYPE[4]].length>0)){a._nLongTapTimer=setTimeout(function(){a.fireEvent("longTap",{element:c[0].el,oEvent:b,nX:c[0].nX,nY:c[0].nY});delete a._nLongTapTimer;a.nMoveType=4},a.option("nLongTapDuration"))}},_onResize:function(){this._setSlope()},_isDblTap:function(d,c,a){if((typeof this._nTapTimer!="undefined")&&this.nMoveType==3){var b=this.option("nTapThreshold");if((Math.abs(this.htEndInfo.nX-d)<=b)&&(Math.abs(this.htEndInfo.nY-c)<=b)){return true}}return false},_setSlope:function(){if(!this.bSetSlope){this._nHSlope=((window.innerHeight/2)/window.innerWidth).toFixed(2)*1;this._nVSlope=(window.innerHeight/(window.innerWidth/2)).toFixed(2)*1}},setSlope:function(a,b){this._nHSlope=b;this._nVSlope=a;this.bSetSlope=true},getSlope:function(){return{nVSlope:this._nVSlope,nHSlope:this._nHSlope}},_resetTouchInfo:function(){for(var a in this._htMoveInfo){this._htMoveInfo[a]=0}this._deleteLongTapTimer();this.bStart=false;this.bMove=false;this.nMoveType=-1},_getMoveTypeBySingle:function(a,h){var b=this.nMoveType;var g=Math.abs(this._htMoveInfo.nStartX-a);var f=Math.abs(this._htMoveInfo.nStartY-h);var e=g+f;var c=this.option("nTapThreshold");if((g<=c)&&(f<=c)){b=3}else{b=-1}if(this.option("nSlopeThreshold")<=e){var d=parseFloat((f/g).toFixed(2),10);if((this._nHSlope===-1)&&(this._nVSlope===-1)){b=2}else{if(d<=this._nHSlope){b=0}else{if(d>=this._nVSlope){b=1}else{b=2}}}}return b},_getMoveTypeByMulti:function(a){var b=-1;if((this.nMoveType===6)||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option("nPinchThreshold")){b=6}if((this.nMoveType===7)||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option("nRotateThreshold")){if(b===6){b=8}else{b=7}}if(b===-1){return this.nMoveType}return b},_getScale:function(b){var c=-1;var a=this._getDistance(b);if(a<=0){return null}if(this._htMoveInfo.nStartDistance===0){c=1;this._htMoveInfo.nStartDistance=a}else{c=a/this._htMoveInfo.nStartDistance}this._htMoveInfo.nBeforeScale=c;return c},_getRotation:function(a){var c=-1;var b=this._getAngle(a);if(b===null){return null}if(this._htMoveInfo.nStartAngle===0){this._htMoveInfo.nStartAngle=b;c=0}else{c=b-this._htMoveInfo.nStartAngle}this._htMoveInfo.nLastAngle=b;this._htMoveInfo.nBeforeRotation=c;return c},_getMoveType:function(a){var b=this.nMoveType;if(a.length===1){b=this._getMoveTypeBySingle(a[0].nX,a[0].nY)}else{if(a.length===2){b=this._getMoveTypeByMulti(a)}}return b},_getDistance:function(a){if(a.length===1){return -1}return Math.sqrt(Math.pow(Math.abs(a[0].nX-a[1].nX),2)+Math.pow(Math.abs(a[0].nY-a[1].nY),2))},_getAngle:function(c){if(c.length===1){return null}var b=c[0].nX-c[1].nX,a=c[0].nY-c[1].nY;var g=Math.atan2(a,b)*this._radianToDegree;if(this._htMoveInfo.nLastAngle!==null){var f=Math.abs(this._htMoveInfo.nLastAngle-g);var d=g+360;var e=g-360;if(Math.abs(d-this._htMoveInfo.nLastAngle)<f){g=d}else{if(Math.abs(e-this._htMoveInfo.nLastAngle)<f){g=e}}}return g},_getTouchInfo:function(b){var a=[];var d=b.$value().timeStamp;if(this._hasTouchEvent){var e=b.$value().changedTouches;for(var c=0,f=e.length;c<f;c++){a.push({el:jindo.m.getNodeElement(e[c].target),nX:e[c].pageX,nY:e[c].pageY,nTime:d})}}else{a.push({el:b.element,nX:b.pos().pageX,nY:b.pos().pageY,nTime:d})}return a},getBaseElement:function(a){return this._el},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},destroy:function(){this.deactivate();this._el=null;for(var a in this._htMoveInfo){this._htMoveInfo[a]=null}this._htMoveInfo=null;for(var a in this.htEndInfo){this.htEndInfo[a]=null}this.htEndInfo=null;this.bStart=null;this.bMove=null;this.nMoveType=null;this._nVSlope=null;this._nHSlope=null;this.bSetSlope=null}}).extend(jindo.UIComponent);new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.UIComponent"]})');window.requestAnimationFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){return setTimeout(a,0)}})();window.cancelRequestAnimationFrame=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||clearTimeout})();jindo.m.CoreScroll=jindo.$Class({$init:function(b,a){this.option({bActivateOnload:true,bUseHScroll:false,bUseVScroll:true,bUseMomentum:true,nDeceleration:0.0006,nOffsetTop:0,nOffsetBottom:0,nHeight:0,nWidth:0,bUseBounce:true,bUseHighlight:true,sClassPrefix:"scroll_",bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction(),sListElement:"",nRatio:1.5,bUseTranslate:true});this.option(a||{});this._initVar();this._setWrapperElement(b);if(this.option("bActivateOnload")){this.activate()}},_initVar:function(){var a=jindo.m.getDeviceInfo();this.isPositionBug=a.android&&!a.bChrome;this.isIos=a.ipad||a.iphone;this.nVersion=parseFloat(a.version.substr(0,3));this.sCssPrefix=jindo.m.getCssPrefix();this.sTranOpen=null;this.sTranEnd=null;this.nWrapperW=null;this.nWrapperH=null;this.nScrollW=null;this.nScrollH=null;this.nMaxScrollLeft=null;this.nMaxScrollTop=null;this.nMinScrollTop=null;this.bUseHScroll=null;this.bUseVScroll=null;this._nLeft=0;this._nTop=0;this.bUseHighlight=this.option("bUseHighlight");this._aAni=[];this._nAniTimer=null;this._nFixePositionBugTimer=null;this._oTouch=null;this._oDynamicScrollPlugin=null;this._bUseDynamicScroll=false;this._isAnimating=false;this._isControling=false;this._isStop=false;if(this.option("sListElement")){this.option("bUseCss3d",false)}this._setTrans();if(this.bUseHighlight){if(this.isPositionBug){this._elDummyTag=null}if(this.isIos){this._aAnchor=null;this._fnDummyFnc=function(){return false};this._bBlocked=false}}},_setTrans:function(){if(this.option("bUseCss3d")){this.sTranOpen="3d(";this.sTranEnd=",0)"}else{this.sTranOpen="(";this.sTranEnd=")"}},getCurrentPos:function(){return{nTop:this._nTop,nLeft:this._nLeft}},setLayer:function(a){this._htWElement.wrapper=jindo.$Element(a);this._htWElement.wrapper.css("overflow","hidden");if(this._htWElement.wrapper.css("position")=="static"){this._htWElement.wrapper.css("position","relative")}if(!this.bUseHighlight){this._htWElement.wrapper.css(this.sCssPrefix+"TapHighlightColor","rgba(0,0,0,0)")}this.setScroller()},setScroller:function(){this._htWElement.scroller=this._htWElement.wrapper.first();this._htWElement.scroller.css({position:"absolute",zIndex:1,left:0,top:0});if(this.option("bUseTranslate")||this.option("bUseCss3d")){this._htWElement.scroller.css(this.sCssPrefix+"TransitionProperty","-webkit-transform").css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0,0"+this.sTranEnd)}if(this.option("bUseTimingFunction")){this._htWElement.scroller.css(this.sCssPrefix+"TransitionTimingFunction","cubic-bezier(0.33,0.66,0.66,1)")}if(this.isPositionBug&&this.bUseHighlight&&this.nVersion<3){this._elDummyTag=this._htWElement.scroller.query("._scroller_dummy_atag_");if(!this._elDummyTag){this._elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_scroller_dummy_atag_'></a>");this._htWElement.scroller.append(this._elDummyTag)}}},_setWrapperElement:function(a){this._htWElement={};this.setLayer(a)},refresh:function(b){if(!this.isActivating()){return}if(this.option("nWidth")){this._htWElement.wrapper.width(parseInt(this.option("nWidth"),10))}if(this.option("nHeight")){this._htWElement.wrapper.height(parseInt(this.option("nHeight"),10))}this.nWrapperW=this._htWElement.wrapper.width()-parseInt(this._htWElement.wrapper.css("border-left-width"),10)-parseInt(this._htWElement.wrapper.css("border-right-width"),10);this.nWrapperH=this._htWElement.wrapper.height()-parseInt(this._htWElement.wrapper.css("border-top-width"),10)-parseInt(this._htWElement.wrapper.css("border-bottom-width"),10);this.nScrollW=this._htWElement.scroller.width();this.nScrollH=this._htWElement.scroller.height()-this.option("nOffsetBottom");this.nMaxScrollLeft=this.nWrapperW-this.nScrollW;this.nMaxScrollTop=this.nWrapperH-this.nScrollH;this.nMinScrollTop=-this.option("nOffsetTop");if(this.bUseHighlight&&this.isIos){this._aAnchor=jindo.$$("A",this._htWElement.scroller.$value())}this.bUseHScroll=this.option("bUseHScroll")&&(this.nWrapperW<=this.nScrollW);this.bUseVScroll=this.option("bUseVScroll")&&(this.nWrapperH<=this.nScrollH);if(this.bUseHScroll&&!this.bUseVScroll){this._htWElement.scroller.$value().style.height="100%"}if(!this.bUseHScroll&&this.bUseVScroll){this._htWElement.scroller.$value().style.width="100%"}this._bUseDynamicScroll=false;if(this.option("sListElement")&&!(this.bUseVScroll&&this.bUseHScroll)){var a=this.option("nRatio")*2;if(this.bUseVScroll&&(this.nScrollH>(this.nWrapperH*a))){this._createDynamicScrollPlugin("V")}else{if(this.bUseHScroll&&(this.nScrollW>(this.nWrapperW*a))){this._createDynamicScrollPlugin("H")}}}if(!this.bUseHScroll&&!this.bUseVScroll){this._fixPositionBug()}if(!b){this.restorePos(0)}},_createDynamicScrollPlugin:function(a){if(!this._oDynamicScrollPlugin){this._oDynamicScrollPlugin=new jindo.m.DynamicScrollPlugin(this._htWElement.wrapper,{nRatio:this.option("nRatio"),sListElement:this.option("sListElement"),sDirection:a})}this._oDynamicScrollPlugin.refresh(a=="V"?this._nTop:this._nLeft);this.option("bUseTimingFunction",false);this._bUseDynamicScroll=true},_setPos:function(d,c){var b;d=this.bUseHScroll?d:0;c=this.bUseVScroll?c:0;if(this._bUseDynamicScroll){b=this._checkDirection(d,c)}if(this._fireEvent("beforePosition")){this._isControling=true;this._nLeft=d;this._nTop=c;if(this._bUseDynamicScroll){this._oDynamicScrollPlugin.updateListStatus(b,this.bUseVScroll?this._nTop:this._nLeft)}if(this.option("bUseTranslate")){if(this.bUseHighlight&&this.isPositionBug){var a=this.getStyleOffset(this._htWElement.scroller);d-=a.left;c-=a.top}this._htWElement.scroller.css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+d+"px, "+c+"px"+this.sTranEnd)}else{this._htWElement.scroller.css({left:d+"px",top:c+"px"})}this._fireEvent("position")}},_checkDirection:function(e,d){var b=this.bUseVScroll?this._nTop:this._nLeft,c=this.bUseVScroll?d:e,a;if(b>c){a="forward"}else{a="backward"}return a},restorePos:function(c){if(!this.bUseHScroll&&!this.bUseVScroll){return}var b=this.getPosLeft(this._nLeft),a=this.getPosTop(this._nTop);if(b===this._nLeft&&a===this._nTop){this._isControling=false;this._fireEvent("afterScroll");this._fixPositionBug();return}else{this.scrollTo(b,a,c)}},_getMomentum:function(c,g,f,h,i,d){var j=this.option("nDeceleration"),a=f/j,e=0,b=0;if(c<0&&a>i){b=h/(6/(a/g*j));i=i+b;g=g*i/a;a=i}else{if(c>0&&a>d){b=h/(6/(a/g*j));d=d+b;g=g*d/a;a=d}}a=a*(c>0?-1:1);e=g/j;return{nDist:a,nTime:Math.round(e)}},_stop:function(){if(this.option("bUseTimingFunction")){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd)}else{cancelRequestAnimationFrame(this._nAniTimer)}this._aAni=[];this._isAnimating=false},scrollTo:function(b,a,c){this._stop();b=this.bUseHScroll?b:0;a=this.bUseVScroll?a:0;this._aAni.push({nLeft:b,nTop:a,nDuration:c||0});this._animate()},isMoving:function(){return this._isControling},_animate:function(){var b=this,f;if(this._isAnimating){return}if(!this._aAni.length){this.restorePos(300);return}do{f=this._aAni.shift();if(!f){return}}while(f.nLeft==this._nLeft&&f.nTop==this._nTop);if(f.nDuration==0){if(this.option("bUseTimingFunction")){this._transitionTime(0)}this._setPos(f.nLeft,f.nTop);this._animate()}else{this._isAnimating=true;if(this.option("bUseTimingFunction")){this._transitionTime(f.nDuration);this._setPos(f.nLeft,f.nTop);this._isAnimating=false;jindo.m.attachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd)}else{var e=(new Date()).getTime(),d=this._nLeft,c=this._nTop;(function a(){var g=(new Date()).getTime(),h;if(g>=e+f.nDuration){b._setPos(f.nLeft,f.nTop);b._isAnimating=false;b._animate();return}g=(g-e)/f.nDuration-1;h=Math.sqrt(1-Math.pow(g,2));b._setPos((f.nLeft-d)*h+d,(f.nTop-c)*h+c);if(b._isAnimating){b._nAniTimer=requestAnimationFrame(a)}})()}}},_transitionTime:function(a){a+="ms";this._htWElement.scroller.css(this.sCssPrefix+"TransitionDuration",a);this._fireEventSetDuration(a)},_clearAnchorForIos:function(){if(this.isIos&&this._aAnchor&&!this._bBlocked){var b=null;for(var d=0,c=this._aAnchor.length;d<c;d++){if(!this._aAnchor[d].___isClear___){if(this._fnDummyFnc!==this._aAnchor[d].onclick){this._aAnchor[d]._onclick=this._aAnchor[d].onclick}this._aAnchor[d].onclick=this._fnDummyFnc;this._aAnchor[d].___isClear___=true;b=this._aAnchor[d].___listeners___||[];for(var a=0,e=b.length;a<e;a++){___Old__removeEventListener___.call(this._aAnchor[d],"click",b[a].listener,b[a].useCapture)}}}this._bBlocked=true}},_restoreAnchorForIos:function(){if(this.isIos&&this._aAnchor&&this._bBlocked){var b=null;for(var d=0,c=this._aAnchor.length;d<c;d++){if(this._aAnchor[d].___isClear___){if(this._fnDummyFnc!==this._aAnchor[d]._onclick){this._aAnchor[d].onclick=this._aAnchor[d]._onclick}else{this._aAnchor[d].onclick=null}this._aAnchor[d].___isClear___=null;b=this._aAnchor[d].___listeners___||[];for(var a=0,e=b.length;a<e;a++){___Old__addEventListener___.call(this._aAnchor[d],"click",b[a].listener,b[a].useCapture)}}}this._bBlocked=false}},_stopScroll:function(){var a=jindo.m.getCssOffset(this._htWElement.scroller.$value()),b={left:0,top:0},c,d;if(this.isPositionBug&&this.bUseHighlight||!this.option("bUseTranslate")){b=this.getStyleOffset(this._htWElement.scroller)}d=a.left+b.left;c=a.top+b.top;if(d!==this._nLeft||c!==this._nTop){this._stop();this._isStop=true;this._setPos(this.getPosLeft(d),this.getPosTop(c));this._isControling=false;this._fireEvent("afterScroll");this._fixPositionBug()}},getStyleOffset:function(a){var c=parseInt(a.css("left"),10),b=parseInt(a.css("top"),10);c=isNaN(c)?0:c;b=isNaN(b)?0:b;return{left:c,top:b}},getPosLeft:function(a){return(a>=0?0:(a<=this.nMaxScrollLeft?this.nMaxScrollLeft:a))},getPosTop:function(a){return(a>=this.nMinScrollTop?this.nMinScrollTop:(a<=this.nMaxScrollTop?this.nMaxScrollTop:a))},_fireEventSetDuration:function(a){this.fireEvent("setDuration",{nDuration:a,bUseHScroll:this.bUseHScroll,bUseVScroll:this.bUseVScroll})},_fireEventbeforeScroll:function(a){return this.fireEvent("beforeScroll",a)},_fireEventScroll:function(a){this.fireEvent("scroll",a)},_fireEvent:function(a){return this.fireEvent(a,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop})},_fireTouchEvent:function(b,a){return this.fireEvent(b,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop,oEvent:a})},_onStart:function(a){this._clearFixPositionBug();if(this._fireTouchEvent("beforeTouchStart",a)){this._clearAnchorForIos();this._isAnimating=false;this._isControling=true;this._isStop=false;if(this.option("bUseTimingFunction")){this._transitionTime(0)}this._stopScroll();this._fireTouchEvent("touchStart",a)}},_onMove:function(c){var a=c.oEvent;if(c.sMoveType===jindo.m.MOVETYPE[0]){if(this.bUseHScroll){if(!this.option("bUseBounce")&&((this._nLeft>=0&&c.nVectorX>0)||(this._nLeft<=this.nMaxScrollLeft&&c.nVectorX<0))){this._forceRestore(c);return}else{a.stop(jindo.$Event.CANCEL_ALL)}}else{return true}}else{if(c.sMoveType===jindo.m.MOVETYPE[1]){if(this.bUseVScroll){if(!this.option("bUseBounce")&&((this._nTop>=this.nMinScrollTop&&c.nVectorY>0)||(this._nTop<=this.nMaxScrollTop&&c.nVectorY<0))){this._forceRestore(c);return}else{a.stop(jindo.$Event.CANCEL_ALL)}}else{return true}}else{if(c.sMoveType===jindo.m.MOVETYPE[2]){a.stop(jindo.$Event.CANCEL_ALL)}else{a.stop(jindo.$Event.CANCEL_ALL);return true}}}if(this._fireTouchEvent("beforeTouchMove",c)){var d,b;this._clearFixPositionBug();if(this.option("bUseBounce")){d=this._nLeft+(this._nLeft>=0||this._nLeft<=this.nMaxScrollLeft?c.nVectorX/2:c.nVectorX);b=this._nTop+(this._nTop>=this.nMinScrollTop||this._nTop<=this.nMaxScrollTop?c.nVectorY/2:c.nVectorY);if(this.bUseVScroll&&c.nY<=30&&!this.bUseHScroll){this._forceRestore(c);return}}else{d=this.getPosLeft(this._nLeft+c.nVectorX);b=this.getPosTop(this._nTop+c.nVectorY)}this._setPos(d,b);this._fireTouchEvent("touchMove",c)}},_onEnd:function(a){if(!this._fireTouchEvent("beforeTouchEnd",a)){return}this._clearFixPositionBug();if(a.sMoveType===jindo.m.MOVETYPE[0]||a.sMoveType===jindo.m.MOVETYPE[1]||a.sMoveType===jindo.m.MOVETYPE[2]){this._endForScroll(a);if(this.isIos||this.nVersion<4.1){a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)}}else{this._isControling=false;if(!this._isStop){if(this.bUseHighlight){this._restoreAnchorForIos()}}}this._fireTouchEvent("touchEnd",a)},_forceRestore:function(a){a.nMomentumX=a.nMomentumY=null;this._endForScroll(a);this._clearFixPositionBug()},_endForScroll:function(c){var b={nDist:0,nTime:0},a={nDist:0,nTime:0},d={nMomentumX:c.nMomentumX,nMomentumY:c.nMomentumY,nDistanceX:c.nDistanceX,nDistanceY:c.nDistanceY,nLeft:this._nLeft,nTop:this._nTop};if(this.option("bUseMomentum")&&(c.nMomentumX||c.nMomentumY)){if(this.bUseHScroll){b=this._getMomentum(-c.nDistanceX,c.nSpeedX,c.nMomentumX,this.nWrapperW,-this._nLeft,-this.nMaxScrollLeft+this._nLeft)}if(this.bUseVScroll){a=this._getMomentum(-c.nDistanceY,c.nSpeedY,c.nMomentumY,this.nWrapperH,-this._nTop,-this.nMaxScrollTop+this._nTop)}d.nNextLeft=this._nLeft+b.nDist;d.nNextTop=this._nTop+a.nDist;d.nTime=Math.max(Math.max(b.nTime,a.nTime),10);if(this._fireEventbeforeScroll(d)){if(this.option("bUseBounce")){this.scrollTo(d.nNextLeft,d.nNextTop,d.nTime)}else{this.scrollTo(this.getPosLeft(d.nNextLeft),this.getPosTop(d.nNextTop),d.nTime)}this._fireEventScroll(d)}}else{d.nNextLeft=this._nLeft;d.nNextTop=this._nTop;d.nTime=0;if(this._fireEventbeforeScroll(d)){if(this._nLeft!==d.nNextLeft||this._nTop!==d.nNextTop){this.scrollTo(d.nNextLeft,d.nNextTop,d.nTime)}else{this.restorePos(300)}this._fireEventScroll(d)}}},_onTransitionEnd:function(a){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);this._animate()},_onDocumentStart:function(a){if(this._htWElement.wrapper.visible()){if(this._htWElement.wrapper.isChildOf(a.element)){return true}else{this._stopScroll()}}},_onActivate:function(){if(!this._oTouch){this._oTouch=new jindo.m.Touch(this._htWElement.wrapper.$value(),{nMoveThreshold:0,nMomentumDuration:(jindo.m.getDeviceInfo().android?500:200),nTapThreshold:1,nSlopeThreshold:5})}else{this._oTouch.activate()}this._attachEvent();this.refresh()},_onDeactivate:function(){this._detachEvent();this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={};this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind();this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind();this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind();this._htEvent.TransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind();this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart");this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd})},_fixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight&&this.option("bUseTranslate")){var a=this;this._clearFixPositionBug();this._nFixePositionBugTimer=setTimeout(function(){if(a._htWElement&&a._htWElement.scroller){a.makeStylePos(a._htWElement.scroller);if(a.nVersion<3){a._elDummyTag.focus()}}},200)}},makeStylePos:function(b){var c=b.$value();var a=jindo.m.getCssOffset(c);var d=b.offset();if(this.nVersion>=4){c.style[this.sCssPrefix+"Transform"]="translate"+this.sTranOpen+"0px, 0px"+this.sTranEnd}else{c.style[this.sCssPrefix+"Transform"]=null}c.style[this.sCssPrefix+"TransitionDuration"]=null;b.offset(a.top+d.top,a.left+d.left)},_clearFixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight){clearTimeout(this._nFixePositionBugTimer);this._nFixePositionBugTimer=-1}},_detachEvent:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);this._htEvent.document.detach(document,"touchstart");this._oTouch.detachAll();if(this._elDummyTag){this._htWElement.scroller.remove(this._elDummyTag)}},destroy:function(){this.deactivate();for(var a in this._htWElement){this._htWElement[a]=null}this._htWElement=null;this._oTouch.destroy();delete this._oTouch}}).extend(jindo.UIComponent);new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.UIComponent"]})');jindo.m.Scroll=jindo.$Class({$init:function(b,a){this.option({bActivateOnload:true,bUseScrollbar:true,bUseFixedScrollbar:false,sScrollbarBorder:"1px solid white",sScrollbarColor:"#8e8e8e",bUsePullDown:false,bUsePullUp:false,sClassPrefix:"scroll_",bUseVScroll:true,bUseHScroll:false,bUseBounce:true,fnPullDownIdle:null,fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,fnPullUpIdle:null,fnPullUpBeforeUpdate:null,fnPullUpUpdating:null,nOffsetTop:0,nOffsetBottom:0,bAutoResize:false});this.option(a||{});this._initVar();this._setWrapperElement(b);this._InitPullUpdateFunc();if(this.option("bActivateOnload")){this.activate()}},_initVar:function(){this._oCore=null;this._isPullDown=false;this._isPullUp=false;this._isUpdating=false;this._nOrgMaxScrollTop=null;this._nPropHScroll=0;this._nPropVScroll=0;this._htWElement={}},_setWrapperElement:function(a){this._htWElement.wrapper=jindo.$Element(a);this._htWElement.pullDown=jindo.$Element(this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullDown"));this._htWElement.pullUp=jindo.$Element(this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullUp"))},_InitPullUpdateFunc:function(){if(this.option("bUsePullDown")===true){if(!this.option("fnPullDownIdle")){this.option("fnPullDownIdle",function(a){a.html("  ")})}if(!this.option("fnPullDownBeforeUpdate")){this.option("fnPullDownBeforeUpdate",function(a){a.html(" ")})}if(!this.option("fnPullDownUpdating")){this.option("fnPullDownUpdating",function(a){a.html(" ...")})}}if(this.option("bUsePullUp")===true){if(!this.option("fnPullUpIdle")){this.option("fnPullUpIdle",function(a){a.html("   ")})}if(!this.option("fnPullUpBeforeUpdate")){this.option("fnPullUpBeforeUpdate",function(a){a.html(" ")})}if(!this.option("fnPullUpUpdating")){this.option("fnPullUpUpdating",function(a){a.html(" ...")})}}},_onActivate:function(){if(this._oCore){this._oCore.activate()}this.refresh();this._attachEvent()},setUsePullDown:function(a){this.option("bUsePullDown",a);this._refreshPullStatus()},setUsePullUp:function(a){this.option("bUsePullUp",a);this._refreshPullStatus()},width:function(a){if(a){this.option("nWidth",a);this.refresh()}else{if(this.option("nWidth")){return parseInt(this.option("nWidth"),10)}else{return this._htWElement.wrapper.width()}}},height:function(a){if(a){this.option("nHeight",a);this.refresh()}else{if(this.option("nHeight")){return parseInt(this.option("nHeight"),10)}else{return this._htWElement.wrapper.height()}}},_refreshPullStatus:function(){this._isUpdating=false;this._nOrgMaxScrollTop=null;this._isPullDown=this.option("bUsePullDown")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&(this._htWElement.pullDown!==null);this._isPullUp=this.option("bUsePullUp")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&(this._htWElement.pullUp!==null);if(this._isPullDown&&this.option("fnPullDownIdle")){this._htWElement.pullDown._isReady_=false;this._htWElement.pullDown.show();this.option("fnPullDownIdle")(this._htWElement.pullDown)}if(this._isPullUp&&this.option("fnPullUpIdle")){this._htWElement.pullUp._isReady_=false;this._htWElement.pullUp.show();this.option("fnPullUpIdle")(this._htWElement.pullUp)}},refresh:function(){if(!this.isActivating()){return}this._refreshPullStatus();if(this._oCore){this._oCore.option({nOffsetTop:(this._isPullDown?this._htWElement.pullDown.height():0)-this.option("nOffsetTop"),nOffsetBottom:(this._isPullUp?this._htWElement.pullUp.height():0)-this.option("nOffsetBottom"),nWidth:this.option("nWidth"),nHeight:this.option("nHeight")});this._oCore.refresh()}else{var a=this.option();var c={};for(var b in a){c[b]=a[b]}c.bActivateOnload=true;c.nOffsetTop=(this._isPullDown?this._htWElement.pullDown.height():0)-this.option("nOffsetTop");c.nOffsetBottom=(this._isPullUp?this._htWElement.pullUp.height():0)-this.option("nOffsetBottom");this._oCore=new jindo.m.CoreScroll(this._htWElement.wrapper,c)}if(this.option("bUseScrollbar")){this._refreshScroll("V");this._refreshScroll("H")}if(!this.hasVScroll()){if(this._htWElement.pullDown!==null){this._htWElement.pullDown.hide()}if(this._htWElement.pullUp!==null){this._htWElement.pullUp.hide()}}},scrollTo:function(b,a,c){c=c||0;b=-Math.abs(b);a=-Math.abs(a);a+=this.getTop();this._oCore.scrollTo((b>=this.getLeft()?this.getLeft():(b<=this.getRight()?this.getRight():b)),(a>=this.getTop()?this.getTop():(a<=this.getBottom()?this.getBottom():a)),c)},getRight:function(){return this._oCore.nMaxScrollLeft},getLeft:function(){return 0},getBottom:function(){return this._oCore.nMaxScrollTop},getTop:function(){return this._oCore.nMinScrollTop},getCurrentPos:function(){return this._oCore.getCurrentPos()},hasHScroll:function(){return this._oCore.bUseHScroll},hasVScroll:function(){return this._oCore.bUseVScroll},_onDeactivate:function(){this._detachEvent();this._oCore.deactivate()},_attachEvent:function(){this._htEvent={};this._oCore.attach({beforeTouchStart:jindo.$Fn(this._onBeforeTouchStart,this).bind(),touchStart:jindo.$Fn(this._onTouchStart,this).bind(),beforeTouchMove:jindo.$Fn(this._onBeforeTouchMove,this).bind(),touchMove:jindo.$Fn(this._onTouchMove,this).bind(),beforeTouchEnd:jindo.$Fn(this._onBeforeTouchEnd,this).bind(),touchEnd:jindo.$Fn(this._onTouchEnd,this).bind(),beforePosition:jindo.$Fn(this._onBeforePosition,this).bind(),position:jindo.$Fn(this._onPosition,this).bind(),setDuration:jindo.$Fn(this._onSetDuration,this).bind(),afterScroll:jindo.$Fn(this._onAfterScroll,this).bind()});if(this.option("bAutoResize")){this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind();jindo.m.bindRotate(this._htEvent.rotate)}},_onRotate:function(a){this.refresh()},_onSetDuration:function(a){if(this.option("bUseScrollbar")){if(a.bUseHScroll&&this._htWElement.HscrollbarIndicator){this._htWElement.HscrollbarIndicator.css(this._oCore.sCssPrefix+"TransitionDuration",a.nDuration)}if(a.bUseVScroll&&this._htWElement.VscrollbarIndicator){this._htWElement.VscrollbarIndicator.css(this._oCore.sCssPrefix+"TransitionDuration",a.nDuration)}}},_onBeforeTouchStart:function(a){if(!this.fireEvent("beforeTouchStart",a)){a.stop()}},_onTouchStart:function(a){this.fireEvent("touchStart",a)},_onBeforeTouchMove:function(a){if(!this.fireEvent("beforeTouchMove",a)){a.stop()}},_onTouchMove:function(a){if(this._isPullDown||this._isPullUp){this._touchMoveForUpdate(a)}this.fireEvent("touchMove",a)},_onBeforeTouchEnd:function(a){if(!this.fireEvent("beforeTouchEnd",a)){a.stop()}},_onTouchEnd:function(a){if(this._isPullDown&&this._htWElement.pullDown._isReady_){this._pullUploading(this._htWElement.pullDown,false)}if(this._isPullUp&&this._htWElement.pullUp._isReady_){this._pullUploading(this._htWElement.pullUp,true)}this.fireEvent("touchEnd",a)},_onBeforePosition:function(a){if(!this.fireEvent("beforePosition",a)){a.stop()}},_onPosition:function(a){if(this.option("bUseScrollbar")){this._setScrollBarPos("V",a.nTop);this._setScrollBarPos("H",a.nLeft)}this.fireEvent("position",a)},_onAfterScroll:function(a){if(this.option("bUseScrollbar")&&!this.option("bUseFixedScrollbar")){this._hideScrollBar("H");this._hideScrollBar("V")}this.fireEvent("afterScroll",a)},_hideScrollBar:function(b){var a=this._htWElement[b+"scrollbar"],c=(b==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll);if(c&&a){if(this._oCore.isPositionBug&&this._oCore.bUseHighlight){this._oCore.makeStylePos(this._htWElement[b+"scrollbarIndicator"])}a.hide();a.css("left",a.css("left")+"px")}},_fireEventPullDown:function(){if(!this._htWElement){return}this.fireEvent("pullDown",{welElement:this._htWElement.pullDown,oScroll:this})},_fireEventPullUp:function(){if(!this._htWElement){return}this.fireEvent("pullUp",{welElement:this._htWElement.pullUp,oScroll:this})},_pullUploading:function(b,d){var c=d?this.option("fnPullUpUpdating"):this.option("fnPullDownUpdating");var a=this;this._isUpdating=true;b._isReady_=false;if(c){setTimeout(function(){c(b);if(d){a._fireEventPullUp()}else{a._fireEventPullDown()}},0)}},_touchMoveForUpdate:function(b){if(this._isUpdating){return}var a=this._oCore.option("nOffsetTop");var c=this._oCore.option("nOffsetBottom");b.nMaxScrollTop=this._nOrgMaxScrollTop?this._nOrgMaxScrollTop:b.nMaxScrollTop;if(this._isPullDown){if(this._htWElement.pullDown._isReady_){if(a>b.nTop){this._htWElement.pullDown._isReady_=false;if(this.option("fnPullDownIdle")){this.option("fnPullDownIdle")(this._htWElement.pullDown);this._oCore.nMinScrollTop=-a}}}else{if(b.nTop>a){this._htWElement.pullDown._isReady_=true;if(this.option("fnPullDownBeforeUpdate")){this.option("fnPullDownBeforeUpdate")(this._htWElement.pullDown);this._oCore.nMinScrollTop=0}}}}if(this._isPullUp){if(this._htWElement.pullUp._isReady_){if(b.nTop>=(b.nMaxScrollTop-c)){this._htWElement.pullUp._isReady_=false;if(this.option("fnPullUpIdle")){this.option("fnPullUpIdle")(this._htWElement.pullUp);this._oCore.nMaxScrollTop=b.nMaxScrollTop}}}else{if(b.nTop<(b.nMaxScrollTop-c)){this._htWElement.pullUp._isReady_=true;if(this.option("fnPullUpBeforeUpdate")){this.option("fnPullUpBeforeUpdate")(this._htWElement.pullUp);this._nOrgMaxScrollTop=b.nMaxScrollTop;this._oCore.nMaxScrollTop=b.nMaxScrollTop-c}}}}},isMoving:function(){return this._oCore.isMoving()},_detachEvent:function(){this._oCore.detachAll();if(this.option("bAutoResize")){jindo.m.unbindRotate(this._htEvent.rotate)}this._htEvent=null},_createScroll:function(a){if(!(a==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll)){return}var d=this._htWElement[a+"scrollbar"],c=this._htWElement[a+"scrollbarIndicator"],b=this._htWElement.wrapper;if(d){b.remove(d);this._htWElement[a+"scrollbar"]=this._htWElement[a+"scrollbarIndicator"]=null}d=this._createScrollbar(a);c=this._createScrollbarIndicator(a);this._htWElement[a+"scrollbar"]=d;this._htWElement[a+"scrollbarIndicator"]=c;d.append(c);b.append(d);this._refreshScroll(a)},_refreshScroll:function(b){if(b==="H"){if(!this._oCore.bUseHScroll||this._oCore.nWrapperW==this._oCore.nScrollW){return}}else{if(!this._oCore.bUseVScroll||this._oCore.nWrapperH==this._oCore.nScrollH){return}}if(!this._htWElement[b+"scrollbar"]){this._createScroll(b)}var d=this._htWElement[b+"scrollbar"],c=this._htWElement[b+"scrollbarIndicator"],a=0;if(b==="H"){a=Math.max(Math.round(Math.pow(this._oCore.nWrapperW,2)/this._oCore.nScrollW),8);this._nPropHScroll=(this._oCore.nWrapperW-a)/this._oCore.nMaxScrollLeft;d.width(this._oCore.nWrapperW);c.width(isNaN(a)?0:a)}else{a=Math.max(Math.round(Math.pow(this._oCore.nWrapperH,2)/this._oCore.nScrollH),8);this._nPropVScroll=(this._oCore.nWrapperH-a)/this._oCore.nMaxScrollTop;d.height(this._oCore.nWrapperH);c.height(isNaN(a)?0:a)}},_createScrollbar:function(a){var b=jindo.$Element("<div>");b.css({position:"absolute",zIndex:100,bottom:(a==="H"?"1px":(this._oCore.bUseHScroll?"7":"2")+"px"),right:(a==="H"?(this._oCore.bUseVScroll?"7":"2")+"px":"1px"),pointerEvents:"none"});if(this.option("bUseFixedScrollbar")){b.show()}else{b.hide()}if(a==="H"){b.css({height:"5px",left:"2px"})}else{b.css({width:"5px",top:"2px"})}return b},_createScrollbarIndicator:function(a){var b=jindo.$Element("<div>").css({position:"absolute",zIndex:100,border:this.option("sScrollbarBorder"),pointerEvents:"none",left:0,top:0,"background-color":this.option("sScrollbarColor")});if(this._oCore.isIos){b.css(this._oCore.sCssPrefix+"BorderRadius","12px")}if(this._oCore.option("bUseTranslate")||this._oCore.option("bUseCss3d")){b.css(this._oCore.sCssPrefix+"TransitionProperty","-webkit-transform").css(this._oCore.sCssPrefix+"Transform","translate"+this._oCore.sTransOpen+"0,0"+this._oCore.sTransEnd)}if(this._oCore.option("bUseTimingFunction")){b.css(this._oCore.sCssPrefix+"TransitionTimingFunction","cubic-bezier(0.33,0.66,0.66,1)")}if(a==="H"){b.height(5)}else{b.width(5)}return b},_setScrollBarPos:function(a,c){if(!(a==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll)){return}var b=this._htWElement[a+"scrollbarIndicator"],e=this._htWElement[a+"scrollbar"];c=this["_nProp"+a+"Scroll"]*c;if(!this.option("bUseFixedScrollbar")&&!e.visible()){e.show()}if(b){if(this._oCore.option("bUseTranslate")){if(this._oCore.isPositionBug&&this._oCore.bUseHighlight){var d=parseInt((a==="H"?b.css("left"):b.css("top")),10);c-=isNaN(d)?0:d}b.css(this._oCore.sCssPrefix+"Transform","translate"+this._oCore.sTranOpen+(a==="H"?c+"px,0":"0,"+c+"px")+this._oCore.sTranEnd)}else{if(a==="H"){b.css("left",c+"px")}else{b.css("top",c+"px")}}}},destroy:function(){this.deactivate();for(var a in this._htWElement){this._htWElement[a]=null}this._oCore.destroy();delete this._oCore;this._htWElement=null}}).extend(jindo.UIComponent);new Function('return defineLazyObject({sType : "JindoClass", aRequireObject : ["jindo.Component"]})');jindo.m.AjaxHistory=jindo.$Class({bHashEvent:false,bPushState:false,_nIntervalId:0,_htLastState:{},$init:function(a){this.option({nCheckInterval:100,bUseHash:false});this.option(a||{})},initialize:function(){this._initVar();this._attachEvent();var a=this._getHash();if(a){this._htLastState=this._getDecodedData(a);this.fireEvent("change",{bLoad:true,htHistoryData:this._htLastState})}else{this.fireEvent("load")}return this},_initVar:function(){var a=jindo.m.getDeviceInfo();this.bHashEvent="onhashchange" in window;this.bPushState=(typeof window.history!=="undefined")&&(typeof window.history.pushState!=="undefined")&&(typeof window.history.replaceState!=="undefined")&&!((a.iphone||a.ipad)&&(parseFloat(a.version,10)<4.3));this._nIntervalId=0;this._oAgent=jindo.$Agent().navigator();this._bAndroid=a.android;if(this.option("bUseHash")){this.bPushState=false}},_attachEvent:function(){this._htEvent={};if(this.bPushState){this._htEvent.popstate={ref:jindo.$Fn(this._onPopState,this).attach(window,"popstate"),el:window}}else{if(this.bHashEvent){this._htEvent.hashchange={ref:jindo.$Fn(this._onHashChange,this).attach(window,"hashchange"),el:window}}else{clearInterval(this._nIntervalId);this._nIntervalId=setInterval(jindo.$Fn(this._onHashChange,this).bind(),this.option("nCheckInterval"))}}},_onPopState:function(b){var c=b.$value().state;if(c){var a=this._cloneObject(c);if(!this._compareData(a,this._htLastState)){this._htLastState=a;this._onChange()}}},_onHashChange:function(){var a=this._getDecodedData(this._getHash());if(!this._compareData(a,this._htLastState)){this._htLastState=a;this._onChange()}},_onChange:function(){this.fireEvent("change",{bLoad:false,htHistoryData:this._htLastState})},addHistory:function(d,e){if(typeof e==="undefined"){e=false}if(d&&typeof(d)=="object"&&jindo.$H(d).length()>0){var c=this._cloneObject(d);if(this._compareData(c,this._htLastState)){return}this._htLastState=c;var b=this._getEncodedData(this._htLastState);if(this.bPushState){if(e){this._replaceState(this._htLastState)}else{this._pushState(this._htLastState)}}else{var a=this;if(this._bAndroid){setTimeout(function(){a._setHash(b)},0)}else{this._setHash(b)}}}},_replaceState:function(a){history.replaceState(a,document.title,location.href)},_pushState:function(a){history.pushState(a,document.title,location.href)},_setHash:function(a){location.hash=a},_compareData:function(c,b){if(c&&b){if(jindo.$H(c).length()==jindo.$H(b).length()){for(var a in c){if(typeof(c[a])=="object"){if(!arguments.callee(c[a],b[a])){return false}}else{if(c[a]!=b[a]){return false}}}return true}else{return false}}else{return false}},_getEncodedData:function(a){if(a){if(typeof(JSON)=="object"&&typeof(JSON.stringify)=="function"){return encodeURIComponent(JSON.stringify(a))}else{return encodeURIComponent(jindo.$Json(a).toString())}}else{return""}},_getDecodedData:function(c){try{if(c){var a=decodeURIComponent(c);if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){return JSON.parse(a)}else{return jindo.$Json(a).toObject()}}}catch(b){}return{}},_cloneObject:function(a){var c,b;if(a){c=jindo.$Json(a).toString();b=jindo.$Json(c).toObject()}else{b={}}return b},_getHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)},_detachEvent:function(){for(var b in this._htEvent){var a=this._htEvent[b];a.ref.detach(a.el,b)}this._htEvent=null},destroy:function(){this._detachEvent();clearInterval(this._nIntervalId);this._nIntervalId=null}}).extend(jindo.Component);pug.createModule("pug.mobile",{_htInstance:{},_htEventData:{},_welIframeContainer:null,_welIframe:null,_bIframeLoaderInitialized:false,_bSetLoadLazyImage:false,_aLazyImageList:[],_htElementSelector:{root:"body"},initialize:function(){if(jindo.m&&jindo.m.AjaxHistory){this._htInstance.ajax_history=new jindo.m.AjaxHistory({bUseHash:true}).attach("change",jindo.$Fn(this._onHistoryChange,this).bind()),this._htInstance.ajax_history.initialize()}},_initializeIframeLoader:function(){if(!this._bIframeLoaderInitialized){var a=jindo.$Fn(this._onRotate,this).bind();jindo.m.bindRotate(a);this._bIframeLoaderInitialized=true}},_onHistoryChange:function(b){if(!b.bLoad||!b.htHistoryData.bPreventRefresh){var a=this._findIframeUrl(b);if(a){this.loadPageByIframe(a)}else{this.hideIframe(true)}}},_findIframeUrl:function(b){if(!b||!b.htHistoryData||!b.htHistoryData.sIframeUrl){return undefined}var a=b.htHistoryData.sIframeUrl;if(!a.match(/^(\/|https?:\/\/).*$/gi)){return undefined}return a},_onRotate:function(){if(this._welIframe&&this._elInnerDocument){if(this._welIframe.width()!=window.innerWidth){this._welIframe.width(window.innerWidth);jindo.$Element(this._elInnerDocument.body).width(window.innerWidth)}this._welIframe.height(window.innerHeight)}},loadPageByIframe:function(a,f,c){if(!this._bIframeLoaderInitialized){this._initializeIframeLoader()}this._aVisibleElementList=[];for(var d=0,b=jindo.$$("> *",document.body),e;d<b.length;d++){e=jindo.$Element(b[d]);if(e.visible()){e.hide();this._aVisibleElementList.push(e)}}if(this._welIframe){this._detachEventHandler(this._htEventData.iframe_load);this._detachEventHandler(this._htEventData.iframe_error);this._welIframe.leave()}this._htInstance.ajax_history.addHistory({sIframeUrl:a,bPreventRefresh:f||false});if(c!=undefined){this._welIframe=jindo.$Element("<iframe frameborder='0' name='"+c+"' style='width:100%;height:100%;display:none;'></iframe>").appendTo(document.body)}else{this._welIframe=jindo.$Element("<iframe frameborder='0' style='width:100%;height:100%;display:none;'></iframe>").appendTo(document.body)}this._htEventData.iframe_load=this._attachEventHandler(this._welIframe,"load",jindo.$Fn(this._onLoadIframe,this).bind());this._htEventData.iframe_error=this._attachEventHandler(this._welIframe,"error",jindo.$Fn(this._onLoadError,this).bind());this._welIframe.attr("src",a)},hideIframe:function(a){if(this._welIframe){if(this._welIframe.$value()!=undefined&&this._welIframe.$value().contentWindow!=undefined){try{this._welIframe.$value().contentWindow.document.activeElement.blur()}catch(b){}}jindo.$ElementList(this._aVisibleElementList).show();this._detachEventHandler(this._htEventData.iframe_load);this._detachEventHandler(this._htEventData.iframe_error);this._welIframe.leave();if(!a){this._htInstance.ajax_history.addHistory({hide:true})}}},refreshIframeScroll:function(){if(this._welIframe){this._welIframe.height(window.innerHeight)}},_onLoadIframe:function(){this._elInnerDocument=this._welIframe.$value().contentWindow.document;if(this._welIframe.$value().contentWindow&&this._welIframe.$value().contentWindow.location.href=="about:blank"){history.go(-1);this.hideIframe()}else{if(this._elInnerDocument){setTimeout(function(){window.scrollTo(0,1)},100);jindo.$Element(this._elInnerDocument.body).css("backgroundColor",jindo.$Element(this._elInnerDocument.body).css("backgroundColor")||"#fff");this._welIframe.show().height(window.innerHeight)}}},_onLoadError:function(){alert("  .\n\n   .");this.hideIframe()},moveExternalPage:function(b,f,h,j,e,g,a){var d="persist_data_key_"+parseInt(Math.random()*1000000000,10);var c=jindo.$H(jindo.$S(location.search.substr(1,location.search.length)).parseString()).filter(function(l,k){return k!="persistDataKey"}).add("persistDataKey",d).toQueryString();var i=location.href.replace(location.search,"")+(c?"?"+c:"");j+=(j.indexOf("?")==-1?"?":"&")+"persistDataKey="+d;b+=(b.indexOf("?")==-1?"?":"&")+(jindo.$H(f||{}).toQueryString())+"&"+(e||"callbackUrl")+"="+encodeURIComponent(j);pug.storage.set(d,{sReturnUrl:i,sReturnMethod:g||"get",htPersistData:h||{},htReturnParameter:a||{}});location.href=b},returnPersistPage:function(d,c){if(!c){var a=jindo.$S(location.search.substr(1,location.search.length)).parseString();c=a?a.persistDataKey:""}if(c){var b=pug.storage.get(c);if(b&&b.htReturnParameter){if(d){b.htAdditionalData=d;pug.storage.set(c,b)}pug.form.create(b.sReturnUrl,"",b.sReturnMethod,b.htReturnParameter).$value().submit()}}else{alert("sPersistDataKey  .")}},_onScroll:function(g,a,f){var c=a||this._aLazyImageList,e=[];for(var d=0,b=c.length;d<b;d++){if(f||(c[d].offset().top<(document.body.scrollTop+window.innerHeight)&&c[d].offset().left>=0&&c[d].offset().left<=window.innerWidth)){this._attachEventHandler(c[d],"error",this._onErrorLoadImage);if(c[d].attr("data-src")){c[d].attr("src",c[d].attr("data-src")).attr("data-src",null)}}else{e.push(c[d])}}if(a&&e.length){this._aLazyImageList=this._aLazyImageList.concat(e)}else{if(!a){this._aLazyImageList=e}}},loadLazyImage:function(e,d){if(pug.variables.get("bImageLazyLoadingByScroll")){if(!this._bSetLoadLazyImage){this._attachEventHandler(window,"scroll",$Fn(this._onScroll,this).bind());this._aLazyImageList=jindo.$Element(document.body).queryAll("img[data-src]");this._bSetLoadLazyImage=true}if(e){this._onScroll(null,jindo.$Element(e).queryAll("img[data-src]"),d)}else{if(!jindo.$Agent().os().ios&&Math.max(window.screen.height-window.screenTop,window.outerHeight)>=jindo.$Document().scrollSize().height){this._onScroll()}}}else{var c=jindo.$Element(e||document.body);var a=c.queryAll("img[data-src]");for(var b=0;b<a.length;b++){this._attachEventHandler(a[b],"error",this._onErrorLoadImage);if(a[b].attr("data-src")){a[b].attr("src",a[b].attr("data-src")).attr("data-src",null)}}}},_onErrorLoadImage:function(a){var b=jindo.$Element(a.element);if(b.attr("data-error-src")){b.attr("src",b.attr("data-error-src")).attr("data-error-src",null)}},allLoadImage:function(c){var a=c.queryAll("img[data-src]");for(var b=0;b<a.length;b++){this._attachEventHandler(a[b],"error",this._onErrorLoadImage);if(a[b].attr("data-src")){a[b].attr("src",a[b].attr("data-src")).attr("data-src",null)}}}},{bNotUseElementSelector:true,bAutoInitialize:true});pug.createModule("nsp.PaymentPageLocationModule",{__delimiter:"___",_htInstance:{},_htElementSelector:{root:"body","":""},initialize:function(){this._attachEventDelegator()},_attachEventDelegator:function(){pug.event.delegator.attach(this._getElement("root"),"click",this)},movePageByHistory:function(a,b){if(isNaN(b)){return}history.go(b)},"":""},{bAutoInitialize:true});